<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.4"/>
    <title>railtracks.llm API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../railtracks.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;railtracks</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#ModelBase">ModelBase</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ModelBase.add_pre_hook">add_pre_hook</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelBase.add_post_hook">add_post_hook</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelBase.add_exception_hook">add_exception_hook</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelBase.remove_pre_hooks">remove_pre_hooks</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelBase.remove_post_hooks">remove_post_hooks</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelBase.remove_exception_hooks">remove_exception_hooks</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelBase.model_name">model_name</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelBase.model_type">model_type</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelBase.chat">chat</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelBase.achat">achat</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelBase.structured">structured</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelBase.astructured">astructured</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelBase.stream_chat">stream_chat</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelBase.astream_chat">astream_chat</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelBase.chat_with_tools">chat_with_tools</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelBase.achat_with_tools">achat_with_tools</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ToolCall">ToolCall</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#ToolCall.identifier">identifier</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToolCall.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToolCall.arguments">arguments</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToolCall.model_config">model_config</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ToolResponse">ToolResponse</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#ToolResponse.identifier">identifier</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToolResponse.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToolResponse.result">result</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToolResponse.model_config">model_config</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#UserMessage">UserMessage</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#UserMessage.__init__">UserMessage</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SystemMessage">SystemMessage</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SystemMessage.__init__">SystemMessage</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AssistantMessage">AssistantMessage</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AssistantMessage.__init__">AssistantMessage</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Message">Message</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Message.__init__">Message</a>
                        </li>
                        <li>
                                <a class="function" href="#Message.validate_content">validate_content</a>
                        </li>
                        <li>
                                <a class="variable" href="#Message.content">content</a>
                        </li>
                        <li>
                                <a class="variable" href="#Message.role">role</a>
                        </li>
                        <li>
                                <a class="variable" href="#Message.inject_prompt">inject_prompt</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ToolMessage">ToolMessage</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ToolMessage.__init__">ToolMessage</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MessageHistory">MessageHistory</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MessageHistory.removed_system_messages">removed_system_messages</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Tool">Tool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Tool.__init__">Tool</a>
                        </li>
                        <li>
                                <a class="variable" href="#Tool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Tool.detail">detail</a>
                        </li>
                        <li>
                                <a class="variable" href="#Tool.parameters">parameters</a>
                        </li>
                        <li>
                                <a class="function" href="#Tool.from_function">from_function</a>
                        </li>
                        <li>
                                <a class="function" href="#Tool.from_mcp">from_mcp</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Parameter">Parameter</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Parameter.__init__">Parameter</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parameter.enum">enum</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parameter.default">default</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parameter.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parameter.param_type">param_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parameter.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parameter.required">required</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parameter.additional_properties">additional_properties</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AnthropicLLM">AnthropicLLM</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AnthropicLLM.model_type">model_type</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#OpenAILLM">OpenAILLM</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#OpenAILLM.model_type">model_type</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#GeminiLLM">GeminiLLM</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#GeminiLLM.full_model_name">full_model_name</a>
                        </li>
                        <li>
                                <a class="function" href="#GeminiLLM.model_type">model_type</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#OllamaLLM">OllamaLLM</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#OllamaLLM.__init__">OllamaLLM</a>
                        </li>
                        <li>
                                <a class="variable" href="#OllamaLLM.logger">logger</a>
                        </li>
                        <li>
                                <a class="function" href="#OllamaLLM.chat_with_tools">chat_with_tools</a>
                        </li>
                        <li>
                                <a class="function" href="#OllamaLLM.model_type">model_type</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AzureAILLM">AzureAILLM</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AzureAILLM.__init__">AzureAILLM</a>
                        </li>
                        <li>
                                <a class="function" href="#AzureAILLM.model_type">model_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#AzureAILLM.logger">logger</a>
                        </li>
                        <li>
                                <a class="function" href="#AzureAILLM.chat">chat</a>
                        </li>
                        <li>
                                <a class="function" href="#AzureAILLM.chat_with_tools">chat_with_tools</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../railtracks.html">railtracks</a><wbr>.llm    </h1>

                
                        <input id="mod-llm-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-llm-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos"> 1</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.content</span><span class="w"> </span><span class="kn">import</span> <span class="n">ToolCall</span><span class="p">,</span> <span class="n">ToolResponse</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos"> 2</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.history</span><span class="w"> </span><span class="kn">import</span> <span class="n">MessageHistory</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos"> 3</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.message</span><span class="w"> </span><span class="kn">import</span> <span class="n">AssistantMessage</span><span class="p">,</span> <span class="n">Message</span><span class="p">,</span> <span class="n">SystemMessage</span><span class="p">,</span> <span class="n">ToolMessage</span><span class="p">,</span> <span class="n">UserMessage</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos"> 4</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.model</span><span class="w"> </span><span class="kn">import</span> <span class="n">ModelBase</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos"> 5</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">AnthropicLLM</span><span class="p">,</span> <span class="n">AzureAILLM</span><span class="p">,</span> <span class="n">GeminiLLM</span><span class="p">,</span> <span class="n">OllamaLLM</span><span class="p">,</span> <span class="n">OpenAILLM</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos"> 6</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">Parameter</span><span class="p">,</span> <span class="n">Tool</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos"> 7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos"> 8</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos"> 9</span></a>    <span class="s2">&quot;ModelBase&quot;</span><span class="p">,</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">10</span></a>    <span class="s2">&quot;ToolCall&quot;</span><span class="p">,</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">11</span></a>    <span class="s2">&quot;ToolResponse&quot;</span><span class="p">,</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">12</span></a>    <span class="s2">&quot;UserMessage&quot;</span><span class="p">,</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">13</span></a>    <span class="s2">&quot;SystemMessage&quot;</span><span class="p">,</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">14</span></a>    <span class="s2">&quot;AssistantMessage&quot;</span><span class="p">,</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">15</span></a>    <span class="s2">&quot;Message&quot;</span><span class="p">,</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">16</span></a>    <span class="s2">&quot;ToolMessage&quot;</span><span class="p">,</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">17</span></a>    <span class="s2">&quot;MessageHistory&quot;</span><span class="p">,</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">18</span></a>    <span class="s2">&quot;Tool&quot;</span><span class="p">,</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">19</span></a>    <span class="s2">&quot;Parameter&quot;</span><span class="p">,</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">20</span></a>    <span class="s2">&quot;AnthropicLLM&quot;</span><span class="p">,</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">21</span></a>    <span class="s2">&quot;OpenAILLM&quot;</span><span class="p">,</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">22</span></a>    <span class="s2">&quot;GeminiLLM&quot;</span><span class="p">,</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">23</span></a>    <span class="s2">&quot;OllamaLLM&quot;</span><span class="p">,</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">24</span></a>    <span class="s2">&quot;AzureAILLM&quot;</span><span class="p">,</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">25</span></a>    <span class="s2">&quot;GeminiLLM&quot;</span><span class="p">,</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">26</span></a><span class="p">]</span>
</span></pre></div>


            </section>
                <section id="ModelBase">
                            <input id="ModelBase-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ModelBase</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="ModelBase-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase-16"><a href="#ModelBase-16"><span class="linenos"> 16</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ModelBase</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="ModelBase-17"><a href="#ModelBase-17"><span class="linenos"> 17</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ModelBase-18"><a href="#ModelBase-18"><span class="linenos"> 18</span></a><span class="sd">    A simple base that represents the behavior of a model that can be used for chat, structured interactions, and streaming.</span>
</span><span id="ModelBase-19"><a href="#ModelBase-19"><span class="linenos"> 19</span></a>
</span><span id="ModelBase-20"><a href="#ModelBase-20"><span class="linenos"> 20</span></a><span class="sd">    The base class allows for the insertion of hooks that can modify the messages before they are sent to the model,</span>
</span><span id="ModelBase-21"><a href="#ModelBase-21"><span class="linenos"> 21</span></a><span class="sd">    response after they are received, and map exceptions that may occur during the interaction.</span>
</span><span id="ModelBase-22"><a href="#ModelBase-22"><span class="linenos"> 22</span></a>
</span><span id="ModelBase-23"><a href="#ModelBase-23"><span class="linenos"> 23</span></a><span class="sd">    All the hooks are optional and can be added or removed as needed.</span>
</span><span id="ModelBase-24"><a href="#ModelBase-24"><span class="linenos"> 24</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ModelBase-25"><a href="#ModelBase-25"><span class="linenos"> 25</span></a>
</span><span id="ModelBase-26"><a href="#ModelBase-26"><span class="linenos"> 26</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="ModelBase-27"><a href="#ModelBase-27"><span class="linenos"> 27</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="ModelBase-28"><a href="#ModelBase-28"><span class="linenos"> 28</span></a>        <span class="n">pre_hook</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">MessageHistory</span><span class="p">],</span> <span class="n">MessageHistory</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ModelBase-29"><a href="#ModelBase-29"><span class="linenos"> 29</span></a>        <span class="n">post_hook</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">MessageHistory</span><span class="p">,</span> <span class="n">Response</span><span class="p">],</span> <span class="n">Response</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ModelBase-30"><a href="#ModelBase-30"><span class="linenos"> 30</span></a>        <span class="n">exception_hook</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">MessageHistory</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="ModelBase-31"><a href="#ModelBase-31"><span class="linenos"> 31</span></a>    <span class="p">):</span>
</span><span id="ModelBase-32"><a href="#ModelBase-32"><span class="linenos"> 32</span></a>        <span class="k">if</span> <span class="n">pre_hook</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase-33"><a href="#ModelBase-33"><span class="linenos"> 33</span></a>            <span class="n">pre_hook</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">MessageHistory</span><span class="p">],</span> <span class="n">MessageHistory</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ModelBase-34"><a href="#ModelBase-34"><span class="linenos"> 34</span></a>
</span><span id="ModelBase-35"><a href="#ModelBase-35"><span class="linenos"> 35</span></a>        <span class="k">if</span> <span class="n">post_hook</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase-36"><a href="#ModelBase-36"><span class="linenos"> 36</span></a>            <span class="n">post_hook</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">MessageHistory</span><span class="p">,</span> <span class="n">Response</span><span class="p">],</span> <span class="n">Response</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ModelBase-37"><a href="#ModelBase-37"><span class="linenos"> 37</span></a>
</span><span id="ModelBase-38"><a href="#ModelBase-38"><span class="linenos"> 38</span></a>        <span class="k">if</span> <span class="n">exception_hook</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase-39"><a href="#ModelBase-39"><span class="linenos"> 39</span></a>            <span class="n">exception_hook</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">MessageHistory</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ModelBase-40"><a href="#ModelBase-40"><span class="linenos"> 40</span></a>
</span><span id="ModelBase-41"><a href="#ModelBase-41"><span class="linenos"> 41</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pre_hook</span> <span class="o">=</span> <span class="n">pre_hook</span>
</span><span id="ModelBase-42"><a href="#ModelBase-42"><span class="linenos"> 42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_post_hook</span> <span class="o">=</span> <span class="n">post_hook</span>
</span><span id="ModelBase-43"><a href="#ModelBase-43"><span class="linenos"> 43</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_exception_hook</span> <span class="o">=</span> <span class="n">exception_hook</span>
</span><span id="ModelBase-44"><a href="#ModelBase-44"><span class="linenos"> 44</span></a>
</span><span id="ModelBase-45"><a href="#ModelBase-45"><span class="linenos"> 45</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_pre_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">MessageHistory</span><span class="p">],</span> <span class="n">MessageHistory</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase-46"><a href="#ModelBase-46"><span class="linenos"> 46</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a pre-hook to modify messages before sending them to the model.&quot;&quot;&quot;</span>
</span><span id="ModelBase-47"><a href="#ModelBase-47"><span class="linenos"> 47</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pre_hook</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hook</span><span class="p">)</span>
</span><span id="ModelBase-48"><a href="#ModelBase-48"><span class="linenos"> 48</span></a>
</span><span id="ModelBase-49"><a href="#ModelBase-49"><span class="linenos"> 49</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_post_hook</span><span class="p">(</span>
</span><span id="ModelBase-50"><a href="#ModelBase-50"><span class="linenos"> 50</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">hook</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">MessageHistory</span><span class="p">,</span> <span class="n">Response</span><span class="p">],</span> <span class="n">Response</span><span class="p">]</span>
</span><span id="ModelBase-51"><a href="#ModelBase-51"><span class="linenos"> 51</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase-52"><a href="#ModelBase-52"><span class="linenos"> 52</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a post-hook to modify the response after receiving it from the model.&quot;&quot;&quot;</span>
</span><span id="ModelBase-53"><a href="#ModelBase-53"><span class="linenos"> 53</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_post_hook</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hook</span><span class="p">)</span>
</span><span id="ModelBase-54"><a href="#ModelBase-54"><span class="linenos"> 54</span></a>
</span><span id="ModelBase-55"><a href="#ModelBase-55"><span class="linenos"> 55</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_exception_hook</span><span class="p">(</span>
</span><span id="ModelBase-56"><a href="#ModelBase-56"><span class="linenos"> 56</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">hook</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">MessageHistory</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="ModelBase-57"><a href="#ModelBase-57"><span class="linenos"> 57</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase-58"><a href="#ModelBase-58"><span class="linenos"> 58</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds an exception hook to handle exceptions during model interactions.&quot;&quot;&quot;</span>
</span><span id="ModelBase-59"><a href="#ModelBase-59"><span class="linenos"> 59</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_exception_hook</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hook</span><span class="p">)</span>
</span><span id="ModelBase-60"><a href="#ModelBase-60"><span class="linenos"> 60</span></a>
</span><span id="ModelBase-61"><a href="#ModelBase-61"><span class="linenos"> 61</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_pre_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase-62"><a href="#ModelBase-62"><span class="linenos"> 62</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes all of the hooks that modify messages before sending them to the model.&quot;&quot;&quot;</span>
</span><span id="ModelBase-63"><a href="#ModelBase-63"><span class="linenos"> 63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pre_hook</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ModelBase-64"><a href="#ModelBase-64"><span class="linenos"> 64</span></a>
</span><span id="ModelBase-65"><a href="#ModelBase-65"><span class="linenos"> 65</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_post_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase-66"><a href="#ModelBase-66"><span class="linenos"> 66</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes all of the hooks that modify the response after receiving it from the model.&quot;&quot;&quot;</span>
</span><span id="ModelBase-67"><a href="#ModelBase-67"><span class="linenos"> 67</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_post_hook</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ModelBase-68"><a href="#ModelBase-68"><span class="linenos"> 68</span></a>
</span><span id="ModelBase-69"><a href="#ModelBase-69"><span class="linenos"> 69</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_exception_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase-70"><a href="#ModelBase-70"><span class="linenos"> 70</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes all of the hooks that handle exceptions during model interactions.&quot;&quot;&quot;</span>
</span><span id="ModelBase-71"><a href="#ModelBase-71"><span class="linenos"> 71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_exception_hook</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ModelBase-72"><a href="#ModelBase-72"><span class="linenos"> 72</span></a>
</span><span id="ModelBase-73"><a href="#ModelBase-73"><span class="linenos"> 73</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="ModelBase-74"><a href="#ModelBase-74"><span class="linenos"> 74</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">model_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ModelBase-75"><a href="#ModelBase-75"><span class="linenos"> 75</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ModelBase-76"><a href="#ModelBase-76"><span class="linenos"> 76</span></a><span class="sd">        Returns the name of the model being used.</span>
</span><span id="ModelBase-77"><a href="#ModelBase-77"><span class="linenos"> 77</span></a>
</span><span id="ModelBase-78"><a href="#ModelBase-78"><span class="linenos"> 78</span></a><span class="sd">        It can be treated as unique identifier for the model when paired with the `model_type`.</span>
</span><span id="ModelBase-79"><a href="#ModelBase-79"><span class="linenos"> 79</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ModelBase-80"><a href="#ModelBase-80"><span class="linenos"> 80</span></a>        <span class="k">pass</span>
</span><span id="ModelBase-81"><a href="#ModelBase-81"><span class="linenos"> 81</span></a>
</span><span id="ModelBase-82"><a href="#ModelBase-82"><span class="linenos"> 82</span></a>    <span class="nd">@classmethod</span>
</span><span id="ModelBase-83"><a href="#ModelBase-83"><span class="linenos"> 83</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="ModelBase-84"><a href="#ModelBase-84"><span class="linenos"> 84</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">model_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ModelBase-85"><a href="#ModelBase-85"><span class="linenos"> 85</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The name of the provider of this model or the model type.&quot;&quot;&quot;</span>
</span><span id="ModelBase-86"><a href="#ModelBase-86"><span class="linenos"> 86</span></a>        <span class="k">pass</span>
</span><span id="ModelBase-87"><a href="#ModelBase-87"><span class="linenos"> 87</span></a>
</span><span id="ModelBase-88"><a href="#ModelBase-88"><span class="linenos"> 88</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_run_pre_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message_history</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageHistory</span><span class="p">:</span>
</span><span id="ModelBase-89"><a href="#ModelBase-89"><span class="linenos"> 89</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs all pre-hooks on the provided message history.&quot;&quot;&quot;</span>
</span><span id="ModelBase-90"><a href="#ModelBase-90"><span class="linenos"> 90</span></a>        <span class="k">for</span> <span class="n">hook</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pre_hook</span><span class="p">:</span>
</span><span id="ModelBase-91"><a href="#ModelBase-91"><span class="linenos"> 91</span></a>            <span class="n">message_history</span> <span class="o">=</span> <span class="n">hook</span><span class="p">(</span><span class="n">message_history</span><span class="p">)</span>
</span><span id="ModelBase-92"><a href="#ModelBase-92"><span class="linenos"> 92</span></a>        <span class="k">return</span> <span class="n">message_history</span>
</span><span id="ModelBase-93"><a href="#ModelBase-93"><span class="linenos"> 93</span></a>
</span><span id="ModelBase-94"><a href="#ModelBase-94"><span class="linenos"> 94</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_run_post_hooks</span><span class="p">(</span>
</span><span id="ModelBase-95"><a href="#ModelBase-95"><span class="linenos"> 95</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">message_history</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="n">Response</span>
</span><span id="ModelBase-96"><a href="#ModelBase-96"><span class="linenos"> 96</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">:</span>
</span><span id="ModelBase-97"><a href="#ModelBase-97"><span class="linenos"> 97</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs all post-hooks on the provided message history and result.&quot;&quot;&quot;</span>
</span><span id="ModelBase-98"><a href="#ModelBase-98"><span class="linenos"> 98</span></a>        <span class="k">for</span> <span class="n">hook</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post_hook</span><span class="p">:</span>
</span><span id="ModelBase-99"><a href="#ModelBase-99"><span class="linenos"> 99</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">hook</span><span class="p">(</span><span class="n">message_history</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
</span><span id="ModelBase-100"><a href="#ModelBase-100"><span class="linenos">100</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="ModelBase-101"><a href="#ModelBase-101"><span class="linenos">101</span></a>
</span><span id="ModelBase-102"><a href="#ModelBase-102"><span class="linenos">102</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_run_exception_hooks</span><span class="p">(</span>
</span><span id="ModelBase-103"><a href="#ModelBase-103"><span class="linenos">103</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">message_history</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="n">exception</span><span class="p">:</span> <span class="ne">Exception</span>
</span><span id="ModelBase-104"><a href="#ModelBase-104"><span class="linenos">104</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase-105"><a href="#ModelBase-105"><span class="linenos">105</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs all exception hooks on the provided message history and exception.&quot;&quot;&quot;</span>
</span><span id="ModelBase-106"><a href="#ModelBase-106"><span class="linenos">106</span></a>        <span class="k">for</span> <span class="n">hook</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exception_hook</span><span class="p">:</span>
</span><span id="ModelBase-107"><a href="#ModelBase-107"><span class="linenos">107</span></a>            <span class="n">hook</span><span class="p">(</span><span class="n">message_history</span><span class="p">,</span> <span class="n">exception</span><span class="p">)</span>
</span><span id="ModelBase-108"><a href="#ModelBase-108"><span class="linenos">108</span></a>
</span><span id="ModelBase-109"><a href="#ModelBase-109"><span class="linenos">109</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="ModelBase-110"><a href="#ModelBase-110"><span class="linenos">110</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Chat with the model using the provided messages.&quot;&quot;&quot;</span>
</span><span id="ModelBase-111"><a href="#ModelBase-111"><span class="linenos">111</span></a>
</span><span id="ModelBase-112"><a href="#ModelBase-112"><span class="linenos">112</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase-113"><a href="#ModelBase-113"><span class="linenos">113</span></a>
</span><span id="ModelBase-114"><a href="#ModelBase-114"><span class="linenos">114</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase-115"><a href="#ModelBase-115"><span class="linenos">115</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chat</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase-116"><a href="#ModelBase-116"><span class="linenos">116</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase-117"><a href="#ModelBase-117"><span class="linenos">117</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during chat&quot;</span><span class="p">))</span>
</span><span id="ModelBase-118"><a href="#ModelBase-118"><span class="linenos">118</span></a>            <span class="k">raise</span>
</span><span id="ModelBase-119"><a href="#ModelBase-119"><span class="linenos">119</span></a>
</span><span id="ModelBase-120"><a href="#ModelBase-120"><span class="linenos">120</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase-121"><a href="#ModelBase-121"><span class="linenos">121</span></a>        <span class="k">return</span> <span class="n">response</span>
</span><span id="ModelBase-122"><a href="#ModelBase-122"><span class="linenos">122</span></a>
</span><span id="ModelBase-123"><a href="#ModelBase-123"><span class="linenos">123</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">achat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="ModelBase-124"><a href="#ModelBase-124"><span class="linenos">124</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Asynchronous chat with the model using the provided messages.&quot;&quot;&quot;</span>
</span><span id="ModelBase-125"><a href="#ModelBase-125"><span class="linenos">125</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase-126"><a href="#ModelBase-126"><span class="linenos">126</span></a>
</span><span id="ModelBase-127"><a href="#ModelBase-127"><span class="linenos">127</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase-128"><a href="#ModelBase-128"><span class="linenos">128</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_achat</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase-129"><a href="#ModelBase-129"><span class="linenos">129</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase-130"><a href="#ModelBase-130"><span class="linenos">130</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during async chat&quot;</span><span class="p">))</span>
</span><span id="ModelBase-131"><a href="#ModelBase-131"><span class="linenos">131</span></a>            <span class="k">raise</span>
</span><span id="ModelBase-132"><a href="#ModelBase-132"><span class="linenos">132</span></a>
</span><span id="ModelBase-133"><a href="#ModelBase-133"><span class="linenos">133</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase-134"><a href="#ModelBase-134"><span class="linenos">134</span></a>
</span><span id="ModelBase-135"><a href="#ModelBase-135"><span class="linenos">135</span></a>        <span class="k">return</span> <span class="n">response</span>
</span><span id="ModelBase-136"><a href="#ModelBase-136"><span class="linenos">136</span></a>
</span><span id="ModelBase-137"><a href="#ModelBase-137"><span class="linenos">137</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">structured</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="ModelBase-138"><a href="#ModelBase-138"><span class="linenos">138</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Structured interaction with the model using the provided messages and output_schema.&quot;&quot;&quot;</span>
</span><span id="ModelBase-139"><a href="#ModelBase-139"><span class="linenos">139</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase-140"><a href="#ModelBase-140"><span class="linenos">140</span></a>
</span><span id="ModelBase-141"><a href="#ModelBase-141"><span class="linenos">141</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase-142"><a href="#ModelBase-142"><span class="linenos">142</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structured</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase-143"><a href="#ModelBase-143"><span class="linenos">143</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase-144"><a href="#ModelBase-144"><span class="linenos">144</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span>
</span><span id="ModelBase-145"><a href="#ModelBase-145"><span class="linenos">145</span></a>                <span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during structured interaction&quot;</span><span class="p">)</span>
</span><span id="ModelBase-146"><a href="#ModelBase-146"><span class="linenos">146</span></a>            <span class="p">)</span>
</span><span id="ModelBase-147"><a href="#ModelBase-147"><span class="linenos">147</span></a>            <span class="k">raise</span>
</span><span id="ModelBase-148"><a href="#ModelBase-148"><span class="linenos">148</span></a>
</span><span id="ModelBase-149"><a href="#ModelBase-149"><span class="linenos">149</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase-150"><a href="#ModelBase-150"><span class="linenos">150</span></a>
</span><span id="ModelBase-151"><a href="#ModelBase-151"><span class="linenos">151</span></a>        <span class="k">return</span> <span class="n">response</span>
</span><span id="ModelBase-152"><a href="#ModelBase-152"><span class="linenos">152</span></a>
</span><span id="ModelBase-153"><a href="#ModelBase-153"><span class="linenos">153</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">astructured</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="ModelBase-154"><a href="#ModelBase-154"><span class="linenos">154</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Asynchronous structured interaction with the model using the provided messages and output_schema.&quot;&quot;&quot;</span>
</span><span id="ModelBase-155"><a href="#ModelBase-155"><span class="linenos">155</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase-156"><a href="#ModelBase-156"><span class="linenos">156</span></a>
</span><span id="ModelBase-157"><a href="#ModelBase-157"><span class="linenos">157</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase-158"><a href="#ModelBase-158"><span class="linenos">158</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_astructured</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase-159"><a href="#ModelBase-159"><span class="linenos">159</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase-160"><a href="#ModelBase-160"><span class="linenos">160</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span>
</span><span id="ModelBase-161"><a href="#ModelBase-161"><span class="linenos">161</span></a>                <span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during async structured interaction&quot;</span><span class="p">)</span>
</span><span id="ModelBase-162"><a href="#ModelBase-162"><span class="linenos">162</span></a>            <span class="p">)</span>
</span><span id="ModelBase-163"><a href="#ModelBase-163"><span class="linenos">163</span></a>            <span class="k">raise</span>
</span><span id="ModelBase-164"><a href="#ModelBase-164"><span class="linenos">164</span></a>
</span><span id="ModelBase-165"><a href="#ModelBase-165"><span class="linenos">165</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase-166"><a href="#ModelBase-166"><span class="linenos">166</span></a>
</span><span id="ModelBase-167"><a href="#ModelBase-167"><span class="linenos">167</span></a>        <span class="k">return</span> <span class="n">response</span>
</span><span id="ModelBase-168"><a href="#ModelBase-168"><span class="linenos">168</span></a>
</span><span id="ModelBase-169"><a href="#ModelBase-169"><span class="linenos">169</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">stream_chat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="ModelBase-170"><a href="#ModelBase-170"><span class="linenos">170</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stream chat with the model using the provided messages.&quot;&quot;&quot;</span>
</span><span id="ModelBase-171"><a href="#ModelBase-171"><span class="linenos">171</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase-172"><a href="#ModelBase-172"><span class="linenos">172</span></a>
</span><span id="ModelBase-173"><a href="#ModelBase-173"><span class="linenos">173</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase-174"><a href="#ModelBase-174"><span class="linenos">174</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stream_chat</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase-175"><a href="#ModelBase-175"><span class="linenos">175</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase-176"><a href="#ModelBase-176"><span class="linenos">176</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during stream chat&quot;</span><span class="p">))</span>
</span><span id="ModelBase-177"><a href="#ModelBase-177"><span class="linenos">177</span></a>            <span class="k">raise</span>
</span><span id="ModelBase-178"><a href="#ModelBase-178"><span class="linenos">178</span></a>
</span><span id="ModelBase-179"><a href="#ModelBase-179"><span class="linenos">179</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase-180"><a href="#ModelBase-180"><span class="linenos">180</span></a>
</span><span id="ModelBase-181"><a href="#ModelBase-181"><span class="linenos">181</span></a>        <span class="k">return</span> <span class="n">response</span>
</span><span id="ModelBase-182"><a href="#ModelBase-182"><span class="linenos">182</span></a>
</span><span id="ModelBase-183"><a href="#ModelBase-183"><span class="linenos">183</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">astream_chat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="ModelBase-184"><a href="#ModelBase-184"><span class="linenos">184</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Asynchronous stream chat with the model using the provided messages.&quot;&quot;&quot;</span>
</span><span id="ModelBase-185"><a href="#ModelBase-185"><span class="linenos">185</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase-186"><a href="#ModelBase-186"><span class="linenos">186</span></a>
</span><span id="ModelBase-187"><a href="#ModelBase-187"><span class="linenos">187</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase-188"><a href="#ModelBase-188"><span class="linenos">188</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_astream_chat</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase-189"><a href="#ModelBase-189"><span class="linenos">189</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase-190"><a href="#ModelBase-190"><span class="linenos">190</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span>
</span><span id="ModelBase-191"><a href="#ModelBase-191"><span class="linenos">191</span></a>                <span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during async stream chat&quot;</span><span class="p">)</span>
</span><span id="ModelBase-192"><a href="#ModelBase-192"><span class="linenos">192</span></a>            <span class="p">)</span>
</span><span id="ModelBase-193"><a href="#ModelBase-193"><span class="linenos">193</span></a>            <span class="k">raise</span>
</span><span id="ModelBase-194"><a href="#ModelBase-194"><span class="linenos">194</span></a>
</span><span id="ModelBase-195"><a href="#ModelBase-195"><span class="linenos">195</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase-196"><a href="#ModelBase-196"><span class="linenos">196</span></a>
</span><span id="ModelBase-197"><a href="#ModelBase-197"><span class="linenos">197</span></a>        <span class="k">return</span> <span class="n">response</span>
</span><span id="ModelBase-198"><a href="#ModelBase-198"><span class="linenos">198</span></a>
</span><span id="ModelBase-199"><a href="#ModelBase-199"><span class="linenos">199</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chat_with_tools</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="n">tools</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tool</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="ModelBase-200"><a href="#ModelBase-200"><span class="linenos">200</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Chat with the model using the provided messages and tools.&quot;&quot;&quot;</span>
</span><span id="ModelBase-201"><a href="#ModelBase-201"><span class="linenos">201</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase-202"><a href="#ModelBase-202"><span class="linenos">202</span></a>
</span><span id="ModelBase-203"><a href="#ModelBase-203"><span class="linenos">203</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase-204"><a href="#ModelBase-204"><span class="linenos">204</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chat_with_tools</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">tools</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase-205"><a href="#ModelBase-205"><span class="linenos">205</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase-206"><a href="#ModelBase-206"><span class="linenos">206</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span>
</span><span id="ModelBase-207"><a href="#ModelBase-207"><span class="linenos">207</span></a>                <span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during chat with tools&quot;</span><span class="p">)</span>
</span><span id="ModelBase-208"><a href="#ModelBase-208"><span class="linenos">208</span></a>            <span class="p">)</span>
</span><span id="ModelBase-209"><a href="#ModelBase-209"><span class="linenos">209</span></a>            <span class="k">raise</span>
</span><span id="ModelBase-210"><a href="#ModelBase-210"><span class="linenos">210</span></a>
</span><span id="ModelBase-211"><a href="#ModelBase-211"><span class="linenos">211</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase-212"><a href="#ModelBase-212"><span class="linenos">212</span></a>        <span class="k">return</span> <span class="n">response</span>
</span><span id="ModelBase-213"><a href="#ModelBase-213"><span class="linenos">213</span></a>
</span><span id="ModelBase-214"><a href="#ModelBase-214"><span class="linenos">214</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">achat_with_tools</span><span class="p">(</span>
</span><span id="ModelBase-215"><a href="#ModelBase-215"><span class="linenos">215</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="n">tools</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tool</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="ModelBase-216"><a href="#ModelBase-216"><span class="linenos">216</span></a>    <span class="p">):</span>
</span><span id="ModelBase-217"><a href="#ModelBase-217"><span class="linenos">217</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Asynchronous chat with the model using the provided messages and tools.&quot;&quot;&quot;</span>
</span><span id="ModelBase-218"><a href="#ModelBase-218"><span class="linenos">218</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase-219"><a href="#ModelBase-219"><span class="linenos">219</span></a>
</span><span id="ModelBase-220"><a href="#ModelBase-220"><span class="linenos">220</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase-221"><a href="#ModelBase-221"><span class="linenos">221</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_achat_with_tools</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">tools</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase-222"><a href="#ModelBase-222"><span class="linenos">222</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase-223"><a href="#ModelBase-223"><span class="linenos">223</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span>
</span><span id="ModelBase-224"><a href="#ModelBase-224"><span class="linenos">224</span></a>                <span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during async chat with tools&quot;</span><span class="p">)</span>
</span><span id="ModelBase-225"><a href="#ModelBase-225"><span class="linenos">225</span></a>            <span class="p">)</span>
</span><span id="ModelBase-226"><a href="#ModelBase-226"><span class="linenos">226</span></a>            <span class="k">raise</span>
</span><span id="ModelBase-227"><a href="#ModelBase-227"><span class="linenos">227</span></a>
</span><span id="ModelBase-228"><a href="#ModelBase-228"><span class="linenos">228</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase-229"><a href="#ModelBase-229"><span class="linenos">229</span></a>
</span><span id="ModelBase-230"><a href="#ModelBase-230"><span class="linenos">230</span></a>        <span class="k">return</span> <span class="n">response</span>
</span><span id="ModelBase-231"><a href="#ModelBase-231"><span class="linenos">231</span></a>
</span><span id="ModelBase-232"><a href="#ModelBase-232"><span class="linenos">232</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="ModelBase-233"><a href="#ModelBase-233"><span class="linenos">233</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_chat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">:</span>
</span><span id="ModelBase-234"><a href="#ModelBase-234"><span class="linenos">234</span></a>        <span class="k">pass</span>
</span><span id="ModelBase-235"><a href="#ModelBase-235"><span class="linenos">235</span></a>
</span><span id="ModelBase-236"><a href="#ModelBase-236"><span class="linenos">236</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="ModelBase-237"><a href="#ModelBase-237"><span class="linenos">237</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_structured</span><span class="p">(</span>
</span><span id="ModelBase-238"><a href="#ModelBase-238"><span class="linenos">238</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="ModelBase-239"><a href="#ModelBase-239"><span class="linenos">239</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">:</span>
</span><span id="ModelBase-240"><a href="#ModelBase-240"><span class="linenos">240</span></a>        <span class="k">pass</span>
</span><span id="ModelBase-241"><a href="#ModelBase-241"><span class="linenos">241</span></a>
</span><span id="ModelBase-242"><a href="#ModelBase-242"><span class="linenos">242</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="ModelBase-243"><a href="#ModelBase-243"><span class="linenos">243</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_stream_chat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">:</span>
</span><span id="ModelBase-244"><a href="#ModelBase-244"><span class="linenos">244</span></a>        <span class="k">pass</span>
</span><span id="ModelBase-245"><a href="#ModelBase-245"><span class="linenos">245</span></a>
</span><span id="ModelBase-246"><a href="#ModelBase-246"><span class="linenos">246</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="ModelBase-247"><a href="#ModelBase-247"><span class="linenos">247</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_chat_with_tools</span><span class="p">(</span>
</span><span id="ModelBase-248"><a href="#ModelBase-248"><span class="linenos">248</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="n">tools</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tool</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="ModelBase-249"><a href="#ModelBase-249"><span class="linenos">249</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">:</span>
</span><span id="ModelBase-250"><a href="#ModelBase-250"><span class="linenos">250</span></a>        <span class="k">pass</span>
</span><span id="ModelBase-251"><a href="#ModelBase-251"><span class="linenos">251</span></a>
</span><span id="ModelBase-252"><a href="#ModelBase-252"><span class="linenos">252</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="ModelBase-253"><a href="#ModelBase-253"><span class="linenos">253</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_achat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">:</span>
</span><span id="ModelBase-254"><a href="#ModelBase-254"><span class="linenos">254</span></a>        <span class="k">pass</span>
</span><span id="ModelBase-255"><a href="#ModelBase-255"><span class="linenos">255</span></a>
</span><span id="ModelBase-256"><a href="#ModelBase-256"><span class="linenos">256</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="ModelBase-257"><a href="#ModelBase-257"><span class="linenos">257</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_astructured</span><span class="p">(</span>
</span><span id="ModelBase-258"><a href="#ModelBase-258"><span class="linenos">258</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="ModelBase-259"><a href="#ModelBase-259"><span class="linenos">259</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">:</span>
</span><span id="ModelBase-260"><a href="#ModelBase-260"><span class="linenos">260</span></a>        <span class="k">pass</span>
</span><span id="ModelBase-261"><a href="#ModelBase-261"><span class="linenos">261</span></a>
</span><span id="ModelBase-262"><a href="#ModelBase-262"><span class="linenos">262</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="ModelBase-263"><a href="#ModelBase-263"><span class="linenos">263</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_astream_chat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">:</span>
</span><span id="ModelBase-264"><a href="#ModelBase-264"><span class="linenos">264</span></a>        <span class="k">pass</span>
</span><span id="ModelBase-265"><a href="#ModelBase-265"><span class="linenos">265</span></a>
</span><span id="ModelBase-266"><a href="#ModelBase-266"><span class="linenos">266</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="ModelBase-267"><a href="#ModelBase-267"><span class="linenos">267</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_achat_with_tools</span><span class="p">(</span>
</span><span id="ModelBase-268"><a href="#ModelBase-268"><span class="linenos">268</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="n">tools</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tool</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="ModelBase-269"><a href="#ModelBase-269"><span class="linenos">269</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">:</span>
</span><span id="ModelBase-270"><a href="#ModelBase-270"><span class="linenos">270</span></a>        <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>A simple base that represents the behavior of a model that can be used for chat, structured interactions, and streaming.</p>

<p>The base class allows for the insertion of hooks that can modify the messages before they are sent to the model,
response after they are received, and map exceptions that may occur during the interaction.</p>

<p>All the hooks are optional and can be added or removed as needed.</p>
</div>


                            <div id="ModelBase.add_pre_hook" class="classattr">
                                        <input id="ModelBase.add_pre_hook-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_pre_hook</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">hook</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n"><a href="#MessageHistory">MessageHistory</a></span><span class="p">],</span> <span class="n"><a href="#MessageHistory">MessageHistory</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ModelBase.add_pre_hook-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.add_pre_hook"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.add_pre_hook-45"><a href="#ModelBase.add_pre_hook-45"><span class="linenos">45</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_pre_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hook</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">MessageHistory</span><span class="p">],</span> <span class="n">MessageHistory</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase.add_pre_hook-46"><a href="#ModelBase.add_pre_hook-46"><span class="linenos">46</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a pre-hook to modify messages before sending them to the model.&quot;&quot;&quot;</span>
</span><span id="ModelBase.add_pre_hook-47"><a href="#ModelBase.add_pre_hook-47"><span class="linenos">47</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pre_hook</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hook</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Adds a pre-hook to modify messages before sending them to the model.</p>
</div>


                            </div>
                            <div id="ModelBase.add_post_hook" class="classattr">
                                        <input id="ModelBase.add_post_hook-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_post_hook</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">hook</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n"><a href="#MessageHistory">MessageHistory</a></span><span class="p">,</span> <span class="n">railtracks</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">Response</span><span class="p">],</span> <span class="n">railtracks</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">Response</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ModelBase.add_post_hook-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.add_post_hook"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.add_post_hook-49"><a href="#ModelBase.add_post_hook-49"><span class="linenos">49</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_post_hook</span><span class="p">(</span>
</span><span id="ModelBase.add_post_hook-50"><a href="#ModelBase.add_post_hook-50"><span class="linenos">50</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">hook</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">MessageHistory</span><span class="p">,</span> <span class="n">Response</span><span class="p">],</span> <span class="n">Response</span><span class="p">]</span>
</span><span id="ModelBase.add_post_hook-51"><a href="#ModelBase.add_post_hook-51"><span class="linenos">51</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase.add_post_hook-52"><a href="#ModelBase.add_post_hook-52"><span class="linenos">52</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a post-hook to modify the response after receiving it from the model.&quot;&quot;&quot;</span>
</span><span id="ModelBase.add_post_hook-53"><a href="#ModelBase.add_post_hook-53"><span class="linenos">53</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_post_hook</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hook</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Adds a post-hook to modify the response after receiving it from the model.</p>
</div>


                            </div>
                            <div id="ModelBase.add_exception_hook" class="classattr">
                                        <input id="ModelBase.add_exception_hook-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_exception_hook</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">hook</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n"><a href="#MessageHistory">MessageHistory</a></span><span class="p">,</span> <span class="ne">Exception</span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ModelBase.add_exception_hook-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.add_exception_hook"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.add_exception_hook-55"><a href="#ModelBase.add_exception_hook-55"><span class="linenos">55</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_exception_hook</span><span class="p">(</span>
</span><span id="ModelBase.add_exception_hook-56"><a href="#ModelBase.add_exception_hook-56"><span class="linenos">56</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">hook</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">MessageHistory</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="ModelBase.add_exception_hook-57"><a href="#ModelBase.add_exception_hook-57"><span class="linenos">57</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase.add_exception_hook-58"><a href="#ModelBase.add_exception_hook-58"><span class="linenos">58</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds an exception hook to handle exceptions during model interactions.&quot;&quot;&quot;</span>
</span><span id="ModelBase.add_exception_hook-59"><a href="#ModelBase.add_exception_hook-59"><span class="linenos">59</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_exception_hook</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hook</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Adds an exception hook to handle exceptions during model interactions.</p>
</div>


                            </div>
                            <div id="ModelBase.remove_pre_hooks" class="classattr">
                                        <input id="ModelBase.remove_pre_hooks-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove_pre_hooks</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ModelBase.remove_pre_hooks-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.remove_pre_hooks"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.remove_pre_hooks-61"><a href="#ModelBase.remove_pre_hooks-61"><span class="linenos">61</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_pre_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase.remove_pre_hooks-62"><a href="#ModelBase.remove_pre_hooks-62"><span class="linenos">62</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes all of the hooks that modify messages before sending them to the model.&quot;&quot;&quot;</span>
</span><span id="ModelBase.remove_pre_hooks-63"><a href="#ModelBase.remove_pre_hooks-63"><span class="linenos">63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pre_hook</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>Removes all of the hooks that modify messages before sending them to the model.</p>
</div>


                            </div>
                            <div id="ModelBase.remove_post_hooks" class="classattr">
                                        <input id="ModelBase.remove_post_hooks-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove_post_hooks</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ModelBase.remove_post_hooks-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.remove_post_hooks"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.remove_post_hooks-65"><a href="#ModelBase.remove_post_hooks-65"><span class="linenos">65</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_post_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase.remove_post_hooks-66"><a href="#ModelBase.remove_post_hooks-66"><span class="linenos">66</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes all of the hooks that modify the response after receiving it from the model.&quot;&quot;&quot;</span>
</span><span id="ModelBase.remove_post_hooks-67"><a href="#ModelBase.remove_post_hooks-67"><span class="linenos">67</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_post_hook</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>Removes all of the hooks that modify the response after receiving it from the model.</p>
</div>


                            </div>
                            <div id="ModelBase.remove_exception_hooks" class="classattr">
                                        <input id="ModelBase.remove_exception_hooks-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove_exception_hooks</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="ModelBase.remove_exception_hooks-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.remove_exception_hooks"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.remove_exception_hooks-69"><a href="#ModelBase.remove_exception_hooks-69"><span class="linenos">69</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_exception_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelBase.remove_exception_hooks-70"><a href="#ModelBase.remove_exception_hooks-70"><span class="linenos">70</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes all of the hooks that handle exceptions during model interactions.&quot;&quot;&quot;</span>
</span><span id="ModelBase.remove_exception_hooks-71"><a href="#ModelBase.remove_exception_hooks-71"><span class="linenos">71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_exception_hook</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>Removes all of the hooks that handle exceptions during model interactions.</p>
</div>


                            </div>
                            <div id="ModelBase.model_name" class="classattr">
                                        <input id="ModelBase.model_name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-abstractmethod">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">model_name</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="ModelBase.model_name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.model_name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.model_name-73"><a href="#ModelBase.model_name-73"><span class="linenos">73</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="ModelBase.model_name-74"><a href="#ModelBase.model_name-74"><span class="linenos">74</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">model_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ModelBase.model_name-75"><a href="#ModelBase.model_name-75"><span class="linenos">75</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ModelBase.model_name-76"><a href="#ModelBase.model_name-76"><span class="linenos">76</span></a><span class="sd">        Returns the name of the model being used.</span>
</span><span id="ModelBase.model_name-77"><a href="#ModelBase.model_name-77"><span class="linenos">77</span></a>
</span><span id="ModelBase.model_name-78"><a href="#ModelBase.model_name-78"><span class="linenos">78</span></a><span class="sd">        It can be treated as unique identifier for the model when paired with the `model_type`.</span>
</span><span id="ModelBase.model_name-79"><a href="#ModelBase.model_name-79"><span class="linenos">79</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ModelBase.model_name-80"><a href="#ModelBase.model_name-80"><span class="linenos">80</span></a>        <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Returns the name of the model being used.</p>

<p>It can be treated as unique identifier for the model when paired with the <code><a href="#ModelBase.model_type">model_type</a></code>.</p>
</div>


                            </div>
                            <div id="ModelBase.model_type" class="classattr">
                                        <input id="ModelBase.model_type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>
        <div class="decorator decorator-abstractmethod">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">model_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="ModelBase.model_type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.model_type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.model_type-82"><a href="#ModelBase.model_type-82"><span class="linenos">82</span></a>    <span class="nd">@classmethod</span>
</span><span id="ModelBase.model_type-83"><a href="#ModelBase.model_type-83"><span class="linenos">83</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="ModelBase.model_type-84"><a href="#ModelBase.model_type-84"><span class="linenos">84</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">model_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="ModelBase.model_type-85"><a href="#ModelBase.model_type-85"><span class="linenos">85</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The name of the provider of this model or the model type.&quot;&quot;&quot;</span>
</span><span id="ModelBase.model_type-86"><a href="#ModelBase.model_type-86"><span class="linenos">86</span></a>        <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>The name of the provider of this model or the model type.</p>
</div>


                            </div>
                            <div id="ModelBase.chat" class="classattr">
                                        <input id="ModelBase.chat-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">chat</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">messages</span><span class="p">:</span> <span class="n"><a href="#MessageHistory">MessageHistory</a></span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelBase.chat-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.chat"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.chat-109"><a href="#ModelBase.chat-109"><span class="linenos">109</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="ModelBase.chat-110"><a href="#ModelBase.chat-110"><span class="linenos">110</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Chat with the model using the provided messages.&quot;&quot;&quot;</span>
</span><span id="ModelBase.chat-111"><a href="#ModelBase.chat-111"><span class="linenos">111</span></a>
</span><span id="ModelBase.chat-112"><a href="#ModelBase.chat-112"><span class="linenos">112</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase.chat-113"><a href="#ModelBase.chat-113"><span class="linenos">113</span></a>
</span><span id="ModelBase.chat-114"><a href="#ModelBase.chat-114"><span class="linenos">114</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase.chat-115"><a href="#ModelBase.chat-115"><span class="linenos">115</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chat</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase.chat-116"><a href="#ModelBase.chat-116"><span class="linenos">116</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase.chat-117"><a href="#ModelBase.chat-117"><span class="linenos">117</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during chat&quot;</span><span class="p">))</span>
</span><span id="ModelBase.chat-118"><a href="#ModelBase.chat-118"><span class="linenos">118</span></a>            <span class="k">raise</span>
</span><span id="ModelBase.chat-119"><a href="#ModelBase.chat-119"><span class="linenos">119</span></a>
</span><span id="ModelBase.chat-120"><a href="#ModelBase.chat-120"><span class="linenos">120</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase.chat-121"><a href="#ModelBase.chat-121"><span class="linenos">121</span></a>        <span class="k">return</span> <span class="n">response</span>
</span></pre></div>


            <div class="docstring"><p>Chat with the model using the provided messages.</p>
</div>


                            </div>
                            <div id="ModelBase.achat" class="classattr">
                                        <input id="ModelBase.achat-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">achat</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">messages</span><span class="p">:</span> <span class="n"><a href="#MessageHistory">MessageHistory</a></span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelBase.achat-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.achat"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.achat-123"><a href="#ModelBase.achat-123"><span class="linenos">123</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">achat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="ModelBase.achat-124"><a href="#ModelBase.achat-124"><span class="linenos">124</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Asynchronous chat with the model using the provided messages.&quot;&quot;&quot;</span>
</span><span id="ModelBase.achat-125"><a href="#ModelBase.achat-125"><span class="linenos">125</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase.achat-126"><a href="#ModelBase.achat-126"><span class="linenos">126</span></a>
</span><span id="ModelBase.achat-127"><a href="#ModelBase.achat-127"><span class="linenos">127</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase.achat-128"><a href="#ModelBase.achat-128"><span class="linenos">128</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_achat</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase.achat-129"><a href="#ModelBase.achat-129"><span class="linenos">129</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase.achat-130"><a href="#ModelBase.achat-130"><span class="linenos">130</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during async chat&quot;</span><span class="p">))</span>
</span><span id="ModelBase.achat-131"><a href="#ModelBase.achat-131"><span class="linenos">131</span></a>            <span class="k">raise</span>
</span><span id="ModelBase.achat-132"><a href="#ModelBase.achat-132"><span class="linenos">132</span></a>
</span><span id="ModelBase.achat-133"><a href="#ModelBase.achat-133"><span class="linenos">133</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase.achat-134"><a href="#ModelBase.achat-134"><span class="linenos">134</span></a>
</span><span id="ModelBase.achat-135"><a href="#ModelBase.achat-135"><span class="linenos">135</span></a>        <span class="k">return</span> <span class="n">response</span>
</span></pre></div>


            <div class="docstring"><p>Asynchronous chat with the model using the provided messages.</p>
</div>


                            </div>
                            <div id="ModelBase.structured" class="classattr">
                                        <input id="ModelBase.structured-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">structured</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">messages</span><span class="p">:</span> <span class="n"><a href="#MessageHistory">MessageHistory</a></span>,</span><span class="param">	<span class="n">schema</span><span class="p">:</span> <span class="n">pydantic</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">BaseModel</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelBase.structured-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.structured"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.structured-137"><a href="#ModelBase.structured-137"><span class="linenos">137</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">structured</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="ModelBase.structured-138"><a href="#ModelBase.structured-138"><span class="linenos">138</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Structured interaction with the model using the provided messages and output_schema.&quot;&quot;&quot;</span>
</span><span id="ModelBase.structured-139"><a href="#ModelBase.structured-139"><span class="linenos">139</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase.structured-140"><a href="#ModelBase.structured-140"><span class="linenos">140</span></a>
</span><span id="ModelBase.structured-141"><a href="#ModelBase.structured-141"><span class="linenos">141</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase.structured-142"><a href="#ModelBase.structured-142"><span class="linenos">142</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_structured</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase.structured-143"><a href="#ModelBase.structured-143"><span class="linenos">143</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase.structured-144"><a href="#ModelBase.structured-144"><span class="linenos">144</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span>
</span><span id="ModelBase.structured-145"><a href="#ModelBase.structured-145"><span class="linenos">145</span></a>                <span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during structured interaction&quot;</span><span class="p">)</span>
</span><span id="ModelBase.structured-146"><a href="#ModelBase.structured-146"><span class="linenos">146</span></a>            <span class="p">)</span>
</span><span id="ModelBase.structured-147"><a href="#ModelBase.structured-147"><span class="linenos">147</span></a>            <span class="k">raise</span>
</span><span id="ModelBase.structured-148"><a href="#ModelBase.structured-148"><span class="linenos">148</span></a>
</span><span id="ModelBase.structured-149"><a href="#ModelBase.structured-149"><span class="linenos">149</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase.structured-150"><a href="#ModelBase.structured-150"><span class="linenos">150</span></a>
</span><span id="ModelBase.structured-151"><a href="#ModelBase.structured-151"><span class="linenos">151</span></a>        <span class="k">return</span> <span class="n">response</span>
</span></pre></div>


            <div class="docstring"><p>Structured interaction with the model using the provided messages and output_schema.</p>
</div>


                            </div>
                            <div id="ModelBase.astructured" class="classattr">
                                        <input id="ModelBase.astructured-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">astructured</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">messages</span><span class="p">:</span> <span class="n"><a href="#MessageHistory">MessageHistory</a></span>,</span><span class="param">	<span class="n">schema</span><span class="p">:</span> <span class="n">pydantic</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">BaseModel</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelBase.astructured-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.astructured"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.astructured-153"><a href="#ModelBase.astructured-153"><span class="linenos">153</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">astructured</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="ModelBase.astructured-154"><a href="#ModelBase.astructured-154"><span class="linenos">154</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Asynchronous structured interaction with the model using the provided messages and output_schema.&quot;&quot;&quot;</span>
</span><span id="ModelBase.astructured-155"><a href="#ModelBase.astructured-155"><span class="linenos">155</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase.astructured-156"><a href="#ModelBase.astructured-156"><span class="linenos">156</span></a>
</span><span id="ModelBase.astructured-157"><a href="#ModelBase.astructured-157"><span class="linenos">157</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase.astructured-158"><a href="#ModelBase.astructured-158"><span class="linenos">158</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_astructured</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase.astructured-159"><a href="#ModelBase.astructured-159"><span class="linenos">159</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase.astructured-160"><a href="#ModelBase.astructured-160"><span class="linenos">160</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span>
</span><span id="ModelBase.astructured-161"><a href="#ModelBase.astructured-161"><span class="linenos">161</span></a>                <span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during async structured interaction&quot;</span><span class="p">)</span>
</span><span id="ModelBase.astructured-162"><a href="#ModelBase.astructured-162"><span class="linenos">162</span></a>            <span class="p">)</span>
</span><span id="ModelBase.astructured-163"><a href="#ModelBase.astructured-163"><span class="linenos">163</span></a>            <span class="k">raise</span>
</span><span id="ModelBase.astructured-164"><a href="#ModelBase.astructured-164"><span class="linenos">164</span></a>
</span><span id="ModelBase.astructured-165"><a href="#ModelBase.astructured-165"><span class="linenos">165</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase.astructured-166"><a href="#ModelBase.astructured-166"><span class="linenos">166</span></a>
</span><span id="ModelBase.astructured-167"><a href="#ModelBase.astructured-167"><span class="linenos">167</span></a>        <span class="k">return</span> <span class="n">response</span>
</span></pre></div>


            <div class="docstring"><p>Asynchronous structured interaction with the model using the provided messages and output_schema.</p>
</div>


                            </div>
                            <div id="ModelBase.stream_chat" class="classattr">
                                        <input id="ModelBase.stream_chat-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">stream_chat</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">messages</span><span class="p">:</span> <span class="n"><a href="#MessageHistory">MessageHistory</a></span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelBase.stream_chat-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.stream_chat"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.stream_chat-169"><a href="#ModelBase.stream_chat-169"><span class="linenos">169</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">stream_chat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="ModelBase.stream_chat-170"><a href="#ModelBase.stream_chat-170"><span class="linenos">170</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stream chat with the model using the provided messages.&quot;&quot;&quot;</span>
</span><span id="ModelBase.stream_chat-171"><a href="#ModelBase.stream_chat-171"><span class="linenos">171</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase.stream_chat-172"><a href="#ModelBase.stream_chat-172"><span class="linenos">172</span></a>
</span><span id="ModelBase.stream_chat-173"><a href="#ModelBase.stream_chat-173"><span class="linenos">173</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase.stream_chat-174"><a href="#ModelBase.stream_chat-174"><span class="linenos">174</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stream_chat</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase.stream_chat-175"><a href="#ModelBase.stream_chat-175"><span class="linenos">175</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase.stream_chat-176"><a href="#ModelBase.stream_chat-176"><span class="linenos">176</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during stream chat&quot;</span><span class="p">))</span>
</span><span id="ModelBase.stream_chat-177"><a href="#ModelBase.stream_chat-177"><span class="linenos">177</span></a>            <span class="k">raise</span>
</span><span id="ModelBase.stream_chat-178"><a href="#ModelBase.stream_chat-178"><span class="linenos">178</span></a>
</span><span id="ModelBase.stream_chat-179"><a href="#ModelBase.stream_chat-179"><span class="linenos">179</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase.stream_chat-180"><a href="#ModelBase.stream_chat-180"><span class="linenos">180</span></a>
</span><span id="ModelBase.stream_chat-181"><a href="#ModelBase.stream_chat-181"><span class="linenos">181</span></a>        <span class="k">return</span> <span class="n">response</span>
</span></pre></div>


            <div class="docstring"><p>Stream chat with the model using the provided messages.</p>
</div>


                            </div>
                            <div id="ModelBase.astream_chat" class="classattr">
                                        <input id="ModelBase.astream_chat-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">astream_chat</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">messages</span><span class="p">:</span> <span class="n"><a href="#MessageHistory">MessageHistory</a></span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelBase.astream_chat-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.astream_chat"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.astream_chat-183"><a href="#ModelBase.astream_chat-183"><span class="linenos">183</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">astream_chat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="ModelBase.astream_chat-184"><a href="#ModelBase.astream_chat-184"><span class="linenos">184</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Asynchronous stream chat with the model using the provided messages.&quot;&quot;&quot;</span>
</span><span id="ModelBase.astream_chat-185"><a href="#ModelBase.astream_chat-185"><span class="linenos">185</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase.astream_chat-186"><a href="#ModelBase.astream_chat-186"><span class="linenos">186</span></a>
</span><span id="ModelBase.astream_chat-187"><a href="#ModelBase.astream_chat-187"><span class="linenos">187</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase.astream_chat-188"><a href="#ModelBase.astream_chat-188"><span class="linenos">188</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_astream_chat</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase.astream_chat-189"><a href="#ModelBase.astream_chat-189"><span class="linenos">189</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase.astream_chat-190"><a href="#ModelBase.astream_chat-190"><span class="linenos">190</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span>
</span><span id="ModelBase.astream_chat-191"><a href="#ModelBase.astream_chat-191"><span class="linenos">191</span></a>                <span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during async stream chat&quot;</span><span class="p">)</span>
</span><span id="ModelBase.astream_chat-192"><a href="#ModelBase.astream_chat-192"><span class="linenos">192</span></a>            <span class="p">)</span>
</span><span id="ModelBase.astream_chat-193"><a href="#ModelBase.astream_chat-193"><span class="linenos">193</span></a>            <span class="k">raise</span>
</span><span id="ModelBase.astream_chat-194"><a href="#ModelBase.astream_chat-194"><span class="linenos">194</span></a>
</span><span id="ModelBase.astream_chat-195"><a href="#ModelBase.astream_chat-195"><span class="linenos">195</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase.astream_chat-196"><a href="#ModelBase.astream_chat-196"><span class="linenos">196</span></a>
</span><span id="ModelBase.astream_chat-197"><a href="#ModelBase.astream_chat-197"><span class="linenos">197</span></a>        <span class="k">return</span> <span class="n">response</span>
</span></pre></div>


            <div class="docstring"><p>Asynchronous stream chat with the model using the provided messages.</p>
</div>


                            </div>
                            <div id="ModelBase.chat_with_tools" class="classattr">
                                        <input id="ModelBase.chat_with_tools-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">chat_with_tools</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">messages</span><span class="p">:</span> <span class="n"><a href="#MessageHistory">MessageHistory</a></span>,</span><span class="param">	<span class="n">tools</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n"><a href="#Tool">Tool</a></span><span class="p">]</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelBase.chat_with_tools-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.chat_with_tools"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.chat_with_tools-199"><a href="#ModelBase.chat_with_tools-199"><span class="linenos">199</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chat_with_tools</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="n">tools</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tool</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="ModelBase.chat_with_tools-200"><a href="#ModelBase.chat_with_tools-200"><span class="linenos">200</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Chat with the model using the provided messages and tools.&quot;&quot;&quot;</span>
</span><span id="ModelBase.chat_with_tools-201"><a href="#ModelBase.chat_with_tools-201"><span class="linenos">201</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase.chat_with_tools-202"><a href="#ModelBase.chat_with_tools-202"><span class="linenos">202</span></a>
</span><span id="ModelBase.chat_with_tools-203"><a href="#ModelBase.chat_with_tools-203"><span class="linenos">203</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase.chat_with_tools-204"><a href="#ModelBase.chat_with_tools-204"><span class="linenos">204</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chat_with_tools</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">tools</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase.chat_with_tools-205"><a href="#ModelBase.chat_with_tools-205"><span class="linenos">205</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase.chat_with_tools-206"><a href="#ModelBase.chat_with_tools-206"><span class="linenos">206</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span>
</span><span id="ModelBase.chat_with_tools-207"><a href="#ModelBase.chat_with_tools-207"><span class="linenos">207</span></a>                <span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during chat with tools&quot;</span><span class="p">)</span>
</span><span id="ModelBase.chat_with_tools-208"><a href="#ModelBase.chat_with_tools-208"><span class="linenos">208</span></a>            <span class="p">)</span>
</span><span id="ModelBase.chat_with_tools-209"><a href="#ModelBase.chat_with_tools-209"><span class="linenos">209</span></a>            <span class="k">raise</span>
</span><span id="ModelBase.chat_with_tools-210"><a href="#ModelBase.chat_with_tools-210"><span class="linenos">210</span></a>
</span><span id="ModelBase.chat_with_tools-211"><a href="#ModelBase.chat_with_tools-211"><span class="linenos">211</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase.chat_with_tools-212"><a href="#ModelBase.chat_with_tools-212"><span class="linenos">212</span></a>        <span class="k">return</span> <span class="n">response</span>
</span></pre></div>


            <div class="docstring"><p>Chat with the model using the provided messages and tools.</p>
</div>


                            </div>
                            <div id="ModelBase.achat_with_tools" class="classattr">
                                        <input id="ModelBase.achat_with_tools-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">achat_with_tools</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">messages</span><span class="p">:</span> <span class="n"><a href="#MessageHistory">MessageHistory</a></span>,</span><span class="param">	<span class="n">tools</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n"><a href="#Tool">Tool</a></span><span class="p">]</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelBase.achat_with_tools-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelBase.achat_with_tools"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelBase.achat_with_tools-214"><a href="#ModelBase.achat_with_tools-214"><span class="linenos">214</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">achat_with_tools</span><span class="p">(</span>
</span><span id="ModelBase.achat_with_tools-215"><a href="#ModelBase.achat_with_tools-215"><span class="linenos">215</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">:</span> <span class="n">MessageHistory</span><span class="p">,</span> <span class="n">tools</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tool</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="ModelBase.achat_with_tools-216"><a href="#ModelBase.achat_with_tools-216"><span class="linenos">216</span></a>    <span class="p">):</span>
</span><span id="ModelBase.achat_with_tools-217"><a href="#ModelBase.achat_with_tools-217"><span class="linenos">217</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Asynchronous chat with the model using the provided messages and tools.&quot;&quot;&quot;</span>
</span><span id="ModelBase.achat_with_tools-218"><a href="#ModelBase.achat_with_tools-218"><span class="linenos">218</span></a>        <span class="n">messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_pre_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
</span><span id="ModelBase.achat_with_tools-219"><a href="#ModelBase.achat_with_tools-219"><span class="linenos">219</span></a>
</span><span id="ModelBase.achat_with_tools-220"><a href="#ModelBase.achat_with_tools-220"><span class="linenos">220</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ModelBase.achat_with_tools-221"><a href="#ModelBase.achat_with_tools-221"><span class="linenos">221</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_achat_with_tools</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">tools</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="ModelBase.achat_with_tools-222"><a href="#ModelBase.achat_with_tools-222"><span class="linenos">222</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ModelBase.achat_with_tools-223"><a href="#ModelBase.achat_with_tools-223"><span class="linenos">223</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_exception_hooks</span><span class="p">(</span>
</span><span id="ModelBase.achat_with_tools-224"><a href="#ModelBase.achat_with_tools-224"><span class="linenos">224</span></a>                <span class="n">messages</span><span class="p">,</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error during async chat with tools&quot;</span><span class="p">)</span>
</span><span id="ModelBase.achat_with_tools-225"><a href="#ModelBase.achat_with_tools-225"><span class="linenos">225</span></a>            <span class="p">)</span>
</span><span id="ModelBase.achat_with_tools-226"><a href="#ModelBase.achat_with_tools-226"><span class="linenos">226</span></a>            <span class="k">raise</span>
</span><span id="ModelBase.achat_with_tools-227"><a href="#ModelBase.achat_with_tools-227"><span class="linenos">227</span></a>
</span><span id="ModelBase.achat_with_tools-228"><a href="#ModelBase.achat_with_tools-228"><span class="linenos">228</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_post_hooks</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span><span id="ModelBase.achat_with_tools-229"><a href="#ModelBase.achat_with_tools-229"><span class="linenos">229</span></a>
</span><span id="ModelBase.achat_with_tools-230"><a href="#ModelBase.achat_with_tools-230"><span class="linenos">230</span></a>        <span class="k">return</span> <span class="n">response</span>
</span></pre></div>


            <div class="docstring"><p>Asynchronous chat with the model using the provided messages and tools.</p>
</div>


                            </div>
                </section>
                <section id="ToolCall">
                            <input id="ToolCall-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ToolCall</span><wbr>(<span class="base">pydantic.main.BaseModel</span>):

                <label class="view-source-button" for="ToolCall-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ToolCall"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ToolCall-12"><a href="#ToolCall-12"><span class="linenos">12</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ToolCall</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="ToolCall-13"><a href="#ToolCall-13"><span class="linenos">13</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToolCall-14"><a href="#ToolCall-14"><span class="linenos">14</span></a><span class="sd">    A simple model object that represents a tool call.</span>
</span><span id="ToolCall-15"><a href="#ToolCall-15"><span class="linenos">15</span></a>
</span><span id="ToolCall-16"><a href="#ToolCall-16"><span class="linenos">16</span></a><span class="sd">    This simple model represents a moment when a tool is called.</span>
</span><span id="ToolCall-17"><a href="#ToolCall-17"><span class="linenos">17</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ToolCall-18"><a href="#ToolCall-18"><span class="linenos">18</span></a>
</span><span id="ToolCall-19"><a href="#ToolCall-19"><span class="linenos">19</span></a>    <span class="n">identifier</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The identifier attatched to this tool call.&quot;</span><span class="p">)</span>
</span><span id="ToolCall-20"><a href="#ToolCall-20"><span class="linenos">20</span></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the tool being called.&quot;</span><span class="p">)</span>
</span><span id="ToolCall-21"><a href="#ToolCall-21"><span class="linenos">21</span></a>    <span class="n">arguments</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
</span><span id="ToolCall-22"><a href="#ToolCall-22"><span class="linenos">22</span></a>        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The arguments provided as input to the tool.&quot;</span>
</span><span id="ToolCall-23"><a href="#ToolCall-23"><span class="linenos">23</span></a>    <span class="p">)</span>
</span><span id="ToolCall-24"><a href="#ToolCall-24"><span class="linenos">24</span></a>
</span><span id="ToolCall-25"><a href="#ToolCall-25"><span class="linenos">25</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ToolCall-26"><a href="#ToolCall-26"><span class="linenos">26</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">arguments</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A simple model object that represents a tool call.</p>

<p>This simple model represents a moment when a tool is called.</p>
</div>


                            <div id="ToolCall.identifier" class="classattr">
                                <div class="attr variable">
            <span class="name">identifier</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#ToolCall.identifier"></a>
    
    

                            </div>
                            <div id="ToolCall.name" class="classattr">
                                <div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#ToolCall.name"></a>
    
    

                            </div>
                            <div id="ToolCall.arguments" class="classattr">
                                <div class="attr variable">
            <span class="name">arguments</span><span class="annotation">: Dict[str, Any]</span>

        
    </div>
    <a class="headerlink" href="#ToolCall.arguments"></a>
    
    

                            </div>
                            <div id="ToolCall.model_config" class="classattr">
                                <div class="attr variable">
            <span class="name">model_config</span><span class="annotation">: ClassVar[pydantic.config.ConfigDict]</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#ToolCall.model_config"></a>
    
            <div class="docstring"><p>Configuration for the model, should be a dictionary conforming to [<code>ConfigDict</code>][pydantic.config.ConfigDict].</p>
</div>


                            </div>
                </section>
                <section id="ToolResponse">
                            <input id="ToolResponse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ToolResponse</span><wbr>(<span class="base">pydantic.main.BaseModel</span>):

                <label class="view-source-button" for="ToolResponse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ToolResponse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ToolResponse-29"><a href="#ToolResponse-29"><span class="linenos">29</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ToolResponse</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="ToolResponse-30"><a href="#ToolResponse-30"><span class="linenos">30</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToolResponse-31"><a href="#ToolResponse-31"><span class="linenos">31</span></a><span class="sd">    A simple model object that represents a tool response.</span>
</span><span id="ToolResponse-32"><a href="#ToolResponse-32"><span class="linenos">32</span></a>
</span><span id="ToolResponse-33"><a href="#ToolResponse-33"><span class="linenos">33</span></a><span class="sd">    This simple model should be used when adding a response to a tool.</span>
</span><span id="ToolResponse-34"><a href="#ToolResponse-34"><span class="linenos">34</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ToolResponse-35"><a href="#ToolResponse-35"><span class="linenos">35</span></a>
</span><span id="ToolResponse-36"><a href="#ToolResponse-36"><span class="linenos">36</span></a>    <span class="n">identifier</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
</span><span id="ToolResponse-37"><a href="#ToolResponse-37"><span class="linenos">37</span></a>        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The identifier attached to this tool response. This should match the identifier of the tool call.&quot;</span>
</span><span id="ToolResponse-38"><a href="#ToolResponse-38"><span class="linenos">38</span></a>    <span class="p">)</span>
</span><span id="ToolResponse-39"><a href="#ToolResponse-39"><span class="linenos">39</span></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The name of the tool that generated this response.&quot;</span><span class="p">)</span>
</span><span id="ToolResponse-40"><a href="#ToolResponse-40"><span class="linenos">40</span></a>    <span class="n">result</span><span class="p">:</span> <span class="n">AnyStr</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The result of the tool call.&quot;</span><span class="p">)</span>
</span><span id="ToolResponse-41"><a href="#ToolResponse-41"><span class="linenos">41</span></a>
</span><span id="ToolResponse-42"><a href="#ToolResponse-42"><span class="linenos">42</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ToolResponse-43"><a href="#ToolResponse-43"><span class="linenos">43</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A simple model object that represents a tool response.</p>

<p>This simple model should be used when adding a response to a tool.</p>
</div>


                            <div id="ToolResponse.identifier" class="classattr">
                                <div class="attr variable">
            <span class="name">identifier</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#ToolResponse.identifier"></a>
    
    

                            </div>
                            <div id="ToolResponse.name" class="classattr">
                                <div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#ToolResponse.name"></a>
    
    

                            </div>
                            <div id="ToolResponse.result" class="classattr">
                                <div class="attr variable">
            <span class="name">result</span><span class="annotation">: ~AnyStr</span>

        
    </div>
    <a class="headerlink" href="#ToolResponse.result"></a>
    
    

                            </div>
                            <div id="ToolResponse.model_config" class="classattr">
                                <div class="attr variable">
            <span class="name">model_config</span><span class="annotation">: ClassVar[pydantic.config.ConfigDict]</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#ToolResponse.model_config"></a>
    
            <div class="docstring"><p>Configuration for the model, should be a dictionary conforming to [<code>ConfigDict</code>][pydantic.config.ConfigDict].</p>
</div>


                            </div>
                </section>
                <section id="UserMessage">
                            <input id="UserMessage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">UserMessage</span><wbr>(<span class="base"><a href="#Message">railtracks.llm.Message[str]</a></span>):

                <label class="view-source-button" for="UserMessage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UserMessage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UserMessage-102"><a href="#UserMessage-102"><span class="linenos">102</span></a><span class="k">class</span><span class="w"> </span><span class="nc">UserMessage</span><span class="p">(</span><span class="n">_StringOnlyContent</span><span class="p">):</span>
</span><span id="UserMessage-103"><a href="#UserMessage-103"><span class="linenos">103</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="UserMessage-104"><a href="#UserMessage-104"><span class="linenos">104</span></a><span class="sd">    Note that we only support string input</span>
</span><span id="UserMessage-105"><a href="#UserMessage-105"><span class="linenos">105</span></a>
</span><span id="UserMessage-106"><a href="#UserMessage-106"><span class="linenos">106</span></a><span class="sd">    Args:</span>
</span><span id="UserMessage-107"><a href="#UserMessage-107"><span class="linenos">107</span></a><span class="sd">        content (str): The content of the user message.</span>
</span><span id="UserMessage-108"><a href="#UserMessage-108"><span class="linenos">108</span></a><span class="sd">        inject_prompt (bool, optional): Whether to inject prompt with context variables. Defaults to True.</span>
</span><span id="UserMessage-109"><a href="#UserMessage-109"><span class="linenos">109</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="UserMessage-110"><a href="#UserMessage-110"><span class="linenos">110</span></a>
</span><span id="UserMessage-111"><a href="#UserMessage-111"><span class="linenos">111</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">inject_prompt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="UserMessage-112"><a href="#UserMessage-112"><span class="linenos">112</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">inject_prompt</span><span class="o">=</span><span class="n">inject_prompt</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Note that we only support string input</p>

<p>Args:
    content (str): The content of the user message.
    inject_prompt (bool, optional): Whether to inject prompt with context variables. Defaults to True.</p>
</div>


                            <div id="UserMessage.__init__" class="classattr">
                                        <input id="UserMessage.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">UserMessage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">content</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">inject_prompt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span>)</span>

                <label class="view-source-button" for="UserMessage.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UserMessage.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UserMessage.__init__-111"><a href="#UserMessage.__init__-111"><span class="linenos">111</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">inject_prompt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="UserMessage.__init__-112"><a href="#UserMessage.__init__-112"><span class="linenos">112</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">inject_prompt</span><span class="o">=</span><span class="n">inject_prompt</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A simple class that represents a message that an LLM can read.</p>

<p>Args:
    content: The content of the message. It can take on any of the following types:
        - str: A simple string message.
        - List[ToolCall]: A list of tool calls.
        - ToolResponse: A tool response.
        - BaseModel: A custom base model object.
    role: The role of the message (assistant, user, system, tool, etc.).
    inject_prompt (bool, optional): Whether to inject prompt with context variables. Defaults to True.</p>
</div>


                            </div>
                </section>
                <section id="SystemMessage">
                            <input id="SystemMessage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SystemMessage</span><wbr>(<span class="base"><a href="#Message">railtracks.llm.Message[str]</a></span>):

                <label class="view-source-button" for="SystemMessage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SystemMessage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SystemMessage-115"><a href="#SystemMessage-115"><span class="linenos">115</span></a><span class="k">class</span><span class="w"> </span><span class="nc">SystemMessage</span><span class="p">(</span><span class="n">_StringOnlyContent</span><span class="p">):</span>
</span><span id="SystemMessage-116"><a href="#SystemMessage-116"><span class="linenos">116</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SystemMessage-117"><a href="#SystemMessage-117"><span class="linenos">117</span></a><span class="sd">    A simple class that represents a system message.</span>
</span><span id="SystemMessage-118"><a href="#SystemMessage-118"><span class="linenos">118</span></a>
</span><span id="SystemMessage-119"><a href="#SystemMessage-119"><span class="linenos">119</span></a><span class="sd">    Args:</span>
</span><span id="SystemMessage-120"><a href="#SystemMessage-120"><span class="linenos">120</span></a><span class="sd">        content (str): The content of the system message.</span>
</span><span id="SystemMessage-121"><a href="#SystemMessage-121"><span class="linenos">121</span></a><span class="sd">        inject_prompt (bool, optional): Whether to inject prompt with context  variables. Defaults to True.</span>
</span><span id="SystemMessage-122"><a href="#SystemMessage-122"><span class="linenos">122</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="SystemMessage-123"><a href="#SystemMessage-123"><span class="linenos">123</span></a>
</span><span id="SystemMessage-124"><a href="#SystemMessage-124"><span class="linenos">124</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">inject_prompt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="SystemMessage-125"><a href="#SystemMessage-125"><span class="linenos">125</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="n">inject_prompt</span><span class="o">=</span><span class="n">inject_prompt</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A simple class that represents a system message.</p>

<p>Args:
    content (str): The content of the system message.
    inject_prompt (bool, optional): Whether to inject prompt with context  variables. Defaults to True.</p>
</div>


                            <div id="SystemMessage.__init__" class="classattr">
                                        <input id="SystemMessage.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">SystemMessage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">content</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">inject_prompt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span>)</span>

                <label class="view-source-button" for="SystemMessage.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SystemMessage.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SystemMessage.__init__-124"><a href="#SystemMessage.__init__-124"><span class="linenos">124</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">inject_prompt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="SystemMessage.__init__-125"><a href="#SystemMessage.__init__-125"><span class="linenos">125</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="n">inject_prompt</span><span class="o">=</span><span class="n">inject_prompt</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A simple class that represents a message that an LLM can read.</p>

<p>Args:
    content: The content of the message. It can take on any of the following types:
        - str: A simple string message.
        - List[ToolCall]: A list of tool calls.
        - ToolResponse: A tool response.
        - BaseModel: A custom base model object.
    role: The role of the message (assistant, user, system, tool, etc.).
    inject_prompt (bool, optional): Whether to inject prompt with context variables. Defaults to True.</p>
</div>


                            </div>
                </section>
                <section id="AssistantMessage">
                            <input id="AssistantMessage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AssistantMessage</span><wbr>(<span class="base"><a href="#Message">railtracks.llm.Message[~_T]</a></span>, <span class="base">typing.Generic[~_T]</span>):

                <label class="view-source-button" for="AssistantMessage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AssistantMessage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AssistantMessage-128"><a href="#AssistantMessage-128"><span class="linenos">128</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AssistantMessage</span><span class="p">(</span><span class="n">Message</span><span class="p">[</span><span class="n">_T</span><span class="p">],</span> <span class="n">Generic</span><span class="p">[</span><span class="n">_T</span><span class="p">]):</span>
</span><span id="AssistantMessage-129"><a href="#AssistantMessage-129"><span class="linenos">129</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AssistantMessage-130"><a href="#AssistantMessage-130"><span class="linenos">130</span></a><span class="sd">    A simple class that represents a message from the assistant.</span>
</span><span id="AssistantMessage-131"><a href="#AssistantMessage-131"><span class="linenos">131</span></a>
</span><span id="AssistantMessage-132"><a href="#AssistantMessage-132"><span class="linenos">132</span></a><span class="sd">    Args:</span>
</span><span id="AssistantMessage-133"><a href="#AssistantMessage-133"><span class="linenos">133</span></a><span class="sd">        content (_T): The content of the assistant message.</span>
</span><span id="AssistantMessage-134"><a href="#AssistantMessage-134"><span class="linenos">134</span></a><span class="sd">        inject_prompt (bool, optional): Whether to inject prompt with context  variables. Defaults to True.</span>
</span><span id="AssistantMessage-135"><a href="#AssistantMessage-135"><span class="linenos">135</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AssistantMessage-136"><a href="#AssistantMessage-136"><span class="linenos">136</span></a>
</span><span id="AssistantMessage-137"><a href="#AssistantMessage-137"><span class="linenos">137</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="n">_T</span><span class="p">,</span> <span class="n">inject_prompt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="AssistantMessage-138"><a href="#AssistantMessage-138"><span class="linenos">138</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;assistant&quot;</span><span class="p">,</span> <span class="n">inject_prompt</span><span class="o">=</span><span class="n">inject_prompt</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A simple class that represents a message from the assistant.</p>

<p>Args:
    content (_T): The content of the assistant message.
    inject_prompt (bool, optional): Whether to inject prompt with context  variables. Defaults to True.</p>
</div>


                            <div id="AssistantMessage.__init__" class="classattr">
                                        <input id="AssistantMessage.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AssistantMessage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">content</span><span class="p">:</span> <span class="o">~</span><span class="n">_T</span>, </span><span class="param"><span class="n">inject_prompt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span>)</span>

                <label class="view-source-button" for="AssistantMessage.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AssistantMessage.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AssistantMessage.__init__-137"><a href="#AssistantMessage.__init__-137"><span class="linenos">137</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="n">_T</span><span class="p">,</span> <span class="n">inject_prompt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="AssistantMessage.__init__-138"><a href="#AssistantMessage.__init__-138"><span class="linenos">138</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;assistant&quot;</span><span class="p">,</span> <span class="n">inject_prompt</span><span class="o">=</span><span class="n">inject_prompt</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A simple class that represents a message that an LLM can read.</p>

<p>Args:
    content: The content of the message. It can take on any of the following types:
        - str: A simple string message.
        - List[ToolCall]: A list of tool calls.
        - ToolResponse: A tool response.
        - BaseModel: A custom base model object.
    role: The role of the message (assistant, user, system, tool, etc.).
    inject_prompt (bool, optional): Whether to inject prompt with context variables. Defaults to True.</p>
</div>


                            </div>
                </section>
                <section id="Message">
                            <input id="Message-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Message</span><wbr>(<span class="base">typing.Generic[~_T]</span>):

                <label class="view-source-button" for="Message-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Message"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Message-23"><a href="#Message-23"><span class="linenos">23</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Message</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">_T</span><span class="p">]):</span>
</span><span id="Message-24"><a href="#Message-24"><span class="linenos">24</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Message-25"><a href="#Message-25"><span class="linenos">25</span></a><span class="sd">    A base class that represents a message that an LLM can read.</span>
</span><span id="Message-26"><a href="#Message-26"><span class="linenos">26</span></a>
</span><span id="Message-27"><a href="#Message-27"><span class="linenos">27</span></a><span class="sd">    Note the content may take on a variety of allowable types.</span>
</span><span id="Message-28"><a href="#Message-28"><span class="linenos">28</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Message-29"><a href="#Message-29"><span class="linenos">29</span></a>
</span><span id="Message-30"><a href="#Message-30"><span class="linenos">30</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Message-31"><a href="#Message-31"><span class="linenos">31</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Message-32"><a href="#Message-32"><span class="linenos">32</span></a>        <span class="n">content</span><span class="p">:</span> <span class="n">_T</span><span class="p">,</span>
</span><span id="Message-33"><a href="#Message-33"><span class="linenos">33</span></a>        <span class="n">role</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;assistant&quot;</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;tool&quot;</span><span class="p">],</span>
</span><span id="Message-34"><a href="#Message-34"><span class="linenos">34</span></a>        <span class="n">inject_prompt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="Message-35"><a href="#Message-35"><span class="linenos">35</span></a>    <span class="p">):</span>
</span><span id="Message-36"><a href="#Message-36"><span class="linenos">36</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Message-37"><a href="#Message-37"><span class="linenos">37</span></a><span class="sd">        A simple class that represents a message that an LLM can read.</span>
</span><span id="Message-38"><a href="#Message-38"><span class="linenos">38</span></a>
</span><span id="Message-39"><a href="#Message-39"><span class="linenos">39</span></a><span class="sd">        Args:</span>
</span><span id="Message-40"><a href="#Message-40"><span class="linenos">40</span></a><span class="sd">            content: The content of the message. It can take on any of the following types:</span>
</span><span id="Message-41"><a href="#Message-41"><span class="linenos">41</span></a><span class="sd">                - str: A simple string message.</span>
</span><span id="Message-42"><a href="#Message-42"><span class="linenos">42</span></a><span class="sd">                - List[ToolCall]: A list of tool calls.</span>
</span><span id="Message-43"><a href="#Message-43"><span class="linenos">43</span></a><span class="sd">                - ToolResponse: A tool response.</span>
</span><span id="Message-44"><a href="#Message-44"><span class="linenos">44</span></a><span class="sd">                - BaseModel: A custom base model object.</span>
</span><span id="Message-45"><a href="#Message-45"><span class="linenos">45</span></a><span class="sd">            role: The role of the message (assistant, user, system, tool, etc.).</span>
</span><span id="Message-46"><a href="#Message-46"><span class="linenos">46</span></a><span class="sd">            inject_prompt (bool, optional): Whether to inject prompt with context variables. Defaults to True.</span>
</span><span id="Message-47"><a href="#Message-47"><span class="linenos">47</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Message-48"><a href="#Message-48"><span class="linenos">48</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">validate_content</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</span><span id="Message-49"><a href="#Message-49"><span class="linenos">49</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_content</span> <span class="o">=</span> <span class="n">content</span>
</span><span id="Message-50"><a href="#Message-50"><span class="linenos">50</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_role</span> <span class="o">=</span> <span class="n">Role</span><span class="p">(</span><span class="n">role</span><span class="p">)</span>
</span><span id="Message-51"><a href="#Message-51"><span class="linenos">51</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_inject_prompt</span> <span class="o">=</span> <span class="n">inject_prompt</span>
</span><span id="Message-52"><a href="#Message-52"><span class="linenos">52</span></a>
</span><span id="Message-53"><a href="#Message-53"><span class="linenos">53</span></a>    <span class="nd">@classmethod</span>
</span><span id="Message-54"><a href="#Message-54"><span class="linenos">54</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">validate_content</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="n">_T</span><span class="p">):</span>
</span><span id="Message-55"><a href="#Message-55"><span class="linenos">55</span></a>        <span class="k">pass</span>
</span><span id="Message-56"><a href="#Message-56"><span class="linenos">56</span></a>
</span><span id="Message-57"><a href="#Message-57"><span class="linenos">57</span></a>    <span class="nd">@property</span>
</span><span id="Message-58"><a href="#Message-58"><span class="linenos">58</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">content</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_T</span><span class="p">:</span>
</span><span id="Message-59"><a href="#Message-59"><span class="linenos">59</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Collects the content of the message.&quot;&quot;&quot;</span>
</span><span id="Message-60"><a href="#Message-60"><span class="linenos">60</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content</span>
</span><span id="Message-61"><a href="#Message-61"><span class="linenos">61</span></a>
</span><span id="Message-62"><a href="#Message-62"><span class="linenos">62</span></a>    <span class="nd">@property</span>
</span><span id="Message-63"><a href="#Message-63"><span class="linenos">63</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">role</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Role</span><span class="p">:</span>
</span><span id="Message-64"><a href="#Message-64"><span class="linenos">64</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Collects the role of the message.&quot;&quot;&quot;</span>
</span><span id="Message-65"><a href="#Message-65"><span class="linenos">65</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_role</span>
</span><span id="Message-66"><a href="#Message-66"><span class="linenos">66</span></a>
</span><span id="Message-67"><a href="#Message-67"><span class="linenos">67</span></a>    <span class="nd">@property</span>
</span><span id="Message-68"><a href="#Message-68"><span class="linenos">68</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inject_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Message-69"><a href="#Message-69"><span class="linenos">69</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Message-70"><a href="#Message-70"><span class="linenos">70</span></a><span class="sd">        A boolean that indicates whether this message should be injected into from context.</span>
</span><span id="Message-71"><a href="#Message-71"><span class="linenos">71</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Message-72"><a href="#Message-72"><span class="linenos">72</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inject_prompt</span>
</span><span id="Message-73"><a href="#Message-73"><span class="linenos">73</span></a>
</span><span id="Message-74"><a href="#Message-74"><span class="linenos">74</span></a>    <span class="nd">@inject_prompt</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Message-75"><a href="#Message-75"><span class="linenos">75</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inject_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="Message-76"><a href="#Message-76"><span class="linenos">76</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Message-77"><a href="#Message-77"><span class="linenos">77</span></a><span class="sd">        Sets the inject_prompt property.</span>
</span><span id="Message-78"><a href="#Message-78"><span class="linenos">78</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Message-79"><a href="#Message-79"><span class="linenos">79</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_inject_prompt</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Message-80"><a href="#Message-80"><span class="linenos">80</span></a>
</span><span id="Message-81"><a href="#Message-81"><span class="linenos">81</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Message-82"><a href="#Message-82"><span class="linenos">82</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">role</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Message-83"><a href="#Message-83"><span class="linenos">83</span></a>
</span><span id="Message-84"><a href="#Message-84"><span class="linenos">84</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Message-85"><a href="#Message-85"><span class="linenos">85</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A base class that represents a message that an LLM can read.</p>

<p>Note the content may take on a variety of allowable types.</p>
</div>


                            <div id="Message.__init__" class="classattr">
                                        <input id="Message.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Message</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">content</span><span class="p">:</span> <span class="o">~</span><span class="n">_T</span>,</span><span class="param">	<span class="n">role</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;assistant&#39;</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;system&#39;</span><span class="p">,</span> <span class="s1">&#39;tool&#39;</span><span class="p">]</span>,</span><span class="param">	<span class="n">inject_prompt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span>)</span>

                <label class="view-source-button" for="Message.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Message.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Message.__init__-30"><a href="#Message.__init__-30"><span class="linenos">30</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Message.__init__-31"><a href="#Message.__init__-31"><span class="linenos">31</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Message.__init__-32"><a href="#Message.__init__-32"><span class="linenos">32</span></a>        <span class="n">content</span><span class="p">:</span> <span class="n">_T</span><span class="p">,</span>
</span><span id="Message.__init__-33"><a href="#Message.__init__-33"><span class="linenos">33</span></a>        <span class="n">role</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;assistant&quot;</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;tool&quot;</span><span class="p">],</span>
</span><span id="Message.__init__-34"><a href="#Message.__init__-34"><span class="linenos">34</span></a>        <span class="n">inject_prompt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="Message.__init__-35"><a href="#Message.__init__-35"><span class="linenos">35</span></a>    <span class="p">):</span>
</span><span id="Message.__init__-36"><a href="#Message.__init__-36"><span class="linenos">36</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Message.__init__-37"><a href="#Message.__init__-37"><span class="linenos">37</span></a><span class="sd">        A simple class that represents a message that an LLM can read.</span>
</span><span id="Message.__init__-38"><a href="#Message.__init__-38"><span class="linenos">38</span></a>
</span><span id="Message.__init__-39"><a href="#Message.__init__-39"><span class="linenos">39</span></a><span class="sd">        Args:</span>
</span><span id="Message.__init__-40"><a href="#Message.__init__-40"><span class="linenos">40</span></a><span class="sd">            content: The content of the message. It can take on any of the following types:</span>
</span><span id="Message.__init__-41"><a href="#Message.__init__-41"><span class="linenos">41</span></a><span class="sd">                - str: A simple string message.</span>
</span><span id="Message.__init__-42"><a href="#Message.__init__-42"><span class="linenos">42</span></a><span class="sd">                - List[ToolCall]: A list of tool calls.</span>
</span><span id="Message.__init__-43"><a href="#Message.__init__-43"><span class="linenos">43</span></a><span class="sd">                - ToolResponse: A tool response.</span>
</span><span id="Message.__init__-44"><a href="#Message.__init__-44"><span class="linenos">44</span></a><span class="sd">                - BaseModel: A custom base model object.</span>
</span><span id="Message.__init__-45"><a href="#Message.__init__-45"><span class="linenos">45</span></a><span class="sd">            role: The role of the message (assistant, user, system, tool, etc.).</span>
</span><span id="Message.__init__-46"><a href="#Message.__init__-46"><span class="linenos">46</span></a><span class="sd">            inject_prompt (bool, optional): Whether to inject prompt with context variables. Defaults to True.</span>
</span><span id="Message.__init__-47"><a href="#Message.__init__-47"><span class="linenos">47</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Message.__init__-48"><a href="#Message.__init__-48"><span class="linenos">48</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">validate_content</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</span><span id="Message.__init__-49"><a href="#Message.__init__-49"><span class="linenos">49</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_content</span> <span class="o">=</span> <span class="n">content</span>
</span><span id="Message.__init__-50"><a href="#Message.__init__-50"><span class="linenos">50</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_role</span> <span class="o">=</span> <span class="n">Role</span><span class="p">(</span><span class="n">role</span><span class="p">)</span>
</span><span id="Message.__init__-51"><a href="#Message.__init__-51"><span class="linenos">51</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_inject_prompt</span> <span class="o">=</span> <span class="n">inject_prompt</span>
</span></pre></div>


            <div class="docstring"><p>A simple class that represents a message that an LLM can read.</p>

<p>Args:
    content: The content of the message. It can take on any of the following types:
        - str: A simple string message.
        - List[ToolCall]: A list of tool calls.
        - ToolResponse: A tool response.
        - BaseModel: A custom base model object.
    role: The role of the message (assistant, user, system, tool, etc.).
    inject_prompt (bool, optional): Whether to inject prompt with context variables. Defaults to True.</p>
</div>


                            </div>
                            <div id="Message.validate_content" class="classattr">
                                        <input id="Message.validate_content-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">validate_content</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">content</span><span class="p">:</span> <span class="o">~</span><span class="n">_T</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Message.validate_content-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Message.validate_content"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Message.validate_content-53"><a href="#Message.validate_content-53"><span class="linenos">53</span></a>    <span class="nd">@classmethod</span>
</span><span id="Message.validate_content-54"><a href="#Message.validate_content-54"><span class="linenos">54</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">validate_content</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="n">_T</span><span class="p">):</span>
</span><span id="Message.validate_content-55"><a href="#Message.validate_content-55"><span class="linenos">55</span></a>        <span class="k">pass</span>
</span></pre></div>


    

                            </div>
                            <div id="Message.content" class="classattr">
                                        <input id="Message.content-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">content</span><span class="annotation">: ~_T</span>

                <label class="view-source-button" for="Message.content-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Message.content"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Message.content-57"><a href="#Message.content-57"><span class="linenos">57</span></a>    <span class="nd">@property</span>
</span><span id="Message.content-58"><a href="#Message.content-58"><span class="linenos">58</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">content</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_T</span><span class="p">:</span>
</span><span id="Message.content-59"><a href="#Message.content-59"><span class="linenos">59</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Collects the content of the message.&quot;&quot;&quot;</span>
</span><span id="Message.content-60"><a href="#Message.content-60"><span class="linenos">60</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_content</span>
</span></pre></div>


            <div class="docstring"><p>Collects the content of the message.</p>
</div>


                            </div>
                            <div id="Message.role" class="classattr">
                                        <input id="Message.role-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">role</span><span class="annotation">: railtracks.llm.message.Role</span>

                <label class="view-source-button" for="Message.role-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Message.role"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Message.role-62"><a href="#Message.role-62"><span class="linenos">62</span></a>    <span class="nd">@property</span>
</span><span id="Message.role-63"><a href="#Message.role-63"><span class="linenos">63</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">role</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Role</span><span class="p">:</span>
</span><span id="Message.role-64"><a href="#Message.role-64"><span class="linenos">64</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Collects the role of the message.&quot;&quot;&quot;</span>
</span><span id="Message.role-65"><a href="#Message.role-65"><span class="linenos">65</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_role</span>
</span></pre></div>


            <div class="docstring"><p>Collects the role of the message.</p>
</div>


                            </div>
                            <div id="Message.inject_prompt" class="classattr">
                                        <input id="Message.inject_prompt-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">inject_prompt</span><span class="annotation">: bool</span>

                <label class="view-source-button" for="Message.inject_prompt-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Message.inject_prompt"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Message.inject_prompt-67"><a href="#Message.inject_prompt-67"><span class="linenos">67</span></a>    <span class="nd">@property</span>
</span><span id="Message.inject_prompt-68"><a href="#Message.inject_prompt-68"><span class="linenos">68</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">inject_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Message.inject_prompt-69"><a href="#Message.inject_prompt-69"><span class="linenos">69</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Message.inject_prompt-70"><a href="#Message.inject_prompt-70"><span class="linenos">70</span></a><span class="sd">        A boolean that indicates whether this message should be injected into from context.</span>
</span><span id="Message.inject_prompt-71"><a href="#Message.inject_prompt-71"><span class="linenos">71</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Message.inject_prompt-72"><a href="#Message.inject_prompt-72"><span class="linenos">72</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inject_prompt</span>
</span></pre></div>


            <div class="docstring"><p>A boolean that indicates whether this message should be injected into from context.</p>
</div>


                            </div>
                </section>
                <section id="ToolMessage">
                            <input id="ToolMessage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ToolMessage</span><wbr>(<span class="base"><a href="#Message">railtracks.llm.Message[railtracks.llm.content.ToolResponse]</a></span>):

                <label class="view-source-button" for="ToolMessage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ToolMessage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ToolMessage-142"><a href="#ToolMessage-142"><span class="linenos">142</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ToolMessage</span><span class="p">(</span><span class="n">Message</span><span class="p">[</span><span class="n">ToolResponse</span><span class="p">]):</span>
</span><span id="ToolMessage-143"><a href="#ToolMessage-143"><span class="linenos">143</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToolMessage-144"><a href="#ToolMessage-144"><span class="linenos">144</span></a><span class="sd">    A simple class that represents a message that is a tool call answer.</span>
</span><span id="ToolMessage-145"><a href="#ToolMessage-145"><span class="linenos">145</span></a>
</span><span id="ToolMessage-146"><a href="#ToolMessage-146"><span class="linenos">146</span></a><span class="sd">    Args:</span>
</span><span id="ToolMessage-147"><a href="#ToolMessage-147"><span class="linenos">147</span></a><span class="sd">        content (ToolResponse): The tool response content for the message.</span>
</span><span id="ToolMessage-148"><a href="#ToolMessage-148"><span class="linenos">148</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ToolMessage-149"><a href="#ToolMessage-149"><span class="linenos">149</span></a>
</span><span id="ToolMessage-150"><a href="#ToolMessage-150"><span class="linenos">150</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="n">ToolResponse</span><span class="p">):</span>
</span><span id="ToolMessage-151"><a href="#ToolMessage-151"><span class="linenos">151</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">ToolResponse</span><span class="p">):</span>
</span><span id="ToolMessage-152"><a href="#ToolMessage-152"><span class="linenos">152</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="ToolMessage-153"><a href="#ToolMessage-153"><span class="linenos">153</span></a>                <span class="sa">f</span><span class="s2">&quot;A </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> needs a ToolResponse but got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">content</span><span class="p">)</span><span class="si">}</span><span class="s2">. Check the invoke function of the OutputLessToolCallLLM node. That is the only place to return a ToolMessage.&quot;</span>
</span><span id="ToolMessage-154"><a href="#ToolMessage-154"><span class="linenos">154</span></a>            <span class="p">)</span>
</span><span id="ToolMessage-155"><a href="#ToolMessage-155"><span class="linenos">155</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;tool&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A simple class that represents a message that is a tool call answer.</p>

<p>Args:
    content (ToolResponse): The tool response content for the message.</p>
</div>


                            <div id="ToolMessage.__init__" class="classattr">
                                        <input id="ToolMessage.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ToolMessage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">content</span><span class="p">:</span> <span class="n"><a href="#ToolResponse">ToolResponse</a></span></span>)</span>

                <label class="view-source-button" for="ToolMessage.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ToolMessage.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ToolMessage.__init__-150"><a href="#ToolMessage.__init__-150"><span class="linenos">150</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="n">ToolResponse</span><span class="p">):</span>
</span><span id="ToolMessage.__init__-151"><a href="#ToolMessage.__init__-151"><span class="linenos">151</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">ToolResponse</span><span class="p">):</span>
</span><span id="ToolMessage.__init__-152"><a href="#ToolMessage.__init__-152"><span class="linenos">152</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="ToolMessage.__init__-153"><a href="#ToolMessage.__init__-153"><span class="linenos">153</span></a>                <span class="sa">f</span><span class="s2">&quot;A </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> needs a ToolResponse but got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">content</span><span class="p">)</span><span class="si">}</span><span class="s2">. Check the invoke function of the OutputLessToolCallLLM node. That is the only place to return a ToolMessage.&quot;</span>
</span><span id="ToolMessage.__init__-154"><a href="#ToolMessage.__init__-154"><span class="linenos">154</span></a>            <span class="p">)</span>
</span><span id="ToolMessage.__init__-155"><a href="#ToolMessage.__init__-155"><span class="linenos">155</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;tool&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A simple class that represents a message that an LLM can read.</p>

<p>Args:
    content: The content of the message. It can take on any of the following types:
        - str: A simple string message.
        - List[ToolCall]: A list of tool calls.
        - ToolResponse: A tool response.
        - BaseModel: A custom base model object.
    role: The role of the message (assistant, user, system, tool, etc.).
    inject_prompt (bool, optional): Whether to inject prompt with context variables. Defaults to True.</p>
</div>


                            </div>
                </section>
                <section id="MessageHistory">
                            <input id="MessageHistory-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">MessageHistory</span><wbr>(<span class="base">typing.List[railtracks.llm.message.Message]</span>):

                <label class="view-source-button" for="MessageHistory-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MessageHistory"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MessageHistory-9"><a href="#MessageHistory-9"><span class="linenos"> 9</span></a><span class="k">class</span><span class="w"> </span><span class="nc">MessageHistory</span><span class="p">(</span><span class="n">List</span><span class="p">[</span><span class="n">Message</span><span class="p">]):</span>
</span><span id="MessageHistory-10"><a href="#MessageHistory-10"><span class="linenos">10</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MessageHistory-11"><a href="#MessageHistory-11"><span class="linenos">11</span></a><span class="sd">    A basic object that represents a history of messages. The object has all the same capability as a list such as</span>
</span><span id="MessageHistory-12"><a href="#MessageHistory-12"><span class="linenos">12</span></a><span class="sd">    `.remove()`, `.append()`, etc.</span>
</span><span id="MessageHistory-13"><a href="#MessageHistory-13"><span class="linenos">13</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MessageHistory-14"><a href="#MessageHistory-14"><span class="linenos">14</span></a>
</span><span id="MessageHistory-15"><a href="#MessageHistory-15"><span class="linenos">15</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="MessageHistory-16"><a href="#MessageHistory-16"><span class="linenos">16</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">message</span><span class="p">)</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">])</span>
</span><span id="MessageHistory-17"><a href="#MessageHistory-17"><span class="linenos">17</span></a>
</span><span id="MessageHistory-18"><a href="#MessageHistory-18"><span class="linenos">18</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">removed_system_messages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageHistory</span><span class="p">:</span>
</span><span id="MessageHistory-19"><a href="#MessageHistory-19"><span class="linenos">19</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MessageHistory-20"><a href="#MessageHistory-20"><span class="linenos">20</span></a><span class="sd">        Returns a new MessageHistory object with all SystemMessages removed.</span>
</span><span id="MessageHistory-21"><a href="#MessageHistory-21"><span class="linenos">21</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MessageHistory-22"><a href="#MessageHistory-22"><span class="linenos">22</span></a>        <span class="k">return</span> <span class="n">MessageHistory</span><span class="p">([</span><span class="n">msg</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">role</span> <span class="o">!=</span> <span class="n">Role</span><span class="o">.</span><span class="n">system</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>A basic object that represents a history of messages. The object has all the same capability as a list such as
<code>.remove()</code>, <code>.append()</code>, etc.</p>
</div>


                            <div id="MessageHistory.removed_system_messages" class="classattr">
                                        <input id="MessageHistory.removed_system_messages-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">removed_system_messages</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#MessageHistory">MessageHistory</a></span>:</span></span>

                <label class="view-source-button" for="MessageHistory.removed_system_messages-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MessageHistory.removed_system_messages"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MessageHistory.removed_system_messages-18"><a href="#MessageHistory.removed_system_messages-18"><span class="linenos">18</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">removed_system_messages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MessageHistory</span><span class="p">:</span>
</span><span id="MessageHistory.removed_system_messages-19"><a href="#MessageHistory.removed_system_messages-19"><span class="linenos">19</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MessageHistory.removed_system_messages-20"><a href="#MessageHistory.removed_system_messages-20"><span class="linenos">20</span></a><span class="sd">        Returns a new MessageHistory object with all SystemMessages removed.</span>
</span><span id="MessageHistory.removed_system_messages-21"><a href="#MessageHistory.removed_system_messages-21"><span class="linenos">21</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MessageHistory.removed_system_messages-22"><a href="#MessageHistory.removed_system_messages-22"><span class="linenos">22</span></a>        <span class="k">return</span> <span class="n">MessageHistory</span><span class="p">([</span><span class="n">msg</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">role</span> <span class="o">!=</span> <span class="n">Role</span><span class="o">.</span><span class="n">system</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>Returns a new MessageHistory object with all SystemMessages removed.</p>
</div>


                            </div>
                </section>
                <section id="Tool">
                            <input id="Tool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Tool</span>:

                <label class="view-source-button" for="Tool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Tool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Tool-29"><a href="#Tool-29"><span class="linenos"> 29</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Tool</span><span class="p">:</span>
</span><span id="Tool-30"><a href="#Tool-30"><span class="linenos"> 30</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Tool-31"><a href="#Tool-31"><span class="linenos"> 31</span></a><span class="sd">    A quasi-immutable class designed to represent a single Tool object.</span>
</span><span id="Tool-32"><a href="#Tool-32"><span class="linenos"> 32</span></a><span class="sd">    You pass in key details (name, description, and required parameters).</span>
</span><span id="Tool-33"><a href="#Tool-33"><span class="linenos"> 33</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Tool-34"><a href="#Tool-34"><span class="linenos"> 34</span></a>
</span><span id="Tool-35"><a href="#Tool-35"><span class="linenos"> 35</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Tool-36"><a href="#Tool-36"><span class="linenos"> 36</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Tool-37"><a href="#Tool-37"><span class="linenos"> 37</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Tool-38"><a href="#Tool-38"><span class="linenos"> 38</span></a>        <span class="n">detail</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Tool-39"><a href="#Tool-39"><span class="linenos"> 39</span></a>        <span class="n">parameters</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Parameter</span><span class="p">]</span> <span class="o">|</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Tool-40"><a href="#Tool-40"><span class="linenos"> 40</span></a>    <span class="p">):</span>
</span><span id="Tool-41"><a href="#Tool-41"><span class="linenos"> 41</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Tool-42"><a href="#Tool-42"><span class="linenos"> 42</span></a><span class="sd">        Creates a new Tool instance.</span>
</span><span id="Tool-43"><a href="#Tool-43"><span class="linenos"> 43</span></a>
</span><span id="Tool-44"><a href="#Tool-44"><span class="linenos"> 44</span></a><span class="sd">        Args:</span>
</span><span id="Tool-45"><a href="#Tool-45"><span class="linenos"> 45</span></a><span class="sd">            name: The name of the tool.</span>
</span><span id="Tool-46"><a href="#Tool-46"><span class="linenos"> 46</span></a><span class="sd">            detail: A detailed description of the tool.</span>
</span><span id="Tool-47"><a href="#Tool-47"><span class="linenos"> 47</span></a><span class="sd">            parameters: Parameters attached to this tool; a set of Parameter objects, or a dict.</span>
</span><span id="Tool-48"><a href="#Tool-48"><span class="linenos"> 48</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Tool-49"><a href="#Tool-49"><span class="linenos"> 49</span></a>
</span><span id="Tool-50"><a href="#Tool-50"><span class="linenos"> 50</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="Tool-51"><a href="#Tool-51"><span class="linenos"> 51</span></a>            <span class="nb">isinstance</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="Tool-52"><a href="#Tool-52"><span class="linenos"> 52</span></a>        <span class="p">):</span>  <span class="c1"># if parameters is a JSON-output_schema, convert into Parameter objects (Checks should be done in validate_tool_params)</span>
</span><span id="Tool-53"><a href="#Tool-53"><span class="linenos"> 53</span></a>            <span class="n">props</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;properties&quot;</span><span class="p">)</span>
</span><span id="Tool-54"><a href="#Tool-54"><span class="linenos"> 54</span></a>            <span class="n">required_fields</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;required&quot;</span><span class="p">,</span> <span class="p">[]))</span>
</span><span id="Tool-55"><a href="#Tool-55"><span class="linenos"> 55</span></a>            <span class="n">param_objs</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">Parameter</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="Tool-56"><a href="#Tool-56"><span class="linenos"> 56</span></a>            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">props</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Tool-57"><a href="#Tool-57"><span class="linenos"> 57</span></a>                <span class="n">param_objs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="Tool-58"><a href="#Tool-58"><span class="linenos"> 58</span></a>                    <span class="n">parse_json_schema_to_parameter</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">required_fields</span><span class="p">)</span>
</span><span id="Tool-59"><a href="#Tool-59"><span class="linenos"> 59</span></a>                <span class="p">)</span>
</span><span id="Tool-60"><a href="#Tool-60"><span class="linenos"> 60</span></a>            <span class="n">parameters</span> <span class="o">=</span> <span class="n">param_objs</span>
</span><span id="Tool-61"><a href="#Tool-61"><span class="linenos"> 61</span></a>
</span><span id="Tool-62"><a href="#Tool-62"><span class="linenos"> 62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Tool-63"><a href="#Tool-63"><span class="linenos"> 63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_detail</span> <span class="o">=</span> <span class="n">detail</span>
</span><span id="Tool-64"><a href="#Tool-64"><span class="linenos"> 64</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span> <span class="o">=</span> <span class="n">parameters</span>
</span><span id="Tool-65"><a href="#Tool-65"><span class="linenos"> 65</span></a>
</span><span id="Tool-66"><a href="#Tool-66"><span class="linenos"> 66</span></a>    <span class="nd">@property</span>
</span><span id="Tool-67"><a href="#Tool-67"><span class="linenos"> 67</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Tool-68"><a href="#Tool-68"><span class="linenos"> 68</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the tool.&quot;&quot;&quot;</span>
</span><span id="Tool-69"><a href="#Tool-69"><span class="linenos"> 69</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
</span><span id="Tool-70"><a href="#Tool-70"><span class="linenos"> 70</span></a>
</span><span id="Tool-71"><a href="#Tool-71"><span class="linenos"> 71</span></a>    <span class="nd">@property</span>
</span><span id="Tool-72"><a href="#Tool-72"><span class="linenos"> 72</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">detail</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Tool-73"><a href="#Tool-73"><span class="linenos"> 73</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the detailed description for this tool.&quot;&quot;&quot;</span>
</span><span id="Tool-74"><a href="#Tool-74"><span class="linenos"> 74</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_detail</span>
</span><span id="Tool-75"><a href="#Tool-75"><span class="linenos"> 75</span></a>
</span><span id="Tool-76"><a href="#Tool-76"><span class="linenos"> 76</span></a>    <span class="nd">@property</span>
</span><span id="Tool-77"><a href="#Tool-77"><span class="linenos"> 77</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="n">Parameter</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Tool-78"><a href="#Tool-78"><span class="linenos"> 78</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the parameters attached to this tool (if any).&quot;&quot;&quot;</span>
</span><span id="Tool-79"><a href="#Tool-79"><span class="linenos"> 79</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span>
</span><span id="Tool-80"><a href="#Tool-80"><span class="linenos"> 80</span></a>
</span><span id="Tool-81"><a href="#Tool-81"><span class="linenos"> 81</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Tool-82"><a href="#Tool-82"><span class="linenos"> 82</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;String representation of the tool.&quot;&quot;&quot;</span>
</span><span id="Tool-83"><a href="#Tool-83"><span class="linenos"> 83</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">:</span>
</span><span id="Tool-84"><a href="#Tool-84"><span class="linenos"> 84</span></a>            <span class="n">params_str</span> <span class="o">=</span> <span class="s2">&quot;{&quot;</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;}&quot;</span>
</span><span id="Tool-85"><a href="#Tool-85"><span class="linenos"> 85</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Tool(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="si">}</span><span class="s2">, detail=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_detail</span><span class="si">}</span><span class="s2">, parameters=</span><span class="si">{</span><span class="n">params_str</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;None&#39;</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="Tool-86"><a href="#Tool-86"><span class="linenos"> 86</span></a>
</span><span id="Tool-87"><a href="#Tool-87"><span class="linenos"> 87</span></a>    <span class="nd">@classmethod</span>
</span><span id="Tool-88"><a href="#Tool-88"><span class="linenos"> 88</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_function</span><span class="p">(</span>
</span><span id="Tool-89"><a href="#Tool-89"><span class="linenos"> 89</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="Tool-90"><a href="#Tool-90"><span class="linenos"> 90</span></a>        <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
</span><span id="Tool-91"><a href="#Tool-91"><span class="linenos"> 91</span></a>        <span class="o">/</span><span class="p">,</span>
</span><span id="Tool-92"><a href="#Tool-92"><span class="linenos"> 92</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Tool-93"><a href="#Tool-93"><span class="linenos"> 93</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Tool-94"><a href="#Tool-94"><span class="linenos"> 94</span></a>        <span class="n">details</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Tool-95"><a href="#Tool-95"><span class="linenos"> 95</span></a>        <span class="n">params</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span> <span class="o">|</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="n">Set</span><span class="p">[</span><span class="n">Parameter</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Tool-96"><a href="#Tool-96"><span class="linenos"> 96</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Tool-97"><a href="#Tool-97"><span class="linenos"> 97</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Tool-98"><a href="#Tool-98"><span class="linenos"> 98</span></a><span class="sd">        Creates a Tool from a Python callable.</span>
</span><span id="Tool-99"><a href="#Tool-99"><span class="linenos"> 99</span></a><span class="sd">        Uses the function&#39;s docstring and type annotations to extract details and parameter info.</span>
</span><span id="Tool-100"><a href="#Tool-100"><span class="linenos">100</span></a>
</span><span id="Tool-101"><a href="#Tool-101"><span class="linenos">101</span></a><span class="sd">        KEY NOTE: No checking is done to ensure that the inserted params match the function signature</span>
</span><span id="Tool-102"><a href="#Tool-102"><span class="linenos">102</span></a>
</span><span id="Tool-103"><a href="#Tool-103"><span class="linenos">103</span></a><span class="sd">        Args:</span>
</span><span id="Tool-104"><a href="#Tool-104"><span class="linenos">104</span></a><span class="sd">            func: The function to create a tool from.</span>
</span><span id="Tool-105"><a href="#Tool-105"><span class="linenos">105</span></a><span class="sd">            name: Optional name for the tool. If not provided, uses the function&#39;s name.</span>
</span><span id="Tool-106"><a href="#Tool-106"><span class="linenos">106</span></a><span class="sd">            details: Optional detailed description for the tool. If not provided, extracts from the function&#39;s docstring.</span>
</span><span id="Tool-107"><a href="#Tool-107"><span class="linenos">107</span></a><span class="sd">            params: Optional parameters for the tool. If not provided, infers from the function&#39;s signature and docstring.</span>
</span><span id="Tool-108"><a href="#Tool-108"><span class="linenos">108</span></a>
</span><span id="Tool-109"><a href="#Tool-109"><span class="linenos">109</span></a><span class="sd">        Returns:</span>
</span><span id="Tool-110"><a href="#Tool-110"><span class="linenos">110</span></a><span class="sd">            A Tool instance representing the function.</span>
</span><span id="Tool-111"><a href="#Tool-111"><span class="linenos">111</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Tool-112"><a href="#Tool-112"><span class="linenos">112</span></a>        <span class="c1"># TODO: add set verification to ensure that the params match the function signature</span>
</span><span id="Tool-113"><a href="#Tool-113"><span class="linenos">113</span></a>        <span class="c1"># Check if the function is a method in a class</span>
</span><span id="Tool-114"><a href="#Tool-114"><span class="linenos">114</span></a>        <span class="n">in_class</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__qualname__</span> <span class="ow">and</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">func</span><span class="o">.</span><span class="vm">__qualname__</span><span class="p">)</span>
</span><span id="Tool-115"><a href="#Tool-115"><span class="linenos">115</span></a>
</span><span id="Tool-116"><a href="#Tool-116"><span class="linenos">116</span></a>        <span class="c1"># Parse the docstring to get parameter descriptions</span>
</span><span id="Tool-117"><a href="#Tool-117"><span class="linenos">117</span></a>        <span class="n">arg_descriptions</span> <span class="o">=</span> <span class="n">parse_docstring_args</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__doc__</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="Tool-118"><a href="#Tool-118"><span class="linenos">118</span></a>
</span><span id="Tool-119"><a href="#Tool-119"><span class="linenos">119</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Tool-120"><a href="#Tool-120"><span class="linenos">120</span></a>            <span class="c1"># Get the function signature</span>
</span><span id="Tool-121"><a href="#Tool-121"><span class="linenos">121</span></a>            <span class="n">signature</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span><span id="Tool-122"><a href="#Tool-122"><span class="linenos">122</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="Tool-123"><a href="#Tool-123"><span class="linenos">123</span></a>            <span class="k">raise</span> <span class="n">ToolCreationError</span><span class="p">(</span>
</span><span id="Tool-124"><a href="#Tool-124"><span class="linenos">124</span></a>                <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Cannot convert kwargs for builtin functions.&quot;</span><span class="p">,</span>
</span><span id="Tool-125"><a href="#Tool-125"><span class="linenos">125</span></a>                <span class="n">notes</span><span class="o">=</span><span class="p">[</span>
</span><span id="Tool-126"><a href="#Tool-126"><span class="linenos">126</span></a>                    <span class="s2">&quot;Please use a cutom made function.&quot;</span><span class="p">,</span>
</span><span id="Tool-127"><a href="#Tool-127"><span class="linenos">127</span></a>                    <span class="s2">&quot;Eg.- </span><span class="se">\n</span><span class="s2">def my_custom_function(a: int, b: str):</span><span class="se">\n</span><span class="s2">    pass&quot;</span><span class="p">,</span>
</span><span id="Tool-128"><a href="#Tool-128"><span class="linenos">128</span></a>                <span class="p">],</span>
</span><span id="Tool-129"><a href="#Tool-129"><span class="linenos">129</span></a>            <span class="p">)</span>
</span><span id="Tool-130"><a href="#Tool-130"><span class="linenos">130</span></a>
</span><span id="Tool-131"><a href="#Tool-131"><span class="linenos">131</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Tool-132"><a href="#Tool-132"><span class="linenos">132</span></a>            <span class="c1"># TODO: add some checking here to ensure that the name is valid snake case.</span>
</span><span id="Tool-133"><a href="#Tool-133"><span class="linenos">133</span></a>            <span class="n">function_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Tool-134"><a href="#Tool-134"><span class="linenos">134</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Tool-135"><a href="#Tool-135"><span class="linenos">135</span></a>            <span class="n">function_name</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="Tool-136"><a href="#Tool-136"><span class="linenos">136</span></a>
</span><span id="Tool-137"><a href="#Tool-137"><span class="linenos">137</span></a>        <span class="n">docstring</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__doc__</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">if</span> <span class="n">func</span><span class="o">.</span><span class="vm">__doc__</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
</span><span id="Tool-138"><a href="#Tool-138"><span class="linenos">138</span></a>
</span><span id="Tool-139"><a href="#Tool-139"><span class="linenos">139</span></a>        <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Tool-140"><a href="#Tool-140"><span class="linenos">140</span></a>            <span class="n">parameters</span> <span class="o">=</span> <span class="n">params</span>
</span><span id="Tool-141"><a href="#Tool-141"><span class="linenos">141</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Tool-142"><a href="#Tool-142"><span class="linenos">142</span></a>            <span class="c1"># Check for multiple Args sections (warning)</span>
</span><span id="Tool-143"><a href="#Tool-143"><span class="linenos">143</span></a>            <span class="c1"># Only need to do this if we need to.</span>
</span><span id="Tool-144"><a href="#Tool-144"><span class="linenos">144</span></a>            <span class="k">if</span> <span class="n">docstring</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;Args:&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="Tool-145"><a href="#Tool-145"><span class="linenos">145</span></a>                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Multiple &#39;Args:&#39; sections found in the docstring.&quot;</span><span class="p">)</span>
</span><span id="Tool-146"><a href="#Tool-146"><span class="linenos">146</span></a>            <span class="c1"># Create parameter handlers</span>
</span><span id="Tool-147"><a href="#Tool-147"><span class="linenos">147</span></a>            <span class="n">handlers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ParameterHandler</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="Tool-148"><a href="#Tool-148"><span class="linenos">148</span></a>                <span class="n">PydanticModelHandler</span><span class="p">(),</span>
</span><span id="Tool-149"><a href="#Tool-149"><span class="linenos">149</span></a>                <span class="n">SequenceParameterHandler</span><span class="p">(),</span>
</span><span id="Tool-150"><a href="#Tool-150"><span class="linenos">150</span></a>                <span class="n">UnionParameterHandler</span><span class="p">(),</span>
</span><span id="Tool-151"><a href="#Tool-151"><span class="linenos">151</span></a>                <span class="n">DefaultParameterHandler</span><span class="p">(),</span>
</span><span id="Tool-152"><a href="#Tool-152"><span class="linenos">152</span></a>            <span class="p">]</span>
</span><span id="Tool-153"><a href="#Tool-153"><span class="linenos">153</span></a>
</span><span id="Tool-154"><a href="#Tool-154"><span class="linenos">154</span></a>            <span class="n">parameters</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">Parameter</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="Tool-155"><a href="#Tool-155"><span class="linenos">155</span></a>
</span><span id="Tool-156"><a href="#Tool-156"><span class="linenos">156</span></a>            <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">signature</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="Tool-157"><a href="#Tool-157"><span class="linenos">157</span></a>                <span class="c1"># Skip &#39;self&#39; parameter for class methods</span>
</span><span id="Tool-158"><a href="#Tool-158"><span class="linenos">158</span></a>                <span class="k">if</span> <span class="n">in_class</span> <span class="ow">and</span> <span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;self&quot;</span> <span class="ow">or</span> <span class="n">param</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;cls&quot;</span><span class="p">):</span>
</span><span id="Tool-159"><a href="#Tool-159"><span class="linenos">159</span></a>                    <span class="k">continue</span>
</span><span id="Tool-160"><a href="#Tool-160"><span class="linenos">160</span></a>
</span><span id="Tool-161"><a href="#Tool-161"><span class="linenos">161</span></a>                <span class="n">description</span> <span class="o">=</span> <span class="n">arg_descriptions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="Tool-162"><a href="#Tool-162"><span class="linenos">162</span></a>
</span><span id="Tool-163"><a href="#Tool-163"><span class="linenos">163</span></a>                <span class="c1"># Check if the parameter is required</span>
</span><span id="Tool-164"><a href="#Tool-164"><span class="linenos">164</span></a>                <span class="n">required</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">default</span> <span class="o">==</span> <span class="n">inspect</span><span class="o">.</span><span class="n">Parameter</span><span class="o">.</span><span class="n">empty</span>
</span><span id="Tool-165"><a href="#Tool-165"><span class="linenos">165</span></a>
</span><span id="Tool-166"><a href="#Tool-166"><span class="linenos">166</span></a>                <span class="n">handler</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">h</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">handlers</span> <span class="k">if</span> <span class="n">h</span><span class="o">.</span><span class="n">can_handle</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">annotation</span><span class="p">))</span>
</span><span id="Tool-167"><a href="#Tool-167"><span class="linenos">167</span></a>
</span><span id="Tool-168"><a href="#Tool-168"><span class="linenos">168</span></a>                <span class="n">param_obj</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">create_parameter</span><span class="p">(</span>
</span><span id="Tool-169"><a href="#Tool-169"><span class="linenos">169</span></a>                    <span class="n">param</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">param</span><span class="o">.</span><span class="n">annotation</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">required</span>
</span><span id="Tool-170"><a href="#Tool-170"><span class="linenos">170</span></a>                <span class="p">)</span>
</span><span id="Tool-171"><a href="#Tool-171"><span class="linenos">171</span></a>
</span><span id="Tool-172"><a href="#Tool-172"><span class="linenos">172</span></a>                <span class="n">parameters</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">param_obj</span><span class="p">)</span>
</span><span id="Tool-173"><a href="#Tool-173"><span class="linenos">173</span></a>
</span><span id="Tool-174"><a href="#Tool-174"><span class="linenos">174</span></a>        <span class="k">if</span> <span class="n">details</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Tool-175"><a href="#Tool-175"><span class="linenos">175</span></a>            <span class="n">main_description</span> <span class="o">=</span> <span class="n">details</span>
</span><span id="Tool-176"><a href="#Tool-176"><span class="linenos">176</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Tool-177"><a href="#Tool-177"><span class="linenos">177</span></a>            <span class="n">main_description</span> <span class="o">=</span> <span class="n">extract_main_description</span><span class="p">(</span><span class="n">docstring</span><span class="p">)</span>
</span><span id="Tool-178"><a href="#Tool-178"><span class="linenos">178</span></a>
</span><span id="Tool-179"><a href="#Tool-179"><span class="linenos">179</span></a>        <span class="n">tool_info</span> <span class="o">=</span> <span class="n">Tool</span><span class="p">(</span>
</span><span id="Tool-180"><a href="#Tool-180"><span class="linenos">180</span></a>            <span class="n">name</span><span class="o">=</span><span class="n">function_name</span><span class="p">,</span>
</span><span id="Tool-181"><a href="#Tool-181"><span class="linenos">181</span></a>            <span class="n">detail</span><span class="o">=</span><span class="n">main_description</span><span class="p">,</span>
</span><span id="Tool-182"><a href="#Tool-182"><span class="linenos">182</span></a>            <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
</span><span id="Tool-183"><a href="#Tool-183"><span class="linenos">183</span></a>        <span class="p">)</span>
</span><span id="Tool-184"><a href="#Tool-184"><span class="linenos">184</span></a>        <span class="k">return</span> <span class="n">tool_info</span>
</span><span id="Tool-185"><a href="#Tool-185"><span class="linenos">185</span></a>
</span><span id="Tool-186"><a href="#Tool-186"><span class="linenos">186</span></a>    <span class="nd">@classmethod</span>
</span><span id="Tool-187"><a href="#Tool-187"><span class="linenos">187</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_mcp</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Tool-188"><a href="#Tool-188"><span class="linenos">188</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Tool-189"><a href="#Tool-189"><span class="linenos">189</span></a><span class="sd">        Creates a Tool from an MCP tool object.</span>
</span><span id="Tool-190"><a href="#Tool-190"><span class="linenos">190</span></a>
</span><span id="Tool-191"><a href="#Tool-191"><span class="linenos">191</span></a><span class="sd">        Args:</span>
</span><span id="Tool-192"><a href="#Tool-192"><span class="linenos">192</span></a><span class="sd">            tool: The MCP tool to create a Tool from.</span>
</span><span id="Tool-193"><a href="#Tool-193"><span class="linenos">193</span></a>
</span><span id="Tool-194"><a href="#Tool-194"><span class="linenos">194</span></a><span class="sd">        Returns:</span>
</span><span id="Tool-195"><a href="#Tool-195"><span class="linenos">195</span></a><span class="sd">            A Tool instance representing the MCP tool.</span>
</span><span id="Tool-196"><a href="#Tool-196"><span class="linenos">196</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Tool-197"><a href="#Tool-197"><span class="linenos">197</span></a>        <span class="n">input_schema</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="s2">&quot;inputSchema&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Tool-198"><a href="#Tool-198"><span class="linenos">198</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">input_schema</span> <span class="ow">or</span> <span class="n">input_schema</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span>
</span><span id="Tool-199"><a href="#Tool-199"><span class="linenos">199</span></a>            <span class="k">raise</span> <span class="n">ToolCreationError</span><span class="p">(</span>
</span><span id="Tool-200"><a href="#Tool-200"><span class="linenos">200</span></a>                <span class="n">message</span><span class="o">=</span><span class="s2">&quot;The inputSchema for an MCP Tool must be &#39;object&#39;. &quot;</span><span class="p">,</span>
</span><span id="Tool-201"><a href="#Tool-201"><span class="linenos">201</span></a>                <span class="n">notes</span><span class="o">=</span><span class="p">[</span>
</span><span id="Tool-202"><a href="#Tool-202"><span class="linenos">202</span></a>                    <span class="s2">&quot;If an MCP tool has a different output_schema, create a GitHub issue and support will be added.&quot;</span>
</span><span id="Tool-203"><a href="#Tool-203"><span class="linenos">203</span></a>                <span class="p">],</span>
</span><span id="Tool-204"><a href="#Tool-204"><span class="linenos">204</span></a>            <span class="p">)</span>
</span><span id="Tool-205"><a href="#Tool-205"><span class="linenos">205</span></a>
</span><span id="Tool-206"><a href="#Tool-206"><span class="linenos">206</span></a>        <span class="n">properties</span> <span class="o">=</span> <span class="n">input_schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;properties&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="Tool-207"><a href="#Tool-207"><span class="linenos">207</span></a>        <span class="n">required_fields</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">input_schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;required&quot;</span><span class="p">,</span> <span class="p">[]))</span>
</span><span id="Tool-208"><a href="#Tool-208"><span class="linenos">208</span></a>        <span class="n">param_objs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="Tool-209"><a href="#Tool-209"><span class="linenos">209</span></a>        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Tool-210"><a href="#Tool-210"><span class="linenos">210</span></a>            <span class="n">required</span> <span class="o">=</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">required_fields</span>
</span><span id="Tool-211"><a href="#Tool-211"><span class="linenos">211</span></a>            <span class="n">param_objs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">parse_json_schema_to_parameter</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">required</span><span class="p">))</span>
</span><span id="Tool-212"><a href="#Tool-212"><span class="linenos">212</span></a>
</span><span id="Tool-213"><a href="#Tool-213"><span class="linenos">213</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">tool</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="n">tool</span><span class="o">.</span><span class="n">description</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">param_objs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A quasi-immutable class designed to represent a single Tool object.
You pass in key details (name, description, and required parameters).</p>
</div>


                            <div id="Tool.__init__" class="classattr">
                                        <input id="Tool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Tool</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">detail</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">parameters</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="n"><a href="#Parameter">Parameter</a></span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="Tool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Tool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Tool.__init__-35"><a href="#Tool.__init__-35"><span class="linenos">35</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Tool.__init__-36"><a href="#Tool.__init__-36"><span class="linenos">36</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Tool.__init__-37"><a href="#Tool.__init__-37"><span class="linenos">37</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Tool.__init__-38"><a href="#Tool.__init__-38"><span class="linenos">38</span></a>        <span class="n">detail</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Tool.__init__-39"><a href="#Tool.__init__-39"><span class="linenos">39</span></a>        <span class="n">parameters</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Parameter</span><span class="p">]</span> <span class="o">|</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Tool.__init__-40"><a href="#Tool.__init__-40"><span class="linenos">40</span></a>    <span class="p">):</span>
</span><span id="Tool.__init__-41"><a href="#Tool.__init__-41"><span class="linenos">41</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Tool.__init__-42"><a href="#Tool.__init__-42"><span class="linenos">42</span></a><span class="sd">        Creates a new Tool instance.</span>
</span><span id="Tool.__init__-43"><a href="#Tool.__init__-43"><span class="linenos">43</span></a>
</span><span id="Tool.__init__-44"><a href="#Tool.__init__-44"><span class="linenos">44</span></a><span class="sd">        Args:</span>
</span><span id="Tool.__init__-45"><a href="#Tool.__init__-45"><span class="linenos">45</span></a><span class="sd">            name: The name of the tool.</span>
</span><span id="Tool.__init__-46"><a href="#Tool.__init__-46"><span class="linenos">46</span></a><span class="sd">            detail: A detailed description of the tool.</span>
</span><span id="Tool.__init__-47"><a href="#Tool.__init__-47"><span class="linenos">47</span></a><span class="sd">            parameters: Parameters attached to this tool; a set of Parameter objects, or a dict.</span>
</span><span id="Tool.__init__-48"><a href="#Tool.__init__-48"><span class="linenos">48</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Tool.__init__-49"><a href="#Tool.__init__-49"><span class="linenos">49</span></a>
</span><span id="Tool.__init__-50"><a href="#Tool.__init__-50"><span class="linenos">50</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="Tool.__init__-51"><a href="#Tool.__init__-51"><span class="linenos">51</span></a>            <span class="nb">isinstance</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="Tool.__init__-52"><a href="#Tool.__init__-52"><span class="linenos">52</span></a>        <span class="p">):</span>  <span class="c1"># if parameters is a JSON-output_schema, convert into Parameter objects (Checks should be done in validate_tool_params)</span>
</span><span id="Tool.__init__-53"><a href="#Tool.__init__-53"><span class="linenos">53</span></a>            <span class="n">props</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;properties&quot;</span><span class="p">)</span>
</span><span id="Tool.__init__-54"><a href="#Tool.__init__-54"><span class="linenos">54</span></a>            <span class="n">required_fields</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;required&quot;</span><span class="p">,</span> <span class="p">[]))</span>
</span><span id="Tool.__init__-55"><a href="#Tool.__init__-55"><span class="linenos">55</span></a>            <span class="n">param_objs</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">Parameter</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="Tool.__init__-56"><a href="#Tool.__init__-56"><span class="linenos">56</span></a>            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">props</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Tool.__init__-57"><a href="#Tool.__init__-57"><span class="linenos">57</span></a>                <span class="n">param_objs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="Tool.__init__-58"><a href="#Tool.__init__-58"><span class="linenos">58</span></a>                    <span class="n">parse_json_schema_to_parameter</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">required_fields</span><span class="p">)</span>
</span><span id="Tool.__init__-59"><a href="#Tool.__init__-59"><span class="linenos">59</span></a>                <span class="p">)</span>
</span><span id="Tool.__init__-60"><a href="#Tool.__init__-60"><span class="linenos">60</span></a>            <span class="n">parameters</span> <span class="o">=</span> <span class="n">param_objs</span>
</span><span id="Tool.__init__-61"><a href="#Tool.__init__-61"><span class="linenos">61</span></a>
</span><span id="Tool.__init__-62"><a href="#Tool.__init__-62"><span class="linenos">62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Tool.__init__-63"><a href="#Tool.__init__-63"><span class="linenos">63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_detail</span> <span class="o">=</span> <span class="n">detail</span>
</span><span id="Tool.__init__-64"><a href="#Tool.__init__-64"><span class="linenos">64</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span> <span class="o">=</span> <span class="n">parameters</span>
</span></pre></div>


            <div class="docstring"><p>Creates a new Tool instance.</p>

<p>Args:
    name: The name of the tool.
    detail: A detailed description of the tool.
    parameters: Parameters attached to this tool; a set of Parameter objects, or a dict.</p>
</div>


                            </div>
                            <div id="Tool.name" class="classattr">
                                        <input id="Tool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="Tool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Tool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Tool.name-66"><a href="#Tool.name-66"><span class="linenos">66</span></a>    <span class="nd">@property</span>
</span><span id="Tool.name-67"><a href="#Tool.name-67"><span class="linenos">67</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Tool.name-68"><a href="#Tool.name-68"><span class="linenos">68</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the tool.&quot;&quot;&quot;</span>
</span><span id="Tool.name-69"><a href="#Tool.name-69"><span class="linenos">69</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
</span></pre></div>


            <div class="docstring"><p>Get the name of the tool.</p>
</div>


                            </div>
                            <div id="Tool.detail" class="classattr">
                                        <input id="Tool.detail-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">detail</span><span class="annotation">: str</span>

                <label class="view-source-button" for="Tool.detail-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Tool.detail"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Tool.detail-71"><a href="#Tool.detail-71"><span class="linenos">71</span></a>    <span class="nd">@property</span>
</span><span id="Tool.detail-72"><a href="#Tool.detail-72"><span class="linenos">72</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">detail</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Tool.detail-73"><a href="#Tool.detail-73"><span class="linenos">73</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the detailed description for this tool.&quot;&quot;&quot;</span>
</span><span id="Tool.detail-74"><a href="#Tool.detail-74"><span class="linenos">74</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_detail</span>
</span></pre></div>


            <div class="docstring"><p>Returns the detailed description for this tool.</p>
</div>


                            </div>
                            <div id="Tool.parameters" class="classattr">
                                        <input id="Tool.parameters-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">parameters</span><span class="annotation">: Optional[Set[<a href="#Parameter">Parameter</a>]]</span>

                <label class="view-source-button" for="Tool.parameters-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Tool.parameters"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Tool.parameters-76"><a href="#Tool.parameters-76"><span class="linenos">76</span></a>    <span class="nd">@property</span>
</span><span id="Tool.parameters-77"><a href="#Tool.parameters-77"><span class="linenos">77</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="n">Parameter</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Tool.parameters-78"><a href="#Tool.parameters-78"><span class="linenos">78</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the parameters attached to this tool (if any).&quot;&quot;&quot;</span>
</span><span id="Tool.parameters-79"><a href="#Tool.parameters-79"><span class="linenos">79</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span>
</span></pre></div>


            <div class="docstring"><p>Gets the parameters attached to this tool (if any).</p>
</div>


                            </div>
                            <div id="Tool.from_function" class="classattr">
                                        <input id="Tool.from_function-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_function</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">cls</span>,</span><span class="param">	<span class="n">func</span><span class="p">:</span> <span class="n">Callable</span>,</span><span class="param">	<span class="o">/</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">details</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">params</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">pydantic</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">BaseModel</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Set</span><span class="p">[</span><span class="n"><a href="#Parameter">Parameter</a></span><span class="p">],</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Tool.from_function-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Tool.from_function"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Tool.from_function-87"><a href="#Tool.from_function-87"><span class="linenos"> 87</span></a>    <span class="nd">@classmethod</span>
</span><span id="Tool.from_function-88"><a href="#Tool.from_function-88"><span class="linenos"> 88</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_function</span><span class="p">(</span>
</span><span id="Tool.from_function-89"><a href="#Tool.from_function-89"><span class="linenos"> 89</span></a>        <span class="bp">cls</span><span class="p">,</span>
</span><span id="Tool.from_function-90"><a href="#Tool.from_function-90"><span class="linenos"> 90</span></a>        <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
</span><span id="Tool.from_function-91"><a href="#Tool.from_function-91"><span class="linenos"> 91</span></a>        <span class="o">/</span><span class="p">,</span>
</span><span id="Tool.from_function-92"><a href="#Tool.from_function-92"><span class="linenos"> 92</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Tool.from_function-93"><a href="#Tool.from_function-93"><span class="linenos"> 93</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Tool.from_function-94"><a href="#Tool.from_function-94"><span class="linenos"> 94</span></a>        <span class="n">details</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Tool.from_function-95"><a href="#Tool.from_function-95"><span class="linenos"> 95</span></a>        <span class="n">params</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]</span> <span class="o">|</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="n">Set</span><span class="p">[</span><span class="n">Parameter</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Tool.from_function-96"><a href="#Tool.from_function-96"><span class="linenos"> 96</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Tool.from_function-97"><a href="#Tool.from_function-97"><span class="linenos"> 97</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Tool.from_function-98"><a href="#Tool.from_function-98"><span class="linenos"> 98</span></a><span class="sd">        Creates a Tool from a Python callable.</span>
</span><span id="Tool.from_function-99"><a href="#Tool.from_function-99"><span class="linenos"> 99</span></a><span class="sd">        Uses the function&#39;s docstring and type annotations to extract details and parameter info.</span>
</span><span id="Tool.from_function-100"><a href="#Tool.from_function-100"><span class="linenos">100</span></a>
</span><span id="Tool.from_function-101"><a href="#Tool.from_function-101"><span class="linenos">101</span></a><span class="sd">        KEY NOTE: No checking is done to ensure that the inserted params match the function signature</span>
</span><span id="Tool.from_function-102"><a href="#Tool.from_function-102"><span class="linenos">102</span></a>
</span><span id="Tool.from_function-103"><a href="#Tool.from_function-103"><span class="linenos">103</span></a><span class="sd">        Args:</span>
</span><span id="Tool.from_function-104"><a href="#Tool.from_function-104"><span class="linenos">104</span></a><span class="sd">            func: The function to create a tool from.</span>
</span><span id="Tool.from_function-105"><a href="#Tool.from_function-105"><span class="linenos">105</span></a><span class="sd">            name: Optional name for the tool. If not provided, uses the function&#39;s name.</span>
</span><span id="Tool.from_function-106"><a href="#Tool.from_function-106"><span class="linenos">106</span></a><span class="sd">            details: Optional detailed description for the tool. If not provided, extracts from the function&#39;s docstring.</span>
</span><span id="Tool.from_function-107"><a href="#Tool.from_function-107"><span class="linenos">107</span></a><span class="sd">            params: Optional parameters for the tool. If not provided, infers from the function&#39;s signature and docstring.</span>
</span><span id="Tool.from_function-108"><a href="#Tool.from_function-108"><span class="linenos">108</span></a>
</span><span id="Tool.from_function-109"><a href="#Tool.from_function-109"><span class="linenos">109</span></a><span class="sd">        Returns:</span>
</span><span id="Tool.from_function-110"><a href="#Tool.from_function-110"><span class="linenos">110</span></a><span class="sd">            A Tool instance representing the function.</span>
</span><span id="Tool.from_function-111"><a href="#Tool.from_function-111"><span class="linenos">111</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Tool.from_function-112"><a href="#Tool.from_function-112"><span class="linenos">112</span></a>        <span class="c1"># TODO: add set verification to ensure that the params match the function signature</span>
</span><span id="Tool.from_function-113"><a href="#Tool.from_function-113"><span class="linenos">113</span></a>        <span class="c1"># Check if the function is a method in a class</span>
</span><span id="Tool.from_function-114"><a href="#Tool.from_function-114"><span class="linenos">114</span></a>        <span class="n">in_class</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__qualname__</span> <span class="ow">and</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">func</span><span class="o">.</span><span class="vm">__qualname__</span><span class="p">)</span>
</span><span id="Tool.from_function-115"><a href="#Tool.from_function-115"><span class="linenos">115</span></a>
</span><span id="Tool.from_function-116"><a href="#Tool.from_function-116"><span class="linenos">116</span></a>        <span class="c1"># Parse the docstring to get parameter descriptions</span>
</span><span id="Tool.from_function-117"><a href="#Tool.from_function-117"><span class="linenos">117</span></a>        <span class="n">arg_descriptions</span> <span class="o">=</span> <span class="n">parse_docstring_args</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__doc__</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="Tool.from_function-118"><a href="#Tool.from_function-118"><span class="linenos">118</span></a>
</span><span id="Tool.from_function-119"><a href="#Tool.from_function-119"><span class="linenos">119</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="Tool.from_function-120"><a href="#Tool.from_function-120"><span class="linenos">120</span></a>            <span class="c1"># Get the function signature</span>
</span><span id="Tool.from_function-121"><a href="#Tool.from_function-121"><span class="linenos">121</span></a>            <span class="n">signature</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span><span id="Tool.from_function-122"><a href="#Tool.from_function-122"><span class="linenos">122</span></a>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="Tool.from_function-123"><a href="#Tool.from_function-123"><span class="linenos">123</span></a>            <span class="k">raise</span> <span class="n">ToolCreationError</span><span class="p">(</span>
</span><span id="Tool.from_function-124"><a href="#Tool.from_function-124"><span class="linenos">124</span></a>                <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Cannot convert kwargs for builtin functions.&quot;</span><span class="p">,</span>
</span><span id="Tool.from_function-125"><a href="#Tool.from_function-125"><span class="linenos">125</span></a>                <span class="n">notes</span><span class="o">=</span><span class="p">[</span>
</span><span id="Tool.from_function-126"><a href="#Tool.from_function-126"><span class="linenos">126</span></a>                    <span class="s2">&quot;Please use a cutom made function.&quot;</span><span class="p">,</span>
</span><span id="Tool.from_function-127"><a href="#Tool.from_function-127"><span class="linenos">127</span></a>                    <span class="s2">&quot;Eg.- </span><span class="se">\n</span><span class="s2">def my_custom_function(a: int, b: str):</span><span class="se">\n</span><span class="s2">    pass&quot;</span><span class="p">,</span>
</span><span id="Tool.from_function-128"><a href="#Tool.from_function-128"><span class="linenos">128</span></a>                <span class="p">],</span>
</span><span id="Tool.from_function-129"><a href="#Tool.from_function-129"><span class="linenos">129</span></a>            <span class="p">)</span>
</span><span id="Tool.from_function-130"><a href="#Tool.from_function-130"><span class="linenos">130</span></a>
</span><span id="Tool.from_function-131"><a href="#Tool.from_function-131"><span class="linenos">131</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Tool.from_function-132"><a href="#Tool.from_function-132"><span class="linenos">132</span></a>            <span class="c1"># TODO: add some checking here to ensure that the name is valid snake case.</span>
</span><span id="Tool.from_function-133"><a href="#Tool.from_function-133"><span class="linenos">133</span></a>            <span class="n">function_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Tool.from_function-134"><a href="#Tool.from_function-134"><span class="linenos">134</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Tool.from_function-135"><a href="#Tool.from_function-135"><span class="linenos">135</span></a>            <span class="n">function_name</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="Tool.from_function-136"><a href="#Tool.from_function-136"><span class="linenos">136</span></a>
</span><span id="Tool.from_function-137"><a href="#Tool.from_function-137"><span class="linenos">137</span></a>        <span class="n">docstring</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__doc__</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">if</span> <span class="n">func</span><span class="o">.</span><span class="vm">__doc__</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
</span><span id="Tool.from_function-138"><a href="#Tool.from_function-138"><span class="linenos">138</span></a>
</span><span id="Tool.from_function-139"><a href="#Tool.from_function-139"><span class="linenos">139</span></a>        <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Tool.from_function-140"><a href="#Tool.from_function-140"><span class="linenos">140</span></a>            <span class="n">parameters</span> <span class="o">=</span> <span class="n">params</span>
</span><span id="Tool.from_function-141"><a href="#Tool.from_function-141"><span class="linenos">141</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Tool.from_function-142"><a href="#Tool.from_function-142"><span class="linenos">142</span></a>            <span class="c1"># Check for multiple Args sections (warning)</span>
</span><span id="Tool.from_function-143"><a href="#Tool.from_function-143"><span class="linenos">143</span></a>            <span class="c1"># Only need to do this if we need to.</span>
</span><span id="Tool.from_function-144"><a href="#Tool.from_function-144"><span class="linenos">144</span></a>            <span class="k">if</span> <span class="n">docstring</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;Args:&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="Tool.from_function-145"><a href="#Tool.from_function-145"><span class="linenos">145</span></a>                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Multiple &#39;Args:&#39; sections found in the docstring.&quot;</span><span class="p">)</span>
</span><span id="Tool.from_function-146"><a href="#Tool.from_function-146"><span class="linenos">146</span></a>            <span class="c1"># Create parameter handlers</span>
</span><span id="Tool.from_function-147"><a href="#Tool.from_function-147"><span class="linenos">147</span></a>            <span class="n">handlers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ParameterHandler</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="Tool.from_function-148"><a href="#Tool.from_function-148"><span class="linenos">148</span></a>                <span class="n">PydanticModelHandler</span><span class="p">(),</span>
</span><span id="Tool.from_function-149"><a href="#Tool.from_function-149"><span class="linenos">149</span></a>                <span class="n">SequenceParameterHandler</span><span class="p">(),</span>
</span><span id="Tool.from_function-150"><a href="#Tool.from_function-150"><span class="linenos">150</span></a>                <span class="n">UnionParameterHandler</span><span class="p">(),</span>
</span><span id="Tool.from_function-151"><a href="#Tool.from_function-151"><span class="linenos">151</span></a>                <span class="n">DefaultParameterHandler</span><span class="p">(),</span>
</span><span id="Tool.from_function-152"><a href="#Tool.from_function-152"><span class="linenos">152</span></a>            <span class="p">]</span>
</span><span id="Tool.from_function-153"><a href="#Tool.from_function-153"><span class="linenos">153</span></a>
</span><span id="Tool.from_function-154"><a href="#Tool.from_function-154"><span class="linenos">154</span></a>            <span class="n">parameters</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">Parameter</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="Tool.from_function-155"><a href="#Tool.from_function-155"><span class="linenos">155</span></a>
</span><span id="Tool.from_function-156"><a href="#Tool.from_function-156"><span class="linenos">156</span></a>            <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">signature</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="Tool.from_function-157"><a href="#Tool.from_function-157"><span class="linenos">157</span></a>                <span class="c1"># Skip &#39;self&#39; parameter for class methods</span>
</span><span id="Tool.from_function-158"><a href="#Tool.from_function-158"><span class="linenos">158</span></a>                <span class="k">if</span> <span class="n">in_class</span> <span class="ow">and</span> <span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;self&quot;</span> <span class="ow">or</span> <span class="n">param</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;cls&quot;</span><span class="p">):</span>
</span><span id="Tool.from_function-159"><a href="#Tool.from_function-159"><span class="linenos">159</span></a>                    <span class="k">continue</span>
</span><span id="Tool.from_function-160"><a href="#Tool.from_function-160"><span class="linenos">160</span></a>
</span><span id="Tool.from_function-161"><a href="#Tool.from_function-161"><span class="linenos">161</span></a>                <span class="n">description</span> <span class="o">=</span> <span class="n">arg_descriptions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="Tool.from_function-162"><a href="#Tool.from_function-162"><span class="linenos">162</span></a>
</span><span id="Tool.from_function-163"><a href="#Tool.from_function-163"><span class="linenos">163</span></a>                <span class="c1"># Check if the parameter is required</span>
</span><span id="Tool.from_function-164"><a href="#Tool.from_function-164"><span class="linenos">164</span></a>                <span class="n">required</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">default</span> <span class="o">==</span> <span class="n">inspect</span><span class="o">.</span><span class="n">Parameter</span><span class="o">.</span><span class="n">empty</span>
</span><span id="Tool.from_function-165"><a href="#Tool.from_function-165"><span class="linenos">165</span></a>
</span><span id="Tool.from_function-166"><a href="#Tool.from_function-166"><span class="linenos">166</span></a>                <span class="n">handler</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">h</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">handlers</span> <span class="k">if</span> <span class="n">h</span><span class="o">.</span><span class="n">can_handle</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">annotation</span><span class="p">))</span>
</span><span id="Tool.from_function-167"><a href="#Tool.from_function-167"><span class="linenos">167</span></a>
</span><span id="Tool.from_function-168"><a href="#Tool.from_function-168"><span class="linenos">168</span></a>                <span class="n">param_obj</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">create_parameter</span><span class="p">(</span>
</span><span id="Tool.from_function-169"><a href="#Tool.from_function-169"><span class="linenos">169</span></a>                    <span class="n">param</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">param</span><span class="o">.</span><span class="n">annotation</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">required</span>
</span><span id="Tool.from_function-170"><a href="#Tool.from_function-170"><span class="linenos">170</span></a>                <span class="p">)</span>
</span><span id="Tool.from_function-171"><a href="#Tool.from_function-171"><span class="linenos">171</span></a>
</span><span id="Tool.from_function-172"><a href="#Tool.from_function-172"><span class="linenos">172</span></a>                <span class="n">parameters</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">param_obj</span><span class="p">)</span>
</span><span id="Tool.from_function-173"><a href="#Tool.from_function-173"><span class="linenos">173</span></a>
</span><span id="Tool.from_function-174"><a href="#Tool.from_function-174"><span class="linenos">174</span></a>        <span class="k">if</span> <span class="n">details</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Tool.from_function-175"><a href="#Tool.from_function-175"><span class="linenos">175</span></a>            <span class="n">main_description</span> <span class="o">=</span> <span class="n">details</span>
</span><span id="Tool.from_function-176"><a href="#Tool.from_function-176"><span class="linenos">176</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Tool.from_function-177"><a href="#Tool.from_function-177"><span class="linenos">177</span></a>            <span class="n">main_description</span> <span class="o">=</span> <span class="n">extract_main_description</span><span class="p">(</span><span class="n">docstring</span><span class="p">)</span>
</span><span id="Tool.from_function-178"><a href="#Tool.from_function-178"><span class="linenos">178</span></a>
</span><span id="Tool.from_function-179"><a href="#Tool.from_function-179"><span class="linenos">179</span></a>        <span class="n">tool_info</span> <span class="o">=</span> <span class="n">Tool</span><span class="p">(</span>
</span><span id="Tool.from_function-180"><a href="#Tool.from_function-180"><span class="linenos">180</span></a>            <span class="n">name</span><span class="o">=</span><span class="n">function_name</span><span class="p">,</span>
</span><span id="Tool.from_function-181"><a href="#Tool.from_function-181"><span class="linenos">181</span></a>            <span class="n">detail</span><span class="o">=</span><span class="n">main_description</span><span class="p">,</span>
</span><span id="Tool.from_function-182"><a href="#Tool.from_function-182"><span class="linenos">182</span></a>            <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
</span><span id="Tool.from_function-183"><a href="#Tool.from_function-183"><span class="linenos">183</span></a>        <span class="p">)</span>
</span><span id="Tool.from_function-184"><a href="#Tool.from_function-184"><span class="linenos">184</span></a>        <span class="k">return</span> <span class="n">tool_info</span>
</span></pre></div>


            <div class="docstring"><p>Creates a Tool from a Python callable.
Uses the function's docstring and type annotations to extract details and parameter info.</p>

<p>KEY NOTE: No checking is done to ensure that the inserted params match the function signature</p>

<p>Args:
    func: The function to create a tool from.
    name: Optional name for the tool. If not provided, uses the function's name.
    details: Optional detailed description for the tool. If not provided, extracts from the function's docstring.
    params: Optional parameters for the tool. If not provided, infers from the function's signature and docstring.</p>

<p>Returns:
    A Tool instance representing the function.</p>
</div>


                            </div>
                            <div id="Tool.from_mcp" class="classattr">
                                        <input id="Tool.from_mcp-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_mcp</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">tool</span></span><span class="return-annotation">) -> <span class="n">typing_extensions</span><span class="o">.</span><span class="n">Self</span>:</span></span>

                <label class="view-source-button" for="Tool.from_mcp-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Tool.from_mcp"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Tool.from_mcp-186"><a href="#Tool.from_mcp-186"><span class="linenos">186</span></a>    <span class="nd">@classmethod</span>
</span><span id="Tool.from_mcp-187"><a href="#Tool.from_mcp-187"><span class="linenos">187</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_mcp</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="Tool.from_mcp-188"><a href="#Tool.from_mcp-188"><span class="linenos">188</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Tool.from_mcp-189"><a href="#Tool.from_mcp-189"><span class="linenos">189</span></a><span class="sd">        Creates a Tool from an MCP tool object.</span>
</span><span id="Tool.from_mcp-190"><a href="#Tool.from_mcp-190"><span class="linenos">190</span></a>
</span><span id="Tool.from_mcp-191"><a href="#Tool.from_mcp-191"><span class="linenos">191</span></a><span class="sd">        Args:</span>
</span><span id="Tool.from_mcp-192"><a href="#Tool.from_mcp-192"><span class="linenos">192</span></a><span class="sd">            tool: The MCP tool to create a Tool from.</span>
</span><span id="Tool.from_mcp-193"><a href="#Tool.from_mcp-193"><span class="linenos">193</span></a>
</span><span id="Tool.from_mcp-194"><a href="#Tool.from_mcp-194"><span class="linenos">194</span></a><span class="sd">        Returns:</span>
</span><span id="Tool.from_mcp-195"><a href="#Tool.from_mcp-195"><span class="linenos">195</span></a><span class="sd">            A Tool instance representing the MCP tool.</span>
</span><span id="Tool.from_mcp-196"><a href="#Tool.from_mcp-196"><span class="linenos">196</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Tool.from_mcp-197"><a href="#Tool.from_mcp-197"><span class="linenos">197</span></a>        <span class="n">input_schema</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="s2">&quot;inputSchema&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Tool.from_mcp-198"><a href="#Tool.from_mcp-198"><span class="linenos">198</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">input_schema</span> <span class="ow">or</span> <span class="n">input_schema</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span>
</span><span id="Tool.from_mcp-199"><a href="#Tool.from_mcp-199"><span class="linenos">199</span></a>            <span class="k">raise</span> <span class="n">ToolCreationError</span><span class="p">(</span>
</span><span id="Tool.from_mcp-200"><a href="#Tool.from_mcp-200"><span class="linenos">200</span></a>                <span class="n">message</span><span class="o">=</span><span class="s2">&quot;The inputSchema for an MCP Tool must be &#39;object&#39;. &quot;</span><span class="p">,</span>
</span><span id="Tool.from_mcp-201"><a href="#Tool.from_mcp-201"><span class="linenos">201</span></a>                <span class="n">notes</span><span class="o">=</span><span class="p">[</span>
</span><span id="Tool.from_mcp-202"><a href="#Tool.from_mcp-202"><span class="linenos">202</span></a>                    <span class="s2">&quot;If an MCP tool has a different output_schema, create a GitHub issue and support will be added.&quot;</span>
</span><span id="Tool.from_mcp-203"><a href="#Tool.from_mcp-203"><span class="linenos">203</span></a>                <span class="p">],</span>
</span><span id="Tool.from_mcp-204"><a href="#Tool.from_mcp-204"><span class="linenos">204</span></a>            <span class="p">)</span>
</span><span id="Tool.from_mcp-205"><a href="#Tool.from_mcp-205"><span class="linenos">205</span></a>
</span><span id="Tool.from_mcp-206"><a href="#Tool.from_mcp-206"><span class="linenos">206</span></a>        <span class="n">properties</span> <span class="o">=</span> <span class="n">input_schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;properties&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="Tool.from_mcp-207"><a href="#Tool.from_mcp-207"><span class="linenos">207</span></a>        <span class="n">required_fields</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">input_schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;required&quot;</span><span class="p">,</span> <span class="p">[]))</span>
</span><span id="Tool.from_mcp-208"><a href="#Tool.from_mcp-208"><span class="linenos">208</span></a>        <span class="n">param_objs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="Tool.from_mcp-209"><a href="#Tool.from_mcp-209"><span class="linenos">209</span></a>        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Tool.from_mcp-210"><a href="#Tool.from_mcp-210"><span class="linenos">210</span></a>            <span class="n">required</span> <span class="o">=</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">required_fields</span>
</span><span id="Tool.from_mcp-211"><a href="#Tool.from_mcp-211"><span class="linenos">211</span></a>            <span class="n">param_objs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">parse_json_schema_to_parameter</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">required</span><span class="p">))</span>
</span><span id="Tool.from_mcp-212"><a href="#Tool.from_mcp-212"><span class="linenos">212</span></a>
</span><span id="Tool.from_mcp-213"><a href="#Tool.from_mcp-213"><span class="linenos">213</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">tool</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="n">tool</span><span class="o">.</span><span class="n">description</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">param_objs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Creates a Tool from an MCP tool object.</p>

<p>Args:
    tool: The MCP tool to create a Tool from.</p>

<p>Returns:
    A Tool instance representing the MCP tool.</p>
</div>


                            </div>
                </section>
                <section id="Parameter">
                            <input id="Parameter-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Parameter</span>:

                <label class="view-source-button" for="Parameter-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameter"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameter-39"><a href="#Parameter-39"><span class="linenos"> 39</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Parameter</span><span class="p">:</span>
</span><span id="Parameter-40"><a href="#Parameter-40"><span class="linenos"> 40</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for representing a tool parameter.&quot;&quot;&quot;</span>
</span><span id="Parameter-41"><a href="#Parameter-41"><span class="linenos"> 41</span></a>
</span><span id="Parameter-42"><a href="#Parameter-42"><span class="linenos"> 42</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Parameter-43"><a href="#Parameter-43"><span class="linenos"> 43</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Parameter-44"><a href="#Parameter-44"><span class="linenos"> 44</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Parameter-45"><a href="#Parameter-45"><span class="linenos"> 45</span></a>        <span class="n">param_type</span><span class="p">:</span> <span class="n">ParameterType</span>
</span><span id="Parameter-46"><a href="#Parameter-46"><span class="linenos"> 46</span></a>        <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ParameterType</span><span class="p">]</span>
</span><span id="Parameter-47"><a href="#Parameter-47"><span class="linenos"> 47</span></a>        <span class="o">|</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="s2">&quot;boolean&quot;</span><span class="p">,</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;null&quot;</span><span class="p">],</span>
</span><span id="Parameter-48"><a href="#Parameter-48"><span class="linenos"> 48</span></a>        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Parameter-49"><a href="#Parameter-49"><span class="linenos"> 49</span></a>        <span class="n">required</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="Parameter-50"><a href="#Parameter-50"><span class="linenos"> 50</span></a>        <span class="n">additional_properties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Parameter-51"><a href="#Parameter-51"><span class="linenos"> 51</span></a>        <span class="n">enum</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parameter-52"><a href="#Parameter-52"><span class="linenos"> 52</span></a>        <span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parameter-53"><a href="#Parameter-53"><span class="linenos"> 53</span></a>    <span class="p">):</span>
</span><span id="Parameter-54"><a href="#Parameter-54"><span class="linenos"> 54</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Parameter-55"><a href="#Parameter-55"><span class="linenos"> 55</span></a><span class="sd">        Creates a new instance of a parameter object.</span>
</span><span id="Parameter-56"><a href="#Parameter-56"><span class="linenos"> 56</span></a>
</span><span id="Parameter-57"><a href="#Parameter-57"><span class="linenos"> 57</span></a><span class="sd">        Args:</span>
</span><span id="Parameter-58"><a href="#Parameter-58"><span class="linenos"> 58</span></a><span class="sd">            name: The name of the parameter.</span>
</span><span id="Parameter-59"><a href="#Parameter-59"><span class="linenos"> 59</span></a><span class="sd">            param_type: The type of the parameter.</span>
</span><span id="Parameter-60"><a href="#Parameter-60"><span class="linenos"> 60</span></a><span class="sd">            description: A description of the parameter.</span>
</span><span id="Parameter-61"><a href="#Parameter-61"><span class="linenos"> 61</span></a><span class="sd">            required: Whether the parameter is required. Defaults to True.</span>
</span><span id="Parameter-62"><a href="#Parameter-62"><span class="linenos"> 62</span></a><span class="sd">            additional_properties: Whether to allow additional properties for object types. Defaults to False.</span>
</span><span id="Parameter-63"><a href="#Parameter-63"><span class="linenos"> 63</span></a><span class="sd">            enum: The enum values for the parameter.</span>
</span><span id="Parameter-64"><a href="#Parameter-64"><span class="linenos"> 64</span></a><span class="sd">            default: The default value for the parameter.</span>
</span><span id="Parameter-65"><a href="#Parameter-65"><span class="linenos"> 65</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parameter-66"><a href="#Parameter-66"><span class="linenos"> 66</span></a>        <span class="c1"># catch any input strings here.</span>
</span><span id="Parameter-67"><a href="#Parameter-67"><span class="linenos"> 67</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="Parameter-68"><a href="#Parameter-68"><span class="linenos"> 68</span></a>            <span class="n">param_type</span> <span class="o">=</span> <span class="n">ParameterType</span><span class="p">(</span><span class="n">param_type</span><span class="p">)</span>
</span><span id="Parameter-69"><a href="#Parameter-69"><span class="linenos"> 69</span></a>
</span><span id="Parameter-70"><a href="#Parameter-70"><span class="linenos"> 70</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Parameter-71"><a href="#Parameter-71"><span class="linenos"> 71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_param_type</span> <span class="o">=</span> <span class="n">param_type</span>
</span><span id="Parameter-72"><a href="#Parameter-72"><span class="linenos"> 72</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
</span><span id="Parameter-73"><a href="#Parameter-73"><span class="linenos"> 73</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_required</span> <span class="o">=</span> <span class="n">required</span>
</span><span id="Parameter-74"><a href="#Parameter-74"><span class="linenos"> 74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_additional_properties</span> <span class="o">=</span> <span class="n">additional_properties</span>
</span><span id="Parameter-75"><a href="#Parameter-75"><span class="linenos"> 75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_enum</span> <span class="o">=</span> <span class="n">enum</span>
</span><span id="Parameter-76"><a href="#Parameter-76"><span class="linenos"> 76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_default</span> <span class="o">=</span> <span class="n">default</span>
</span><span id="Parameter-77"><a href="#Parameter-77"><span class="linenos"> 77</span></a>
</span><span id="Parameter-78"><a href="#Parameter-78"><span class="linenos"> 78</span></a>    <span class="nd">@property</span>
</span><span id="Parameter-79"><a href="#Parameter-79"><span class="linenos"> 79</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">enum</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]:</span>
</span><span id="Parameter-80"><a href="#Parameter-80"><span class="linenos"> 80</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the enum values for the parameter, if any.&quot;&quot;&quot;</span>
</span><span id="Parameter-81"><a href="#Parameter-81"><span class="linenos"> 81</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enum</span>
</span><span id="Parameter-82"><a href="#Parameter-82"><span class="linenos"> 82</span></a>
</span><span id="Parameter-83"><a href="#Parameter-83"><span class="linenos"> 83</span></a>    <span class="nd">@property</span>
</span><span id="Parameter-84"><a href="#Parameter-84"><span class="linenos"> 84</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="Parameter-85"><a href="#Parameter-85"><span class="linenos"> 85</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the default value for the parameter, if any.&quot;&quot;&quot;</span>
</span><span id="Parameter-86"><a href="#Parameter-86"><span class="linenos"> 86</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span>
</span><span id="Parameter-87"><a href="#Parameter-87"><span class="linenos"> 87</span></a>
</span><span id="Parameter-88"><a href="#Parameter-88"><span class="linenos"> 88</span></a>    <span class="nd">@property</span>
</span><span id="Parameter-89"><a href="#Parameter-89"><span class="linenos"> 89</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Parameter-90"><a href="#Parameter-90"><span class="linenos"> 90</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the parameter.&quot;&quot;&quot;</span>
</span><span id="Parameter-91"><a href="#Parameter-91"><span class="linenos"> 91</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
</span><span id="Parameter-92"><a href="#Parameter-92"><span class="linenos"> 92</span></a>
</span><span id="Parameter-93"><a href="#Parameter-93"><span class="linenos"> 93</span></a>    <span class="nd">@property</span>
</span><span id="Parameter-94"><a href="#Parameter-94"><span class="linenos"> 94</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">param_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="Parameter-95"><a href="#Parameter-95"><span class="linenos"> 95</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the type of the parameter.&quot;&quot;&quot;</span>
</span><span id="Parameter-96"><a href="#Parameter-96"><span class="linenos"> 96</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_param_type</span>
</span><span id="Parameter-97"><a href="#Parameter-97"><span class="linenos"> 97</span></a>
</span><span id="Parameter-98"><a href="#Parameter-98"><span class="linenos"> 98</span></a>    <span class="nd">@property</span>
</span><span id="Parameter-99"><a href="#Parameter-99"><span class="linenos"> 99</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Parameter-100"><a href="#Parameter-100"><span class="linenos">100</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the description of the parameter.&quot;&quot;&quot;</span>
</span><span id="Parameter-101"><a href="#Parameter-101"><span class="linenos">101</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_description</span>
</span><span id="Parameter-102"><a href="#Parameter-102"><span class="linenos">102</span></a>
</span><span id="Parameter-103"><a href="#Parameter-103"><span class="linenos">103</span></a>    <span class="nd">@property</span>
</span><span id="Parameter-104"><a href="#Parameter-104"><span class="linenos">104</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">required</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Parameter-105"><a href="#Parameter-105"><span class="linenos">105</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the parameter is required.&quot;&quot;&quot;</span>
</span><span id="Parameter-106"><a href="#Parameter-106"><span class="linenos">106</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_required</span>
</span><span id="Parameter-107"><a href="#Parameter-107"><span class="linenos">107</span></a>
</span><span id="Parameter-108"><a href="#Parameter-108"><span class="linenos">108</span></a>    <span class="nd">@property</span>
</span><span id="Parameter-109"><a href="#Parameter-109"><span class="linenos">109</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">additional_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Parameter-110"><a href="#Parameter-110"><span class="linenos">110</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if additional properties are allowed for object types.&quot;&quot;&quot;</span>
</span><span id="Parameter-111"><a href="#Parameter-111"><span class="linenos">111</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_additional_properties</span>
</span><span id="Parameter-112"><a href="#Parameter-112"><span class="linenos">112</span></a>
</span><span id="Parameter-113"><a href="#Parameter-113"><span class="linenos">113</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Parameter-114"><a href="#Parameter-114"><span class="linenos">114</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;String representation of the parameter.&quot;&quot;&quot;</span>
</span><span id="Parameter-115"><a href="#Parameter-115"><span class="linenos">115</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="Parameter-116"><a href="#Parameter-116"><span class="linenos">116</span></a>            <span class="sa">f</span><span class="s2">&quot;Parameter(name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="si">}</span><span class="s2">, type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_param_type</span><span class="si">}</span><span class="s2">, &quot;</span>
</span><span id="Parameter-117"><a href="#Parameter-117"><span class="linenos">117</span></a>            <span class="sa">f</span><span class="s2">&quot;description=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_description</span><span class="si">}</span><span class="s2">, required=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_required</span><span class="si">}</span><span class="s2">, &quot;</span>
</span><span id="Parameter-118"><a href="#Parameter-118"><span class="linenos">118</span></a>            <span class="sa">f</span><span class="s2">&quot;additional_properties=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_additional_properties</span><span class="si">}</span><span class="s2">, &quot;</span>
</span><span id="Parameter-119"><a href="#Parameter-119"><span class="linenos">119</span></a>            <span class="sa">f</span><span class="s2">&quot;enum=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_enum</span><span class="si">}</span><span class="s2">, &quot;</span>
</span><span id="Parameter-120"><a href="#Parameter-120"><span class="linenos">120</span></a>            <span class="sa">f</span><span class="s2">&quot;default=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_default</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="Parameter-121"><a href="#Parameter-121"><span class="linenos">121</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Base class for representing a tool parameter.</p>
</div>


                            <div id="Parameter.__init__" class="classattr">
                                        <input id="Parameter.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Parameter</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">param_type</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">railtracks</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">parameter</span><span class="o">.</span><span class="n">ParameterType</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">railtracks</span><span class="o">.</span><span class="n">llm</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">parameter</span><span class="o">.</span><span class="n">ParameterType</span><span class="p">],</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span> <span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;array&#39;</span><span class="p">,</span> <span class="s1">&#39;object&#39;</span><span class="p">,</span> <span class="s1">&#39;null&#39;</span><span class="p">]]</span>,</span><span class="param">	<span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">required</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">additional_properties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">enum</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="Parameter.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameter.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameter.__init__-42"><a href="#Parameter.__init__-42"><span class="linenos">42</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="Parameter.__init__-43"><a href="#Parameter.__init__-43"><span class="linenos">43</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Parameter.__init__-44"><a href="#Parameter.__init__-44"><span class="linenos">44</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Parameter.__init__-45"><a href="#Parameter.__init__-45"><span class="linenos">45</span></a>        <span class="n">param_type</span><span class="p">:</span> <span class="n">ParameterType</span>
</span><span id="Parameter.__init__-46"><a href="#Parameter.__init__-46"><span class="linenos">46</span></a>        <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ParameterType</span><span class="p">]</span>
</span><span id="Parameter.__init__-47"><a href="#Parameter.__init__-47"><span class="linenos">47</span></a>        <span class="o">|</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="s2">&quot;boolean&quot;</span><span class="p">,</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;null&quot;</span><span class="p">],</span>
</span><span id="Parameter.__init__-48"><a href="#Parameter.__init__-48"><span class="linenos">48</span></a>        <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Parameter.__init__-49"><a href="#Parameter.__init__-49"><span class="linenos">49</span></a>        <span class="n">required</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="Parameter.__init__-50"><a href="#Parameter.__init__-50"><span class="linenos">50</span></a>        <span class="n">additional_properties</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Parameter.__init__-51"><a href="#Parameter.__init__-51"><span class="linenos">51</span></a>        <span class="n">enum</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parameter.__init__-52"><a href="#Parameter.__init__-52"><span class="linenos">52</span></a>        <span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Parameter.__init__-53"><a href="#Parameter.__init__-53"><span class="linenos">53</span></a>    <span class="p">):</span>
</span><span id="Parameter.__init__-54"><a href="#Parameter.__init__-54"><span class="linenos">54</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Parameter.__init__-55"><a href="#Parameter.__init__-55"><span class="linenos">55</span></a><span class="sd">        Creates a new instance of a parameter object.</span>
</span><span id="Parameter.__init__-56"><a href="#Parameter.__init__-56"><span class="linenos">56</span></a>
</span><span id="Parameter.__init__-57"><a href="#Parameter.__init__-57"><span class="linenos">57</span></a><span class="sd">        Args:</span>
</span><span id="Parameter.__init__-58"><a href="#Parameter.__init__-58"><span class="linenos">58</span></a><span class="sd">            name: The name of the parameter.</span>
</span><span id="Parameter.__init__-59"><a href="#Parameter.__init__-59"><span class="linenos">59</span></a><span class="sd">            param_type: The type of the parameter.</span>
</span><span id="Parameter.__init__-60"><a href="#Parameter.__init__-60"><span class="linenos">60</span></a><span class="sd">            description: A description of the parameter.</span>
</span><span id="Parameter.__init__-61"><a href="#Parameter.__init__-61"><span class="linenos">61</span></a><span class="sd">            required: Whether the parameter is required. Defaults to True.</span>
</span><span id="Parameter.__init__-62"><a href="#Parameter.__init__-62"><span class="linenos">62</span></a><span class="sd">            additional_properties: Whether to allow additional properties for object types. Defaults to False.</span>
</span><span id="Parameter.__init__-63"><a href="#Parameter.__init__-63"><span class="linenos">63</span></a><span class="sd">            enum: The enum values for the parameter.</span>
</span><span id="Parameter.__init__-64"><a href="#Parameter.__init__-64"><span class="linenos">64</span></a><span class="sd">            default: The default value for the parameter.</span>
</span><span id="Parameter.__init__-65"><a href="#Parameter.__init__-65"><span class="linenos">65</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parameter.__init__-66"><a href="#Parameter.__init__-66"><span class="linenos">66</span></a>        <span class="c1"># catch any input strings here.</span>
</span><span id="Parameter.__init__-67"><a href="#Parameter.__init__-67"><span class="linenos">67</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="Parameter.__init__-68"><a href="#Parameter.__init__-68"><span class="linenos">68</span></a>            <span class="n">param_type</span> <span class="o">=</span> <span class="n">ParameterType</span><span class="p">(</span><span class="n">param_type</span><span class="p">)</span>
</span><span id="Parameter.__init__-69"><a href="#Parameter.__init__-69"><span class="linenos">69</span></a>
</span><span id="Parameter.__init__-70"><a href="#Parameter.__init__-70"><span class="linenos">70</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Parameter.__init__-71"><a href="#Parameter.__init__-71"><span class="linenos">71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_param_type</span> <span class="o">=</span> <span class="n">param_type</span>
</span><span id="Parameter.__init__-72"><a href="#Parameter.__init__-72"><span class="linenos">72</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="n">description</span>
</span><span id="Parameter.__init__-73"><a href="#Parameter.__init__-73"><span class="linenos">73</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_required</span> <span class="o">=</span> <span class="n">required</span>
</span><span id="Parameter.__init__-74"><a href="#Parameter.__init__-74"><span class="linenos">74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_additional_properties</span> <span class="o">=</span> <span class="n">additional_properties</span>
</span><span id="Parameter.__init__-75"><a href="#Parameter.__init__-75"><span class="linenos">75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_enum</span> <span class="o">=</span> <span class="n">enum</span>
</span><span id="Parameter.__init__-76"><a href="#Parameter.__init__-76"><span class="linenos">76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_default</span> <span class="o">=</span> <span class="n">default</span>
</span></pre></div>


            <div class="docstring"><p>Creates a new instance of a parameter object.</p>

<p>Args:
    name: The name of the parameter.
    param_type: The type of the parameter.
    description: A description of the parameter.
    required: Whether the parameter is required. Defaults to True.
    additional_properties: Whether to allow additional properties for object types. Defaults to False.
    enum: The enum values for the parameter.
    default: The default value for the parameter.</p>
</div>


                            </div>
                            <div id="Parameter.enum" class="classattr">
                                        <input id="Parameter.enum-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">enum</span><span class="annotation">: Optional[list]</span>

                <label class="view-source-button" for="Parameter.enum-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameter.enum"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameter.enum-78"><a href="#Parameter.enum-78"><span class="linenos">78</span></a>    <span class="nd">@property</span>
</span><span id="Parameter.enum-79"><a href="#Parameter.enum-79"><span class="linenos">79</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">enum</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]:</span>
</span><span id="Parameter.enum-80"><a href="#Parameter.enum-80"><span class="linenos">80</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the enum values for the parameter, if any.&quot;&quot;&quot;</span>
</span><span id="Parameter.enum-81"><a href="#Parameter.enum-81"><span class="linenos">81</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enum</span>
</span></pre></div>


            <div class="docstring"><p>Get the enum values for the parameter, if any.</p>
</div>


                            </div>
                            <div id="Parameter.default" class="classattr">
                                        <input id="Parameter.default-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">default</span><span class="annotation">: Any</span>

                <label class="view-source-button" for="Parameter.default-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameter.default"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameter.default-83"><a href="#Parameter.default-83"><span class="linenos">83</span></a>    <span class="nd">@property</span>
</span><span id="Parameter.default-84"><a href="#Parameter.default-84"><span class="linenos">84</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="Parameter.default-85"><a href="#Parameter.default-85"><span class="linenos">85</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the default value for the parameter, if any.&quot;&quot;&quot;</span>
</span><span id="Parameter.default-86"><a href="#Parameter.default-86"><span class="linenos">86</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span>
</span></pre></div>


            <div class="docstring"><p>Get the default value for the parameter, if any.</p>
</div>


                            </div>
                            <div id="Parameter.name" class="classattr">
                                        <input id="Parameter.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="Parameter.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameter.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameter.name-88"><a href="#Parameter.name-88"><span class="linenos">88</span></a>    <span class="nd">@property</span>
</span><span id="Parameter.name-89"><a href="#Parameter.name-89"><span class="linenos">89</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Parameter.name-90"><a href="#Parameter.name-90"><span class="linenos">90</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the parameter.&quot;&quot;&quot;</span>
</span><span id="Parameter.name-91"><a href="#Parameter.name-91"><span class="linenos">91</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
</span></pre></div>


            <div class="docstring"><p>Get the name of the parameter.</p>
</div>


                            </div>
                            <div id="Parameter.param_type" class="classattr">
                                        <input id="Parameter.param_type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">param_type</span><span class="annotation">: str | list</span>

                <label class="view-source-button" for="Parameter.param_type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameter.param_type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameter.param_type-93"><a href="#Parameter.param_type-93"><span class="linenos">93</span></a>    <span class="nd">@property</span>
</span><span id="Parameter.param_type-94"><a href="#Parameter.param_type-94"><span class="linenos">94</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">param_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="Parameter.param_type-95"><a href="#Parameter.param_type-95"><span class="linenos">95</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the type of the parameter.&quot;&quot;&quot;</span>
</span><span id="Parameter.param_type-96"><a href="#Parameter.param_type-96"><span class="linenos">96</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_param_type</span>
</span></pre></div>


            <div class="docstring"><p>Get the type of the parameter.</p>
</div>


                            </div>
                            <div id="Parameter.description" class="classattr">
                                        <input id="Parameter.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="Parameter.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameter.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameter.description-98"><a href="#Parameter.description-98"><span class="linenos"> 98</span></a>    <span class="nd">@property</span>
</span><span id="Parameter.description-99"><a href="#Parameter.description-99"><span class="linenos"> 99</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Parameter.description-100"><a href="#Parameter.description-100"><span class="linenos">100</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the description of the parameter.&quot;&quot;&quot;</span>
</span><span id="Parameter.description-101"><a href="#Parameter.description-101"><span class="linenos">101</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_description</span>
</span></pre></div>


            <div class="docstring"><p>Get the description of the parameter.</p>
</div>


                            </div>
                            <div id="Parameter.required" class="classattr">
                                        <input id="Parameter.required-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">required</span><span class="annotation">: bool</span>

                <label class="view-source-button" for="Parameter.required-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameter.required"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameter.required-103"><a href="#Parameter.required-103"><span class="linenos">103</span></a>    <span class="nd">@property</span>
</span><span id="Parameter.required-104"><a href="#Parameter.required-104"><span class="linenos">104</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">required</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Parameter.required-105"><a href="#Parameter.required-105"><span class="linenos">105</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the parameter is required.&quot;&quot;&quot;</span>
</span><span id="Parameter.required-106"><a href="#Parameter.required-106"><span class="linenos">106</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_required</span>
</span></pre></div>


            <div class="docstring"><p>Check if the parameter is required.</p>
</div>


                            </div>
                            <div id="Parameter.additional_properties" class="classattr">
                                        <input id="Parameter.additional_properties-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">additional_properties</span><span class="annotation">: bool</span>

                <label class="view-source-button" for="Parameter.additional_properties-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parameter.additional_properties"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parameter.additional_properties-108"><a href="#Parameter.additional_properties-108"><span class="linenos">108</span></a>    <span class="nd">@property</span>
</span><span id="Parameter.additional_properties-109"><a href="#Parameter.additional_properties-109"><span class="linenos">109</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">additional_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Parameter.additional_properties-110"><a href="#Parameter.additional_properties-110"><span class="linenos">110</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if additional properties are allowed for object types.&quot;&quot;&quot;</span>
</span><span id="Parameter.additional_properties-111"><a href="#Parameter.additional_properties-111"><span class="linenos">111</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_additional_properties</span>
</span></pre></div>


            <div class="docstring"><p>Check if additional properties are allowed for object types.</p>
</div>


                            </div>
                </section>
                <section id="AnthropicLLM">
                            <input id="AnthropicLLM-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AnthropicLLM</span><wbr>(<span class="base">railtracks.llm.models.api_providers._provider_wrapper.ProviderLLMWrapper</span>):

                <label class="view-source-button" for="AnthropicLLM-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnthropicLLM"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnthropicLLM-5"><a href="#AnthropicLLM-5"><span class="linenos">5</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AnthropicLLM</span><span class="p">(</span><span class="n">ProviderLLMWrapper</span><span class="p">):</span>
</span><span id="AnthropicLLM-6"><a href="#AnthropicLLM-6"><span class="linenos">6</span></a>    <span class="nd">@classmethod</span>
</span><span id="AnthropicLLM-7"><a href="#AnthropicLLM-7"><span class="linenos">7</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">model_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AnthropicLLM-8"><a href="#AnthropicLLM-8"><span class="linenos">8</span></a>        <span class="k">return</span> <span class="s2">&quot;Anthropic&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A large base class that wraps around a litellm model.</p>

<p>Note that the model object should be interacted with via the methods provided in the wrapper class:</p>

<ul>
<li><code><a href="#AnthropicLLM.chat">chat</a></code></li>
<li><code><a href="#AnthropicLLM.structured">structured</a></code></li>
<li><code><a href="#AnthropicLLM.stream_chat">stream_chat</a></code></li>
<li><code><a href="#AnthropicLLM.chat_with_tools">chat_with_tools</a></code></li>
</ul>

<p>Each individual API should implement the required <code>abstract_methods</code> in order to allow users to interact with a
model of that type.</p>
</div>


                            <div id="AnthropicLLM.model_type" class="classattr">
                                        <input id="AnthropicLLM.model_type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">model_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="AnthropicLLM.model_type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AnthropicLLM.model_type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AnthropicLLM.model_type-6"><a href="#AnthropicLLM.model_type-6"><span class="linenos">6</span></a>    <span class="nd">@classmethod</span>
</span><span id="AnthropicLLM.model_type-7"><a href="#AnthropicLLM.model_type-7"><span class="linenos">7</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">model_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AnthropicLLM.model_type-8"><a href="#AnthropicLLM.model_type-8"><span class="linenos">8</span></a>        <span class="k">return</span> <span class="s2">&quot;Anthropic&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Returns the name of the provider</p>
</div>


                            </div>
                </section>
                <section id="OpenAILLM">
                            <input id="OpenAILLM-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">OpenAILLM</span><wbr>(<span class="base">railtracks.llm.models.api_providers._provider_wrapper.ProviderLLMWrapper</span>):

                <label class="view-source-button" for="OpenAILLM-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OpenAILLM"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OpenAILLM-5"><a href="#OpenAILLM-5"><span class="linenos"> 5</span></a><span class="k">class</span><span class="w"> </span><span class="nc">OpenAILLM</span><span class="p">(</span><span class="n">ProviderLLMWrapper</span><span class="p">):</span>
</span><span id="OpenAILLM-6"><a href="#OpenAILLM-6"><span class="linenos"> 6</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="OpenAILLM-7"><a href="#OpenAILLM-7"><span class="linenos"> 7</span></a><span class="sd">    A wrapper that provides access to the OPENAI API.</span>
</span><span id="OpenAILLM-8"><a href="#OpenAILLM-8"><span class="linenos"> 8</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="OpenAILLM-9"><a href="#OpenAILLM-9"><span class="linenos"> 9</span></a>
</span><span id="OpenAILLM-10"><a href="#OpenAILLM-10"><span class="linenos">10</span></a>    <span class="nd">@classmethod</span>
</span><span id="OpenAILLM-11"><a href="#OpenAILLM-11"><span class="linenos">11</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">model_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="OpenAILLM-12"><a href="#OpenAILLM-12"><span class="linenos">12</span></a>        <span class="k">return</span> <span class="s2">&quot;OpenAI&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A wrapper that provides access to the OPENAI API.</p>
</div>


                            <div id="OpenAILLM.model_type" class="classattr">
                                        <input id="OpenAILLM.model_type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">model_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="OpenAILLM.model_type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OpenAILLM.model_type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OpenAILLM.model_type-10"><a href="#OpenAILLM.model_type-10"><span class="linenos">10</span></a>    <span class="nd">@classmethod</span>
</span><span id="OpenAILLM.model_type-11"><a href="#OpenAILLM.model_type-11"><span class="linenos">11</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">model_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="OpenAILLM.model_type-12"><a href="#OpenAILLM.model_type-12"><span class="linenos">12</span></a>        <span class="k">return</span> <span class="s2">&quot;OpenAI&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Returns the name of the provider</p>
</div>


                            </div>
                </section>
                <section id="GeminiLLM">
                            <input id="GeminiLLM-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">GeminiLLM</span><wbr>(<span class="base">railtracks.llm.models.api_providers._provider_wrapper.ProviderLLMWrapper</span>):

                <label class="view-source-button" for="GeminiLLM-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GeminiLLM"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GeminiLLM-5"><a href="#GeminiLLM-5"><span class="linenos"> 5</span></a><span class="k">class</span><span class="w"> </span><span class="nc">GeminiLLM</span><span class="p">(</span><span class="n">ProviderLLMWrapper</span><span class="p">):</span>
</span><span id="GeminiLLM-6"><a href="#GeminiLLM-6"><span class="linenos"> 6</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">full_model_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GeminiLLM-7"><a href="#GeminiLLM-7"><span class="linenos"> 7</span></a>        <span class="c1"># for gemini models through litellm, we need &#39;gemini/{model_name}&#39; format, but we do this after the checks in ProiLLMWrapper init</span>
</span><span id="GeminiLLM-8"><a href="#GeminiLLM-8"><span class="linenos"> 8</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;gemini/</span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="GeminiLLM-9"><a href="#GeminiLLM-9"><span class="linenos"> 9</span></a>
</span><span id="GeminiLLM-10"><a href="#GeminiLLM-10"><span class="linenos">10</span></a>    <span class="nd">@classmethod</span>
</span><span id="GeminiLLM-11"><a href="#GeminiLLM-11"><span class="linenos">11</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">model_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GeminiLLM-12"><a href="#GeminiLLM-12"><span class="linenos">12</span></a>        <span class="k">return</span> <span class="s2">&quot;Vertex_AI&quot;</span>  <span class="c1"># litellm uses this for the provider for Gemini, we are using this in the checks in _provider_wrapper.py</span>
</span></pre></div>


            <div class="docstring"><p>A large base class that wraps around a litellm model.</p>

<p>Note that the model object should be interacted with via the methods provided in the wrapper class:</p>

<ul>
<li><code><a href="#GeminiLLM.chat">chat</a></code></li>
<li><code><a href="#GeminiLLM.structured">structured</a></code></li>
<li><code><a href="#GeminiLLM.stream_chat">stream_chat</a></code></li>
<li><code><a href="#GeminiLLM.chat_with_tools">chat_with_tools</a></code></li>
</ul>

<p>Each individual API should implement the required <code>abstract_methods</code> in order to allow users to interact with a
model of that type.</p>
</div>


                            <div id="GeminiLLM.full_model_name" class="classattr">
                                        <input id="GeminiLLM.full_model_name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">full_model_name</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="GeminiLLM.full_model_name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GeminiLLM.full_model_name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GeminiLLM.full_model_name-6"><a href="#GeminiLLM.full_model_name-6"><span class="linenos">6</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">full_model_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GeminiLLM.full_model_name-7"><a href="#GeminiLLM.full_model_name-7"><span class="linenos">7</span></a>        <span class="c1"># for gemini models through litellm, we need &#39;gemini/{model_name}&#39; format, but we do this after the checks in ProiLLMWrapper init</span>
</span><span id="GeminiLLM.full_model_name-8"><a href="#GeminiLLM.full_model_name-8"><span class="linenos">8</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;gemini/</span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>After the provider is checked, this method is called to get the full model name</p>
</div>


                            </div>
                            <div id="GeminiLLM.model_type" class="classattr">
                                        <input id="GeminiLLM.model_type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">model_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="GeminiLLM.model_type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GeminiLLM.model_type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GeminiLLM.model_type-10"><a href="#GeminiLLM.model_type-10"><span class="linenos">10</span></a>    <span class="nd">@classmethod</span>
</span><span id="GeminiLLM.model_type-11"><a href="#GeminiLLM.model_type-11"><span class="linenos">11</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">model_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GeminiLLM.model_type-12"><a href="#GeminiLLM.model_type-12"><span class="linenos">12</span></a>        <span class="k">return</span> <span class="s2">&quot;Vertex_AI&quot;</span>  <span class="c1"># litellm uses this for the provider for Gemini, we are using this in the checks in _provider_wrapper.py</span>
</span></pre></div>


            <div class="docstring"><p>Returns the name of the provider</p>
</div>


                            </div>
                </section>
                <section id="OllamaLLM">
                            <input id="OllamaLLM-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">OllamaLLM</span><wbr>(<span class="base">railtracks.llm.models._litellm_wrapper.LiteLLMWrapper</span>):

                <label class="view-source-button" for="OllamaLLM-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OllamaLLM"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OllamaLLM-21"><a href="#OllamaLLM-21"><span class="linenos"> 21</span></a><span class="k">class</span><span class="w"> </span><span class="nc">OllamaLLM</span><span class="p">(</span><span class="n">LiteLLMWrapper</span><span class="p">):</span>
</span><span id="OllamaLLM-22"><a href="#OllamaLLM-22"><span class="linenos"> 22</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="OllamaLLM-23"><a href="#OllamaLLM-23"><span class="linenos"> 23</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="OllamaLLM-24"><a href="#OllamaLLM-24"><span class="linenos"> 24</span></a>        <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OllamaLLM-25"><a href="#OllamaLLM-25"><span class="linenos"> 25</span></a>        <span class="n">domain</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span> <span class="s2">&quot;custom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
</span><span id="OllamaLLM-26"><a href="#OllamaLLM-26"><span class="linenos"> 26</span></a>        <span class="n">custom_domain</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="OllamaLLM-27"><a href="#OllamaLLM-27"><span class="linenos"> 27</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="OllamaLLM-28"><a href="#OllamaLLM-28"><span class="linenos"> 28</span></a>    <span class="p">):</span>
</span><span id="OllamaLLM-29"><a href="#OllamaLLM-29"><span class="linenos"> 29</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize an Ollama LLM instance.</span>
</span><span id="OllamaLLM-30"><a href="#OllamaLLM-30"><span class="linenos"> 30</span></a>
</span><span id="OllamaLLM-31"><a href="#OllamaLLM-31"><span class="linenos"> 31</span></a><span class="sd">        Args:</span>
</span><span id="OllamaLLM-32"><a href="#OllamaLLM-32"><span class="linenos"> 32</span></a><span class="sd">            model_name (str): Name of the Ollama model to use.</span>
</span><span id="OllamaLLM-33"><a href="#OllamaLLM-33"><span class="linenos"> 33</span></a><span class="sd">            domain (Literal[&quot;default&quot;, &quot;auto&quot;, &quot;custom&quot;], optional): The domain configuration mode.</span>
</span><span id="OllamaLLM-34"><a href="#OllamaLLM-34"><span class="linenos"> 34</span></a><span class="sd">                - &quot;default&quot;: Uses the default localhost domain (http://localhost:11434)</span>
</span><span id="OllamaLLM-35"><a href="#OllamaLLM-35"><span class="linenos"> 35</span></a><span class="sd">                - &quot;auto&quot;: Uses the OLLAMA_HOST environment variable, raises OllamaError if not set</span>
</span><span id="OllamaLLM-36"><a href="#OllamaLLM-36"><span class="linenos"> 36</span></a><span class="sd">                - &quot;custom&quot;: Uses the provided custom_domain parameter, raises OllamaError if not provided</span>
</span><span id="OllamaLLM-37"><a href="#OllamaLLM-37"><span class="linenos"> 37</span></a><span class="sd">                Defaults to &quot;default&quot;.</span>
</span><span id="OllamaLLM-38"><a href="#OllamaLLM-38"><span class="linenos"> 38</span></a><span class="sd">            custom_domain (str | None, optional): Custom domain URL to use when domain is set to &quot;custom&quot;.</span>
</span><span id="OllamaLLM-39"><a href="#OllamaLLM-39"><span class="linenos"> 39</span></a><span class="sd">                Must be provided if domain=&quot;custom&quot;. Defaults to None.</span>
</span><span id="OllamaLLM-40"><a href="#OllamaLLM-40"><span class="linenos"> 40</span></a><span class="sd">            **kwargs: Additional arguments passed to the parent LiteLLMWrapper.</span>
</span><span id="OllamaLLM-41"><a href="#OllamaLLM-41"><span class="linenos"> 41</span></a>
</span><span id="OllamaLLM-42"><a href="#OllamaLLM-42"><span class="linenos"> 42</span></a><span class="sd">        Raises:</span>
</span><span id="OllamaLLM-43"><a href="#OllamaLLM-43"><span class="linenos"> 43</span></a><span class="sd">            OllamaError: If:</span>
</span><span id="OllamaLLM-44"><a href="#OllamaLLM-44"><span class="linenos"> 44</span></a><span class="sd">                - domain is &quot;auto&quot; and OLLAMA_HOST environment variable is not set</span>
</span><span id="OllamaLLM-45"><a href="#OllamaLLM-45"><span class="linenos"> 45</span></a><span class="sd">                - domain is &quot;custom&quot; and custom_domain is not provided</span>
</span><span id="OllamaLLM-46"><a href="#OllamaLLM-46"><span class="linenos"> 46</span></a><span class="sd">                - specified model is not available on the server</span>
</span><span id="OllamaLLM-47"><a href="#OllamaLLM-47"><span class="linenos"> 47</span></a><span class="sd">            RequestException: If connection to Ollama server fails</span>
</span><span id="OllamaLLM-48"><a href="#OllamaLLM-48"><span class="linenos"> 48</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OllamaLLM-49"><a href="#OllamaLLM-49"><span class="linenos"> 49</span></a>        <span class="n">model_name</span> <span class="o">=</span> <span class="n">model_name</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Extract model name from full path</span>
</span><span id="OllamaLLM-50"><a href="#OllamaLLM-50"><span class="linenos"> 50</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="OllamaLLM-51"><a href="#OllamaLLM-51"><span class="linenos"> 51</span></a>
</span><span id="OllamaLLM-52"><a href="#OllamaLLM-52"><span class="linenos"> 52</span></a>        <span class="k">match</span> <span class="n">domain</span><span class="p">:</span>
</span><span id="OllamaLLM-53"><a href="#OllamaLLM-53"><span class="linenos"> 53</span></a>            <span class="k">case</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span>
</span><span id="OllamaLLM-54"><a href="#OllamaLLM-54"><span class="linenos"> 54</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">domain</span> <span class="o">=</span> <span class="n">DEFAULT_DOMAIN</span>
</span><span id="OllamaLLM-55"><a href="#OllamaLLM-55"><span class="linenos"> 55</span></a>            <span class="k">case</span> <span class="s2">&quot;auto&quot;</span><span class="p">:</span>
</span><span id="OllamaLLM-56"><a href="#OllamaLLM-56"><span class="linenos"> 56</span></a>                <span class="n">domain_from_env</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;OLLAMA_HOST&quot;</span><span class="p">)</span>
</span><span id="OllamaLLM-57"><a href="#OllamaLLM-57"><span class="linenos"> 57</span></a>                <span class="k">if</span> <span class="n">domain_from_env</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="OllamaLLM-58"><a href="#OllamaLLM-58"><span class="linenos"> 58</span></a>                    <span class="k">raise</span> <span class="n">OllamaError</span><span class="p">(</span><span class="s2">&quot;OLLAMA_HOST environment variable not set&quot;</span><span class="p">)</span>
</span><span id="OllamaLLM-59"><a href="#OllamaLLM-59"><span class="linenos"> 59</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">domain</span> <span class="o">=</span> <span class="n">domain_from_env</span>
</span><span id="OllamaLLM-60"><a href="#OllamaLLM-60"><span class="linenos"> 60</span></a>            <span class="k">case</span> <span class="s2">&quot;custom&quot;</span><span class="p">:</span>
</span><span id="OllamaLLM-61"><a href="#OllamaLLM-61"><span class="linenos"> 61</span></a>                <span class="k">if</span> <span class="n">custom_domain</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="OllamaLLM-62"><a href="#OllamaLLM-62"><span class="linenos"> 62</span></a>                    <span class="k">raise</span> <span class="n">OllamaError</span><span class="p">(</span>
</span><span id="OllamaLLM-63"><a href="#OllamaLLM-63"><span class="linenos"> 63</span></a>                        <span class="s2">&quot;Custom domain must be provided when domain is set to &#39;custom&#39;&quot;</span>
</span><span id="OllamaLLM-64"><a href="#OllamaLLM-64"><span class="linenos"> 64</span></a>                    <span class="p">)</span>
</span><span id="OllamaLLM-65"><a href="#OllamaLLM-65"><span class="linenos"> 65</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">domain</span> <span class="o">=</span> <span class="n">custom_domain</span>
</span><span id="OllamaLLM-66"><a href="#OllamaLLM-66"><span class="linenos"> 66</span></a>
</span><span id="OllamaLLM-67"><a href="#OllamaLLM-67"><span class="linenos"> 67</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">get_rt_logger</span><span class="p">(</span><span class="n">LOGGER_NAME</span><span class="p">)</span>
</span><span id="OllamaLLM-68"><a href="#OllamaLLM-68"><span class="linenos"> 68</span></a>
</span><span id="OllamaLLM-69"><a href="#OllamaLLM-69"><span class="linenos"> 69</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_run_check</span><span class="p">(</span>
</span><span id="OllamaLLM-70"><a href="#OllamaLLM-70"><span class="linenos"> 70</span></a>            <span class="s2">&quot;api/tags&quot;</span>
</span><span id="OllamaLLM-71"><a href="#OllamaLLM-71"><span class="linenos"> 71</span></a>        <span class="p">)</span>  <span class="c1"># This will crash the workflow if Ollama is not setup properly</span>
</span><span id="OllamaLLM-72"><a href="#OllamaLLM-72"><span class="linenos"> 72</span></a>
</span><span id="OllamaLLM-73"><a href="#OllamaLLM-73"><span class="linenos"> 73</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_run_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="OllamaLLM-74"><a href="#OllamaLLM-74"><span class="linenos"> 74</span></a>        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">endpoint</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="OllamaLLM-75"><a href="#OllamaLLM-75"><span class="linenos"> 75</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="OllamaLLM-76"><a href="#OllamaLLM-76"><span class="linenos"> 76</span></a>            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span id="OllamaLLM-77"><a href="#OllamaLLM-77"><span class="linenos"> 77</span></a>            <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
</span><span id="OllamaLLM-78"><a href="#OllamaLLM-78"><span class="linenos"> 78</span></a>
</span><span id="OllamaLLM-79"><a href="#OllamaLLM-79"><span class="linenos"> 79</span></a>            <span class="n">models</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span><span id="OllamaLLM-80"><a href="#OllamaLLM-80"><span class="linenos"> 80</span></a>
</span><span id="OllamaLLM-81"><a href="#OllamaLLM-81"><span class="linenos"> 81</span></a>            <span class="n">model_names</span> <span class="o">=</span> <span class="p">{</span><span class="n">model</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">[</span><span class="s2">&quot;models&quot;</span><span class="p">]}</span>
</span><span id="OllamaLLM-82"><a href="#OllamaLLM-82"><span class="linenos"> 82</span></a>
</span><span id="OllamaLLM-83"><a href="#OllamaLLM-83"><span class="linenos"> 83</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">model_names</span><span class="p">:</span>
</span><span id="OllamaLLM-84"><a href="#OllamaLLM-84"><span class="linenos"> 84</span></a>                <span class="n">error_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">()</span><span class="si">}</span><span class="s2"> not available on server </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">domain</span><span class="si">}</span><span class="s2">. Avaiable models are: </span><span class="si">{</span><span class="n">model_names</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="OllamaLLM-85"><a href="#OllamaLLM-85"><span class="linenos"> 85</span></a>                <span class="k">raise</span> <span class="n">OllamaError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
</span><span id="OllamaLLM-86"><a href="#OllamaLLM-86"><span class="linenos"> 86</span></a>
</span><span id="OllamaLLM-87"><a href="#OllamaLLM-87"><span class="linenos"> 87</span></a>        <span class="k">except</span> <span class="n">OllamaError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="OllamaLLM-88"><a href="#OllamaLLM-88"><span class="linenos"> 88</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="OllamaLLM-89"><a href="#OllamaLLM-89"><span class="linenos"> 89</span></a>            <span class="k">raise</span>
</span><span id="OllamaLLM-90"><a href="#OllamaLLM-90"><span class="linenos"> 90</span></a>        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="OllamaLLM-91"><a href="#OllamaLLM-91"><span class="linenos"> 91</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="OllamaLLM-92"><a href="#OllamaLLM-92"><span class="linenos"> 92</span></a>            <span class="k">raise</span>
</span><span id="OllamaLLM-93"><a href="#OllamaLLM-93"><span class="linenos"> 93</span></a>
</span><span id="OllamaLLM-94"><a href="#OllamaLLM-94"><span class="linenos"> 94</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chat_with_tools</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">,</span> <span class="n">tools</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="OllamaLLM-95"><a href="#OllamaLLM-95"><span class="linenos"> 95</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">litellm</span><span class="o">.</span><span class="n">supports_function_calling</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_name</span><span class="p">):</span>
</span><span id="OllamaLLM-96"><a href="#OllamaLLM-96"><span class="linenos"> 96</span></a>            <span class="k">raise</span> <span class="n">FunctionCallingNotSupportedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_name</span><span class="p">)</span>
</span><span id="OllamaLLM-97"><a href="#OllamaLLM-97"><span class="linenos"> 97</span></a>
</span><span id="OllamaLLM-98"><a href="#OllamaLLM-98"><span class="linenos"> 98</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">chat_with_tools</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">tools</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="OllamaLLM-99"><a href="#OllamaLLM-99"><span class="linenos"> 99</span></a>
</span><span id="OllamaLLM-100"><a href="#OllamaLLM-100"><span class="linenos">100</span></a>    <span class="nd">@classmethod</span>
</span><span id="OllamaLLM-101"><a href="#OllamaLLM-101"><span class="linenos">101</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">model_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="OllamaLLM-102"><a href="#OllamaLLM-102"><span class="linenos">102</span></a>        <span class="k">return</span> <span class="s2">&quot;Ollama&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A large base class that wraps around a litellm model.</p>

<p>Note that the model object should be interacted with via the methods provided in the wrapper class:</p>

<ul>
<li><code><a href="#OllamaLLM.chat">chat</a></code></li>
<li><code><a href="#OllamaLLM.structured">structured</a></code></li>
<li><code><a href="#OllamaLLM.stream_chat">stream_chat</a></code></li>
<li><code><a href="#OllamaLLM.chat_with_tools">chat_with_tools</a></code></li>
</ul>

<p>Each individual API should implement the required <code>abstract_methods</code> in order to allow users to interact with a
model of that type.</p>
</div>


                            <div id="OllamaLLM.__init__" class="classattr">
                                        <input id="OllamaLLM.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">OllamaLLM</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">domain</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="s1">&#39;custom&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span>,</span><span class="param">	<span class="n">custom_domain</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span>)</span>

                <label class="view-source-button" for="OllamaLLM.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OllamaLLM.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OllamaLLM.__init__-22"><a href="#OllamaLLM.__init__-22"><span class="linenos">22</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="OllamaLLM.__init__-23"><a href="#OllamaLLM.__init__-23"><span class="linenos">23</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="OllamaLLM.__init__-24"><a href="#OllamaLLM.__init__-24"><span class="linenos">24</span></a>        <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OllamaLLM.__init__-25"><a href="#OllamaLLM.__init__-25"><span class="linenos">25</span></a>        <span class="n">domain</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="s2">&quot;auto&quot;</span><span class="p">,</span> <span class="s2">&quot;custom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>
</span><span id="OllamaLLM.__init__-26"><a href="#OllamaLLM.__init__-26"><span class="linenos">26</span></a>        <span class="n">custom_domain</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="OllamaLLM.__init__-27"><a href="#OllamaLLM.__init__-27"><span class="linenos">27</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="OllamaLLM.__init__-28"><a href="#OllamaLLM.__init__-28"><span class="linenos">28</span></a>    <span class="p">):</span>
</span><span id="OllamaLLM.__init__-29"><a href="#OllamaLLM.__init__-29"><span class="linenos">29</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize an Ollama LLM instance.</span>
</span><span id="OllamaLLM.__init__-30"><a href="#OllamaLLM.__init__-30"><span class="linenos">30</span></a>
</span><span id="OllamaLLM.__init__-31"><a href="#OllamaLLM.__init__-31"><span class="linenos">31</span></a><span class="sd">        Args:</span>
</span><span id="OllamaLLM.__init__-32"><a href="#OllamaLLM.__init__-32"><span class="linenos">32</span></a><span class="sd">            model_name (str): Name of the Ollama model to use.</span>
</span><span id="OllamaLLM.__init__-33"><a href="#OllamaLLM.__init__-33"><span class="linenos">33</span></a><span class="sd">            domain (Literal[&quot;default&quot;, &quot;auto&quot;, &quot;custom&quot;], optional): The domain configuration mode.</span>
</span><span id="OllamaLLM.__init__-34"><a href="#OllamaLLM.__init__-34"><span class="linenos">34</span></a><span class="sd">                - &quot;default&quot;: Uses the default localhost domain (http://localhost:11434)</span>
</span><span id="OllamaLLM.__init__-35"><a href="#OllamaLLM.__init__-35"><span class="linenos">35</span></a><span class="sd">                - &quot;auto&quot;: Uses the OLLAMA_HOST environment variable, raises OllamaError if not set</span>
</span><span id="OllamaLLM.__init__-36"><a href="#OllamaLLM.__init__-36"><span class="linenos">36</span></a><span class="sd">                - &quot;custom&quot;: Uses the provided custom_domain parameter, raises OllamaError if not provided</span>
</span><span id="OllamaLLM.__init__-37"><a href="#OllamaLLM.__init__-37"><span class="linenos">37</span></a><span class="sd">                Defaults to &quot;default&quot;.</span>
</span><span id="OllamaLLM.__init__-38"><a href="#OllamaLLM.__init__-38"><span class="linenos">38</span></a><span class="sd">            custom_domain (str | None, optional): Custom domain URL to use when domain is set to &quot;custom&quot;.</span>
</span><span id="OllamaLLM.__init__-39"><a href="#OllamaLLM.__init__-39"><span class="linenos">39</span></a><span class="sd">                Must be provided if domain=&quot;custom&quot;. Defaults to None.</span>
</span><span id="OllamaLLM.__init__-40"><a href="#OllamaLLM.__init__-40"><span class="linenos">40</span></a><span class="sd">            **kwargs: Additional arguments passed to the parent LiteLLMWrapper.</span>
</span><span id="OllamaLLM.__init__-41"><a href="#OllamaLLM.__init__-41"><span class="linenos">41</span></a>
</span><span id="OllamaLLM.__init__-42"><a href="#OllamaLLM.__init__-42"><span class="linenos">42</span></a><span class="sd">        Raises:</span>
</span><span id="OllamaLLM.__init__-43"><a href="#OllamaLLM.__init__-43"><span class="linenos">43</span></a><span class="sd">            OllamaError: If:</span>
</span><span id="OllamaLLM.__init__-44"><a href="#OllamaLLM.__init__-44"><span class="linenos">44</span></a><span class="sd">                - domain is &quot;auto&quot; and OLLAMA_HOST environment variable is not set</span>
</span><span id="OllamaLLM.__init__-45"><a href="#OllamaLLM.__init__-45"><span class="linenos">45</span></a><span class="sd">                - domain is &quot;custom&quot; and custom_domain is not provided</span>
</span><span id="OllamaLLM.__init__-46"><a href="#OllamaLLM.__init__-46"><span class="linenos">46</span></a><span class="sd">                - specified model is not available on the server</span>
</span><span id="OllamaLLM.__init__-47"><a href="#OllamaLLM.__init__-47"><span class="linenos">47</span></a><span class="sd">            RequestException: If connection to Ollama server fails</span>
</span><span id="OllamaLLM.__init__-48"><a href="#OllamaLLM.__init__-48"><span class="linenos">48</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OllamaLLM.__init__-49"><a href="#OllamaLLM.__init__-49"><span class="linenos">49</span></a>        <span class="n">model_name</span> <span class="o">=</span> <span class="n">model_name</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Extract model name from full path</span>
</span><span id="OllamaLLM.__init__-50"><a href="#OllamaLLM.__init__-50"><span class="linenos">50</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="OllamaLLM.__init__-51"><a href="#OllamaLLM.__init__-51"><span class="linenos">51</span></a>
</span><span id="OllamaLLM.__init__-52"><a href="#OllamaLLM.__init__-52"><span class="linenos">52</span></a>        <span class="k">match</span> <span class="n">domain</span><span class="p">:</span>
</span><span id="OllamaLLM.__init__-53"><a href="#OllamaLLM.__init__-53"><span class="linenos">53</span></a>            <span class="k">case</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span>
</span><span id="OllamaLLM.__init__-54"><a href="#OllamaLLM.__init__-54"><span class="linenos">54</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">domain</span> <span class="o">=</span> <span class="n">DEFAULT_DOMAIN</span>
</span><span id="OllamaLLM.__init__-55"><a href="#OllamaLLM.__init__-55"><span class="linenos">55</span></a>            <span class="k">case</span> <span class="s2">&quot;auto&quot;</span><span class="p">:</span>
</span><span id="OllamaLLM.__init__-56"><a href="#OllamaLLM.__init__-56"><span class="linenos">56</span></a>                <span class="n">domain_from_env</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;OLLAMA_HOST&quot;</span><span class="p">)</span>
</span><span id="OllamaLLM.__init__-57"><a href="#OllamaLLM.__init__-57"><span class="linenos">57</span></a>                <span class="k">if</span> <span class="n">domain_from_env</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="OllamaLLM.__init__-58"><a href="#OllamaLLM.__init__-58"><span class="linenos">58</span></a>                    <span class="k">raise</span> <span class="n">OllamaError</span><span class="p">(</span><span class="s2">&quot;OLLAMA_HOST environment variable not set&quot;</span><span class="p">)</span>
</span><span id="OllamaLLM.__init__-59"><a href="#OllamaLLM.__init__-59"><span class="linenos">59</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">domain</span> <span class="o">=</span> <span class="n">domain_from_env</span>
</span><span id="OllamaLLM.__init__-60"><a href="#OllamaLLM.__init__-60"><span class="linenos">60</span></a>            <span class="k">case</span> <span class="s2">&quot;custom&quot;</span><span class="p">:</span>
</span><span id="OllamaLLM.__init__-61"><a href="#OllamaLLM.__init__-61"><span class="linenos">61</span></a>                <span class="k">if</span> <span class="n">custom_domain</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="OllamaLLM.__init__-62"><a href="#OllamaLLM.__init__-62"><span class="linenos">62</span></a>                    <span class="k">raise</span> <span class="n">OllamaError</span><span class="p">(</span>
</span><span id="OllamaLLM.__init__-63"><a href="#OllamaLLM.__init__-63"><span class="linenos">63</span></a>                        <span class="s2">&quot;Custom domain must be provided when domain is set to &#39;custom&#39;&quot;</span>
</span><span id="OllamaLLM.__init__-64"><a href="#OllamaLLM.__init__-64"><span class="linenos">64</span></a>                    <span class="p">)</span>
</span><span id="OllamaLLM.__init__-65"><a href="#OllamaLLM.__init__-65"><span class="linenos">65</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">domain</span> <span class="o">=</span> <span class="n">custom_domain</span>
</span><span id="OllamaLLM.__init__-66"><a href="#OllamaLLM.__init__-66"><span class="linenos">66</span></a>
</span><span id="OllamaLLM.__init__-67"><a href="#OllamaLLM.__init__-67"><span class="linenos">67</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">get_rt_logger</span><span class="p">(</span><span class="n">LOGGER_NAME</span><span class="p">)</span>
</span><span id="OllamaLLM.__init__-68"><a href="#OllamaLLM.__init__-68"><span class="linenos">68</span></a>
</span><span id="OllamaLLM.__init__-69"><a href="#OllamaLLM.__init__-69"><span class="linenos">69</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_run_check</span><span class="p">(</span>
</span><span id="OllamaLLM.__init__-70"><a href="#OllamaLLM.__init__-70"><span class="linenos">70</span></a>            <span class="s2">&quot;api/tags&quot;</span>
</span><span id="OllamaLLM.__init__-71"><a href="#OllamaLLM.__init__-71"><span class="linenos">71</span></a>        <span class="p">)</span>  <span class="c1"># This will crash the workflow if Ollama is not setup properly</span>
</span></pre></div>


            <div class="docstring"><p>Initialize an Ollama LLM instance.</p>

<p>Args:
    model_name (str): Name of the Ollama model to use.
    domain (Literal["default", "auto", "custom"], optional): The domain configuration mode.
        - "default": Uses the default localhost domain (<a href="http://localhost:11434">http://localhost:11434</a>)
        - "auto": Uses the OLLAMA_HOST environment variable, raises OllamaError if not set
        - "custom": Uses the provided custom_domain parameter, raises OllamaError if not provided
        Defaults to "default".
    custom_domain (str | None, optional): Custom domain URL to use when domain is set to "custom".
        Must be provided if domain="custom". Defaults to None.
    **kwargs: Additional arguments passed to the parent LiteLLMWrapper.</p>

<p>Raises:
    OllamaError: If:
        - domain is "auto" and OLLAMA_HOST environment variable is not set
        - domain is "custom" and custom_domain is not provided
        - specified model is not available on the server
    RequestException: If connection to Ollama server fails</p>
</div>


                            </div>
                            <div id="OllamaLLM.logger" class="classattr">
                                <div class="attr variable">
            <span class="name">logger</span>

        
    </div>
    <a class="headerlink" href="#OllamaLLM.logger"></a>
    
    

                            </div>
                            <div id="OllamaLLM.chat_with_tools" class="classattr">
                                        <input id="OllamaLLM.chat_with_tools-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">chat_with_tools</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">messages</span>, </span><span class="param"><span class="n">tools</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="OllamaLLM.chat_with_tools-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OllamaLLM.chat_with_tools"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OllamaLLM.chat_with_tools-94"><a href="#OllamaLLM.chat_with_tools-94"><span class="linenos">94</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chat_with_tools</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">,</span> <span class="n">tools</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="OllamaLLM.chat_with_tools-95"><a href="#OllamaLLM.chat_with_tools-95"><span class="linenos">95</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">litellm</span><span class="o">.</span><span class="n">supports_function_calling</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_name</span><span class="p">):</span>
</span><span id="OllamaLLM.chat_with_tools-96"><a href="#OllamaLLM.chat_with_tools-96"><span class="linenos">96</span></a>            <span class="k">raise</span> <span class="n">FunctionCallingNotSupportedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_name</span><span class="p">)</span>
</span><span id="OllamaLLM.chat_with_tools-97"><a href="#OllamaLLM.chat_with_tools-97"><span class="linenos">97</span></a>
</span><span id="OllamaLLM.chat_with_tools-98"><a href="#OllamaLLM.chat_with_tools-98"><span class="linenos">98</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">chat_with_tools</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">tools</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Chat with the model using the provided messages and tools.</p>
</div>


                            </div>
                            <div id="OllamaLLM.model_type" class="classattr">
                                        <input id="OllamaLLM.model_type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">model_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="OllamaLLM.model_type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OllamaLLM.model_type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OllamaLLM.model_type-100"><a href="#OllamaLLM.model_type-100"><span class="linenos">100</span></a>    <span class="nd">@classmethod</span>
</span><span id="OllamaLLM.model_type-101"><a href="#OllamaLLM.model_type-101"><span class="linenos">101</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">model_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="OllamaLLM.model_type-102"><a href="#OllamaLLM.model_type-102"><span class="linenos">102</span></a>        <span class="k">return</span> <span class="s2">&quot;Ollama&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The name of the provider of this model or the model type.</p>
</div>


                            </div>
                </section>
                <section id="AzureAILLM">
                            <input id="AzureAILLM-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AzureAILLM</span><wbr>(<span class="base">railtracks.llm.models._litellm_wrapper.LiteLLMWrapper</span>):

                <label class="view-source-button" for="AzureAILLM-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AzureAILLM"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AzureAILLM-17"><a href="#AzureAILLM-17"><span class="linenos">17</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AzureAILLM</span><span class="p">(</span><span class="n">LiteLLMWrapper</span><span class="p">):</span>
</span><span id="AzureAILLM-18"><a href="#AzureAILLM-18"><span class="linenos">18</span></a>    <span class="nd">@classmethod</span>
</span><span id="AzureAILLM-19"><a href="#AzureAILLM-19"><span class="linenos">19</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">model_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
</span><span id="AzureAILLM-20"><a href="#AzureAILLM-20"><span class="linenos">20</span></a>        <span class="k">return</span> <span class="s2">&quot;AzureAI&quot;</span>
</span><span id="AzureAILLM-21"><a href="#AzureAILLM-21"><span class="linenos">21</span></a>
</span><span id="AzureAILLM-22"><a href="#AzureAILLM-22"><span class="linenos">22</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="AzureAILLM-23"><a href="#AzureAILLM-23"><span class="linenos">23</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="AzureAILLM-24"><a href="#AzureAILLM-24"><span class="linenos">24</span></a>        <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="AzureAILLM-25"><a href="#AzureAILLM-25"><span class="linenos">25</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="AzureAILLM-26"><a href="#AzureAILLM-26"><span class="linenos">26</span></a>    <span class="p">):</span>
</span><span id="AzureAILLM-27"><a href="#AzureAILLM-27"><span class="linenos">27</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize an Azure AI LLM instance.</span>
</span><span id="AzureAILLM-28"><a href="#AzureAILLM-28"><span class="linenos">28</span></a>
</span><span id="AzureAILLM-29"><a href="#AzureAILLM-29"><span class="linenos">29</span></a><span class="sd">        Args:</span>
</span><span id="AzureAILLM-30"><a href="#AzureAILLM-30"><span class="linenos">30</span></a><span class="sd">            model_name (str): Name of the Azure AI model to use.</span>
</span><span id="AzureAILLM-31"><a href="#AzureAILLM-31"><span class="linenos">31</span></a><span class="sd">            **kwargs: Additional arguments passed to the parent LiteLLMWrapper.</span>
</span><span id="AzureAILLM-32"><a href="#AzureAILLM-32"><span class="linenos">32</span></a>
</span><span id="AzureAILLM-33"><a href="#AzureAILLM-33"><span class="linenos">33</span></a><span class="sd">        Raises:</span>
</span><span id="AzureAILLM-34"><a href="#AzureAILLM-34"><span class="linenos">34</span></a><span class="sd">            AzureAIError: If the specified model is not available or if there are issues with the Azure AI service.</span>
</span><span id="AzureAILLM-35"><a href="#AzureAILLM-35"><span class="linenos">35</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AzureAILLM-36"><a href="#AzureAILLM-36"><span class="linenos">36</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="AzureAILLM-37"><a href="#AzureAILLM-37"><span class="linenos">37</span></a>
</span><span id="AzureAILLM-38"><a href="#AzureAILLM-38"><span class="linenos">38</span></a>        <span class="c1"># Currently matching names to Azure models is case sensitive</span>
</span><span id="AzureAILLM-39"><a href="#AzureAILLM-39"><span class="linenos">39</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_available_models</span> <span class="o">=</span> <span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">litellm</span><span class="o">.</span><span class="n">azure_ai_models</span><span class="p">]</span>
</span><span id="AzureAILLM-40"><a href="#AzureAILLM-40"><span class="linenos">40</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_is_model_available</span><span class="p">()</span>
</span><span id="AzureAILLM-41"><a href="#AzureAILLM-41"><span class="linenos">41</span></a>
</span><span id="AzureAILLM-42"><a href="#AzureAILLM-42"><span class="linenos">42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">get_rt_logger</span><span class="p">(</span><span class="n">LOGGER_NAME</span><span class="p">)</span>
</span><span id="AzureAILLM-43"><a href="#AzureAILLM-43"><span class="linenos">43</span></a>
</span><span id="AzureAILLM-44"><a href="#AzureAILLM-44"><span class="linenos">44</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="AzureAILLM-45"><a href="#AzureAILLM-45"><span class="linenos">45</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="AzureAILLM-46"><a href="#AzureAILLM-46"><span class="linenos">46</span></a>            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">chat</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="AzureAILLM-47"><a href="#AzureAILLM-47"><span class="linenos">47</span></a>        <span class="k">except</span> <span class="n">litellm</span><span class="o">.</span><span class="n">InternalServerError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="AzureAILLM-48"><a href="#AzureAILLM-48"><span class="linenos">48</span></a>            <span class="k">raise</span> <span class="n">AzureAIError</span><span class="p">(</span>
</span><span id="AzureAILLM-49"><a href="#AzureAILLM-49"><span class="linenos">49</span></a>                <span class="n">reason</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Azure AI LLM error while processing the request: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="AzureAILLM-50"><a href="#AzureAILLM-50"><span class="linenos">50</span></a>            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="AzureAILLM-51"><a href="#AzureAILLM-51"><span class="linenos">51</span></a>
</span><span id="AzureAILLM-52"><a href="#AzureAILLM-52"><span class="linenos">52</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chat_with_tools</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">,</span> <span class="n">tools</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="AzureAILLM-53"><a href="#AzureAILLM-53"><span class="linenos">53</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">litellm</span><span class="o">.</span><span class="n">supports_function_calling</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()):</span>
</span><span id="AzureAILLM-54"><a href="#AzureAILLM-54"><span class="linenos">54</span></a>            <span class="k">raise</span> <span class="n">FunctionCallingNotSupportedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_name</span><span class="p">)</span>
</span><span id="AzureAILLM-55"><a href="#AzureAILLM-55"><span class="linenos">55</span></a>
</span><span id="AzureAILLM-56"><a href="#AzureAILLM-56"><span class="linenos">56</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="AzureAILLM-57"><a href="#AzureAILLM-57"><span class="linenos">57</span></a>            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">chat_with_tools</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">tools</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="AzureAILLM-58"><a href="#AzureAILLM-58"><span class="linenos">58</span></a>        <span class="k">except</span> <span class="n">litellm</span><span class="o">.</span><span class="n">InternalServerError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="AzureAILLM-59"><a href="#AzureAILLM-59"><span class="linenos">59</span></a>            <span class="k">raise</span> <span class="n">AzureAIError</span><span class="p">(</span>
</span><span id="AzureAILLM-60"><a href="#AzureAILLM-60"><span class="linenos">60</span></a>                <span class="n">reason</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Azure AI LLM error while processing the request: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="AzureAILLM-61"><a href="#AzureAILLM-61"><span class="linenos">61</span></a>            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="AzureAILLM-62"><a href="#AzureAILLM-62"><span class="linenos">62</span></a>
</span><span id="AzureAILLM-63"><a href="#AzureAILLM-63"><span class="linenos">63</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_is_model_available</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AzureAILLM-64"><a href="#AzureAILLM-64"><span class="linenos">64</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the model is available and supports tool calling.&quot;&quot;&quot;</span>
</span><span id="AzureAILLM-65"><a href="#AzureAILLM-65"><span class="linenos">65</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_available_models</span><span class="p">:</span>
</span><span id="AzureAILLM-66"><a href="#AzureAILLM-66"><span class="linenos">66</span></a>            <span class="k">raise</span> <span class="n">AzureAIError</span><span class="p">(</span>
</span><span id="AzureAILLM-67"><a href="#AzureAILLM-67"><span class="linenos">67</span></a>                <span class="n">reason</span><span class="o">=</span><span class="p">(</span>
</span><span id="AzureAILLM-68"><a href="#AzureAILLM-68"><span class="linenos">68</span></a>                    <span class="sa">f</span><span class="s2">&quot;Model &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_name</span><span class="si">}</span><span class="s2">&#39; is not available. &quot;</span>
</span><span id="AzureAILLM-69"><a href="#AzureAILLM-69"><span class="linenos">69</span></a>                    <span class="sa">f</span><span class="s2">&quot;Available models: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_available_models</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="AzureAILLM-70"><a href="#AzureAILLM-70"><span class="linenos">70</span></a>                <span class="p">)</span>
</span><span id="AzureAILLM-71"><a href="#AzureAILLM-71"><span class="linenos">71</span></a>            <span class="p">)</span>
</span><span id="AzureAILLM-72"><a href="#AzureAILLM-72"><span class="linenos">72</span></a>
</span><span id="AzureAILLM-73"><a href="#AzureAILLM-73"><span class="linenos">73</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_tool_calling_supported</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AzureAILLM-74"><a href="#AzureAILLM-74"><span class="linenos">74</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the model supports tool calling.&quot;&quot;&quot;</span>
</span><span id="AzureAILLM-75"><a href="#AzureAILLM-75"><span class="linenos">75</span></a>        <span class="n">tool_calling_supported</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="AzureAILLM-76"><a href="#AzureAILLM-76"><span class="linenos">76</span></a>            <span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">litellm</span><span class="o">.</span><span class="n">supports_function_calling</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">))</span>
</span><span id="AzureAILLM-77"><a href="#AzureAILLM-77"><span class="linenos">77</span></a>            <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_available_models</span>
</span><span id="AzureAILLM-78"><a href="#AzureAILLM-78"><span class="linenos">78</span></a>        <span class="p">]</span>
</span><span id="AzureAILLM-79"><a href="#AzureAILLM-79"><span class="linenos">79</span></a>        <span class="k">return</span> <span class="n">tool_calling_supported</span>
</span></pre></div>


            <div class="docstring"><p>A large base class that wraps around a litellm model.</p>

<p>Note that the model object should be interacted with via the methods provided in the wrapper class:</p>

<ul>
<li><code><a href="#AzureAILLM.chat">chat</a></code></li>
<li><code><a href="#AzureAILLM.structured">structured</a></code></li>
<li><code><a href="#AzureAILLM.stream_chat">stream_chat</a></code></li>
<li><code><a href="#AzureAILLM.chat_with_tools">chat_with_tools</a></code></li>
</ul>

<p>Each individual API should implement the required <code>abstract_methods</code> in order to allow users to interact with a
model of that type.</p>
</div>


                            <div id="AzureAILLM.__init__" class="classattr">
                                        <input id="AzureAILLM.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AzureAILLM</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span>)</span>

                <label class="view-source-button" for="AzureAILLM.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AzureAILLM.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AzureAILLM.__init__-22"><a href="#AzureAILLM.__init__-22"><span class="linenos">22</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="AzureAILLM.__init__-23"><a href="#AzureAILLM.__init__-23"><span class="linenos">23</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="AzureAILLM.__init__-24"><a href="#AzureAILLM.__init__-24"><span class="linenos">24</span></a>        <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="AzureAILLM.__init__-25"><a href="#AzureAILLM.__init__-25"><span class="linenos">25</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="AzureAILLM.__init__-26"><a href="#AzureAILLM.__init__-26"><span class="linenos">26</span></a>    <span class="p">):</span>
</span><span id="AzureAILLM.__init__-27"><a href="#AzureAILLM.__init__-27"><span class="linenos">27</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize an Azure AI LLM instance.</span>
</span><span id="AzureAILLM.__init__-28"><a href="#AzureAILLM.__init__-28"><span class="linenos">28</span></a>
</span><span id="AzureAILLM.__init__-29"><a href="#AzureAILLM.__init__-29"><span class="linenos">29</span></a><span class="sd">        Args:</span>
</span><span id="AzureAILLM.__init__-30"><a href="#AzureAILLM.__init__-30"><span class="linenos">30</span></a><span class="sd">            model_name (str): Name of the Azure AI model to use.</span>
</span><span id="AzureAILLM.__init__-31"><a href="#AzureAILLM.__init__-31"><span class="linenos">31</span></a><span class="sd">            **kwargs: Additional arguments passed to the parent LiteLLMWrapper.</span>
</span><span id="AzureAILLM.__init__-32"><a href="#AzureAILLM.__init__-32"><span class="linenos">32</span></a>
</span><span id="AzureAILLM.__init__-33"><a href="#AzureAILLM.__init__-33"><span class="linenos">33</span></a><span class="sd">        Raises:</span>
</span><span id="AzureAILLM.__init__-34"><a href="#AzureAILLM.__init__-34"><span class="linenos">34</span></a><span class="sd">            AzureAIError: If the specified model is not available or if there are issues with the Azure AI service.</span>
</span><span id="AzureAILLM.__init__-35"><a href="#AzureAILLM.__init__-35"><span class="linenos">35</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AzureAILLM.__init__-36"><a href="#AzureAILLM.__init__-36"><span class="linenos">36</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="AzureAILLM.__init__-37"><a href="#AzureAILLM.__init__-37"><span class="linenos">37</span></a>
</span><span id="AzureAILLM.__init__-38"><a href="#AzureAILLM.__init__-38"><span class="linenos">38</span></a>        <span class="c1"># Currently matching names to Azure models is case sensitive</span>
</span><span id="AzureAILLM.__init__-39"><a href="#AzureAILLM.__init__-39"><span class="linenos">39</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_available_models</span> <span class="o">=</span> <span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">litellm</span><span class="o">.</span><span class="n">azure_ai_models</span><span class="p">]</span>
</span><span id="AzureAILLM.__init__-40"><a href="#AzureAILLM.__init__-40"><span class="linenos">40</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_is_model_available</span><span class="p">()</span>
</span><span id="AzureAILLM.__init__-41"><a href="#AzureAILLM.__init__-41"><span class="linenos">41</span></a>
</span><span id="AzureAILLM.__init__-42"><a href="#AzureAILLM.__init__-42"><span class="linenos">42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">get_rt_logger</span><span class="p">(</span><span class="n">LOGGER_NAME</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Initialize an Azure AI LLM instance.</p>

<p>Args:
    model_name (str): Name of the Azure AI model to use.
    **kwargs: Additional arguments passed to the parent LiteLLMWrapper.</p>

<p>Raises:
    AzureAIError: If the specified model is not available or if there are issues with the Azure AI service.</p>
</div>


                            </div>
                            <div id="AzureAILLM.model_type" class="classattr">
                                        <input id="AzureAILLM.model_type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-classmethod">@classmethod</div>

        <span class="def">def</span>
        <span class="name">model_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AzureAILLM.model_type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AzureAILLM.model_type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AzureAILLM.model_type-18"><a href="#AzureAILLM.model_type-18"><span class="linenos">18</span></a>    <span class="nd">@classmethod</span>
</span><span id="AzureAILLM.model_type-19"><a href="#AzureAILLM.model_type-19"><span class="linenos">19</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">model_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
</span><span id="AzureAILLM.model_type-20"><a href="#AzureAILLM.model_type-20"><span class="linenos">20</span></a>        <span class="k">return</span> <span class="s2">&quot;AzureAI&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The name of the provider of this model or the model type.</p>
</div>


                            </div>
                            <div id="AzureAILLM.logger" class="classattr">
                                <div class="attr variable">
            <span class="name">logger</span>

        
    </div>
    <a class="headerlink" href="#AzureAILLM.logger"></a>
    
    

                            </div>
                            <div id="AzureAILLM.chat" class="classattr">
                                        <input id="AzureAILLM.chat-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">chat</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">messages</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AzureAILLM.chat-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AzureAILLM.chat"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AzureAILLM.chat-44"><a href="#AzureAILLM.chat-44"><span class="linenos">44</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="AzureAILLM.chat-45"><a href="#AzureAILLM.chat-45"><span class="linenos">45</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="AzureAILLM.chat-46"><a href="#AzureAILLM.chat-46"><span class="linenos">46</span></a>            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">chat</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="AzureAILLM.chat-47"><a href="#AzureAILLM.chat-47"><span class="linenos">47</span></a>        <span class="k">except</span> <span class="n">litellm</span><span class="o">.</span><span class="n">InternalServerError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="AzureAILLM.chat-48"><a href="#AzureAILLM.chat-48"><span class="linenos">48</span></a>            <span class="k">raise</span> <span class="n">AzureAIError</span><span class="p">(</span>
</span><span id="AzureAILLM.chat-49"><a href="#AzureAILLM.chat-49"><span class="linenos">49</span></a>                <span class="n">reason</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Azure AI LLM error while processing the request: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="AzureAILLM.chat-50"><a href="#AzureAILLM.chat-50"><span class="linenos">50</span></a>            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span></pre></div>


            <div class="docstring"><p>Chat with the model using the provided messages.</p>
</div>


                            </div>
                            <div id="AzureAILLM.chat_with_tools" class="classattr">
                                        <input id="AzureAILLM.chat_with_tools-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">chat_with_tools</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">messages</span>, </span><span class="param"><span class="n">tools</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AzureAILLM.chat_with_tools-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AzureAILLM.chat_with_tools"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AzureAILLM.chat_with_tools-52"><a href="#AzureAILLM.chat_with_tools-52"><span class="linenos">52</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">chat_with_tools</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">messages</span><span class="p">,</span> <span class="n">tools</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="AzureAILLM.chat_with_tools-53"><a href="#AzureAILLM.chat_with_tools-53"><span class="linenos">53</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">litellm</span><span class="o">.</span><span class="n">supports_function_calling</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()):</span>
</span><span id="AzureAILLM.chat_with_tools-54"><a href="#AzureAILLM.chat_with_tools-54"><span class="linenos">54</span></a>            <span class="k">raise</span> <span class="n">FunctionCallingNotSupportedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_name</span><span class="p">)</span>
</span><span id="AzureAILLM.chat_with_tools-55"><a href="#AzureAILLM.chat_with_tools-55"><span class="linenos">55</span></a>
</span><span id="AzureAILLM.chat_with_tools-56"><a href="#AzureAILLM.chat_with_tools-56"><span class="linenos">56</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="AzureAILLM.chat_with_tools-57"><a href="#AzureAILLM.chat_with_tools-57"><span class="linenos">57</span></a>            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">chat_with_tools</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">tools</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="AzureAILLM.chat_with_tools-58"><a href="#AzureAILLM.chat_with_tools-58"><span class="linenos">58</span></a>        <span class="k">except</span> <span class="n">litellm</span><span class="o">.</span><span class="n">InternalServerError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="AzureAILLM.chat_with_tools-59"><a href="#AzureAILLM.chat_with_tools-59"><span class="linenos">59</span></a>            <span class="k">raise</span> <span class="n">AzureAIError</span><span class="p">(</span>
</span><span id="AzureAILLM.chat_with_tools-60"><a href="#AzureAILLM.chat_with_tools-60"><span class="linenos">60</span></a>                <span class="n">reason</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Azure AI LLM error while processing the request: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="AzureAILLM.chat_with_tools-61"><a href="#AzureAILLM.chat_with_tools-61"><span class="linenos">61</span></a>            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span></pre></div>


            <div class="docstring"><p>Chat with the model using the provided messages and tools.</p>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>