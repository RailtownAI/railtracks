
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://something/api_reference/features/context_management/" rel="canonical"/>
<link href="../cli_interface/" rel="prev"/>
<link href="../exception_handling/" rel="next"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.16" name="generator"/>
<title>Context management - RailTracks Docs</title>
<link href="../../../assets/stylesheets/main.7e37652d.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../css/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#context-management">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="RailTracks Docs" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="RailTracks Docs">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            RailTracks Docs
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Context management
            
          </span>
</div>
</div>
</div>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="RailTracks Docs" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="RailTracks Docs">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    RailTracks Docs
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    Home
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Tutorials
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/byfa/">
<span class="md-ellipsis">
    How to Build Your First Agent
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/ryfa/">
<span class="md-ellipsis">
    How to Run Your First Agent
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/node_builder/">
<span class="md-ellipsis">
    How to Customize Class Building
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/yet_another_weather_bot/">
<span class="md-ellipsis">
    Yet another weather bot
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
<span class="md-ellipsis">
    Background
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
            Background
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/guides/index.md">
<span class="md-ellipsis">
    None
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/guides/agents/">
<span class="md-ellipsis">
    Agents
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/guides/tools/">
<span class="md-ellipsis">
    Tools
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    Tools + MCP
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Tools + MCP
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools_mcp/tools_mcp/">
<span class="md-ellipsis">
    Equip your LLMs
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
<span class="md-ellipsis">
    MCP
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
            MCP
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools_mcp/mcp/mcp/">
<span class="md-ellipsis">
    Model Context Protocol
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools_mcp/mcp/MCP_tools_in_RT/">
<span class="md-ellipsis">
    Using MCP
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools_mcp/mcp/RTtoMCP/">
<span class="md-ellipsis">
    Creating an MCP
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
<span class="md-ellipsis">
    Tools
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
            Tools
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools_mcp/tools/tools/">
<span class="md-ellipsis">
    What is a Tool
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools_mcp/tools/functions_as_tools/">
<span class="md-ellipsis">
    Functions as Tools
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools_mcp/tools/agents_as_tools/">
<span class="md-ellipsis">
    Agents as Tools
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools_mcp/tools/advanced_usage/">
<span class="md-ellipsis">
    Advanced Tooling
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
<span class="md-ellipsis">
    Integrations
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_4">
<span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools_mcp/guides/notion/">
<span class="md-ellipsis">
    Notion
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools_mcp/guides/github/">
<span class="md-ellipsis">
    Github
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools_mcp/guides/python_sandbox/">
<span class="md-ellipsis">
    Python Sandbox
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools_mcp/guides/shell_bash/">
<span class="md-ellipsis">
    Shell Bash
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools_mcp/guides/slack/">
<span class="md-ellipsis">
    Slack
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tools_mcp/guides/websearch_integration/">
<span class="md-ellipsis">
    Web Search
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Observability
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Observability
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../observability/visualization/">
<span class="md-ellipsis">
    Visualization
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../observability/logging/">
<span class="md-ellipsis">
    Logging
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../observability/streaming/">
<span class="md-ellipsis">
    Streaming
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../observability/chat/">
<span class="md-ellipsis">
    Local Chat
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../observability/error_handling/">
<span class="md-ellipsis">
    Error Handling
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    LLM Support
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            LLM Support
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../llm_support/providers/">
<span class="md-ellipsis">
    Supported Providers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../llm_support/prompts/">
<span class="md-ellipsis">
    Prompts and Context Injection
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../llm_support/config/">
<span class="md-ellipsis">
    Configuration
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../deployments/">
<span class="md-ellipsis">
    Deployments
    
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Deployments
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    Advanced Usage
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Advanced Usage
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../advanced_usage/context/">
<span class="md-ellipsis">
    Context
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../advanced_usage/prompt_injection/">
<span class="md-ellipsis">
    Prompt Injection
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../samples/">
<span class="md-ellipsis">
    Samples
    
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            Samples
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    System Internals
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            System Internals
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../system_internals/overview/">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../system_internals/concepts/">
<span class="md-ellipsis">
    Core Concepts
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../system_internals/node/">
<span class="md-ellipsis">
    Node Abstraction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../system_internals/session/">
<span class="md-ellipsis">
    Session Management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../system_internals/pubsub/">
<span class="md-ellipsis">
    PubSub Messaging
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../system_internals/coordinator/">
<span class="md-ellipsis">
    Coordinator Orchestration
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-ellipsis">
    API Reference
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../generated/railtracks.html">
<span class="md-ellipsis">
    Generated
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_10_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_10_2" id="__nav_10_2_label" tabindex="0">
<span class="md-ellipsis">
    Components
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_10_2">
<span class="md-nav__icon md-icon"></span>
            Components
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/api_provider_wrappers/">
<span class="md-ellipsis">
    API Provider Wrappers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/chat_tool_call_node/">
<span class="md-ellipsis">
    Chat Tool Call Node
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/chat_ui/">
<span class="md-ellipsis">
    Chat UI
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/chunking_service/">
<span class="md-ellipsis">
    Chunking Service
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/cli_entry_point/">
<span class="md-ellipsis">
    CLI Entry Point
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/cloud_model_wrappers/">
<span class="md-ellipsis">
    Azure AI LLM Wrapper
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/context_management/">
<span class="md-ellipsis">
    Context Management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/embedding_service/">
<span class="md-ellipsis">
    Embedding Service
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/exception_handling/">
<span class="md-ellipsis">
    Exception Handling
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/execution_info/">
<span class="md-ellipsis">
    Execution Info
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/executor_configuration/">
<span class="md-ellipsis">
    Executor Configuration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/function_node_base/">
<span class="md-ellipsis">
    Function Node Base
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/graph_serialization/">
<span class="md-ellipsis">
    Graph Serialization
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/in_memory_vector_store/">
<span class="md-ellipsis">
    In-Memory Vector Store
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/jupyter_compatibility/">
<span class="md-ellipsis">
    Jupyter Compatibility
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/llm_messaging/">
<span class="md-ellipsis">
    LLM Messaging
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/llm_node_base/">
<span class="md-ellipsis">
    LLM Node Base
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/local_model_wrappers/">
<span class="md-ellipsis">
    Local Model Wrappers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/logger_creation/">
<span class="md-ellipsis">
    Logger Creation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/logging_actions/">
<span class="md-ellipsis">
    Logging Actions
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/logging_configuration/">
<span class="md-ellipsis">
    Logging Configuration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/mcp_client_server/">
<span class="md-ellipsis">
    MCP Client and Server
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/mcp_tool_connection/">
<span class="md-ellipsis">
    MCP Tool Connection
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model_error_handling/">
<span class="md-ellipsis">
    Model Error Handling
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/model_interaction/">
<span class="md-ellipsis">
    Model Interaction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/node_building/">
<span class="md-ellipsis">
    Node Building
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/node_creation_validation/">
<span class="md-ellipsis">
    Node Creation Validation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/node_interaction/">
<span class="md-ellipsis">
    Node Interaction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/node_invocation_validation/">
<span class="md-ellipsis">
    Node Invocation Validation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/node_management/">
<span class="md-ellipsis">
    Node Management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/node_manifest/">
<span class="md-ellipsis">
    Node Manifest
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/node_state_management/">
<span class="md-ellipsis">
    Node State Management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/node_to_mcp_server/">
<span class="md-ellipsis">
    Node to MCP Server
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/profiling/">
<span class="md-ellipsis">
    Profiling
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/prompt_formatting/">
<span class="md-ellipsis">
    Prompt Injection
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/prompt_injection/">
<span class="md-ellipsis">
    Prompt Injection
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/publisher/">
<span class="md-ellipsis">
    Publisher
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/pubsub_messaging/">
<span class="md-ellipsis">
    Pub/Sub Messaging
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/rag_core/">
<span class="md-ellipsis">
    RAG Core
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/rag_node/">
<span class="md-ellipsis">
    RAG Node
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/rag_utilities/">
<span class="md-ellipsis">
    RAG Utilities
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/request_management/">
<span class="md-ellipsis">
    Request Management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/response_handling/">
<span class="md-ellipsis">
    Response Handling
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/rt_state_management/">
<span class="md-ellipsis">
    RT State Management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/serialization/">
<span class="md-ellipsis">
    Serialization
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/session_management/">
<span class="md-ellipsis">
    Session Management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/state_management/">
<span class="md-ellipsis">
    State Management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/state_utilities/">
<span class="md-ellipsis">
    State Utilities
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/task_execution/">
<span class="md-ellipsis">
    Task Execution
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/terminal_node_base/">
<span class="md-ellipsis">
    Terminal Node Base
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/text_object_management/">
<span class="md-ellipsis">
    Text Object Management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/tool_call_node_base/">
<span class="md-ellipsis">
    Tool Call Node Base
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/tool_callable_node/">
<span class="md-ellipsis">
    Tool Callable Node
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/tool_management/">
<span class="md-ellipsis">
    Tool Management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/tool_parsing/">
<span class="md-ellipsis">
    Tool Parsing
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/vector_store_base/">
<span class="md-ellipsis">
    Vector Store Base
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/vector_store_factory/">
<span class="md-ellipsis">
    Vector Store Factory
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../components/vector_store_utilities/">
<span class="md-ellipsis">
    Vector Store Utilities
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_10_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_10_3" id="__nav_10_3_label" tabindex="0">
<span class="md-ellipsis">
    Features
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_10_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_10_3">
<span class="md-nav__icon md-icon"></span>
            Features
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../cli_interface/">
<span class="md-ellipsis">
    Cli interface
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Context management
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Context management
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#table-of-contents">
<span class="md-ellipsis">
      Table of Contents
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1-functional-overview">
<span class="md-ellipsis">
      1. Functional Overview
    </span>
</a>
<nav aria-label="1. Functional Overview" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#11-runner-context-life-cycle">
<span class="md-ellipsis">
      1.1 Runner Context Life-Cycle
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#12-external-context-variable-crud">
<span class="md-ellipsis">
      1.2 External Context Variable CRUD
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#13-dynamic-executor-configuration">
<span class="md-ellipsis">
      1.3 Dynamic Executor Configuration
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-external-contracts">
<span class="md-ellipsis">
      2. External Contracts
    </span>
</a>
<nav aria-label="2. External Contracts" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#21-implicit-contracts">
<span class="md-ellipsis">
      2.1 Implicit Contracts
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#22-configuration-flags">
<span class="md-ellipsis">
      2.2 Configuration &amp; Flags
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-design-and-architecture">
<span class="md-ellipsis">
      3. Design and Architecture
    </span>
</a>
<nav aria-label="3. Design and Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#31-core-abstractions">
<span class="md-ellipsis">
      3.1 Core Abstractions
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#32-data-control-flow">
<span class="md-ellipsis">
      3.2 Data &amp; Control Flow
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#33-trade-offs-rationale">
<span class="md-ellipsis">
      3.3 Trade-offs &amp; Rationale
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#34-rejected-alternatives">
<span class="md-ellipsis">
      3.4 Rejected Alternatives
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-related-files">
<span class="md-ellipsis">
      4. Related Files
    </span>
</a>
<nav aria-label="4. Related Files" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#41-related-component-files">
<span class="md-ellipsis">
      4.1 Related Component Files
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#42-related-feature-files">
<span class="md-ellipsis">
      4.2 Related Feature Files
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#43-external-dependencies">
<span class="md-ellipsis">
      4.3 External Dependencies
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#changelog">
<span class="md-ellipsis">
      CHANGELOG
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../exception_handling/">
<span class="md-ellipsis">
    Exception handling
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../llm_integration/">
<span class="md-ellipsis">
    Llm integration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../logging_profiling/">
<span class="md-ellipsis">
    Logging profiling
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../mcp_integration/">
<span class="md-ellipsis">
    Mcp integration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../node_interaction/">
<span class="md-ellipsis">
    Node interaction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../node_management/">
<span class="md-ellipsis">
    Node management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../rag_system/">
<span class="md-ellipsis">
    Rag system
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../state_management/">
<span class="md-ellipsis">
    State management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../task_execution/">
<span class="md-ellipsis">
    Task execution
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tool_management/">
<span class="md-ellipsis">
    Tool management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../validation/">
<span class="md-ellipsis">
    Validation
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#table-of-contents">
<span class="md-ellipsis">
      Table of Contents
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1-functional-overview">
<span class="md-ellipsis">
      1. Functional Overview
    </span>
</a>
<nav aria-label="1. Functional Overview" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#11-runner-context-life-cycle">
<span class="md-ellipsis">
      1.1 Runner Context Life-Cycle
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#12-external-context-variable-crud">
<span class="md-ellipsis">
      1.2 External Context Variable CRUD
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#13-dynamic-executor-configuration">
<span class="md-ellipsis">
      1.3 Dynamic Executor Configuration
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-external-contracts">
<span class="md-ellipsis">
      2. External Contracts
    </span>
</a>
<nav aria-label="2. External Contracts" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#21-implicit-contracts">
<span class="md-ellipsis">
      2.1 Implicit Contracts
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#22-configuration-flags">
<span class="md-ellipsis">
      2.2 Configuration &amp; Flags
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-design-and-architecture">
<span class="md-ellipsis">
      3. Design and Architecture
    </span>
</a>
<nav aria-label="3. Design and Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#31-core-abstractions">
<span class="md-ellipsis">
      3.1 Core Abstractions
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#32-data-control-flow">
<span class="md-ellipsis">
      3.2 Data &amp; Control Flow
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#33-trade-offs-rationale">
<span class="md-ellipsis">
      3.3 Trade-offs &amp; Rationale
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#34-rejected-alternatives">
<span class="md-ellipsis">
      3.4 Rejected Alternatives
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-related-files">
<span class="md-ellipsis">
      4. Related Files
    </span>
</a>
<nav aria-label="4. Related Files" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#41-related-component-files">
<span class="md-ellipsis">
      4.1 Related Component Files
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#42-related-feature-files">
<span class="md-ellipsis">
      4.2 Related Feature Files
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#43-external-dependencies">
<span class="md-ellipsis">
      4.3 External Dependencies
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#changelog">
<span class="md-ellipsis">
      CHANGELOG
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<!--
Context Management Feature Documentation
========================================
This file follows `TEMPLATE_FEATURE.md`.  
Delete instructional comments once you feel the document is mature.
-->
<h1 id="context-management">Context Management</h1>
<p>Provides a unified mechanism for propagating execution-scoped information (IDs, configs, variables, loggers, publishers) across asynchronous and multi-threaded code paths without leaking state between concurrent runners.</p>
<p><strong>Version:</strong> 0.0.1 <!-- bump on externally-observable change --></p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#1-functional-overview">1. Functional Overview</a></li>
<li><a href="#2-external-contracts">2. External Contracts</a></li>
<li><a href="#3-design-and-architecture">3. Design and Architecture</a></li>
<li><a href="#4-related-files">4. Related Files</a></li>
<li><a href="#changelog">CHANGELOG</a></li>
</ul>
<hr/>
<h2 id="1-functional-overview">1. Functional Overview</h2>
<p>The feature answers the question: <em>“How do I attach per-request data (IDs, configs, scratch-space) to the current execution and retrieve it from anywhere in the call-stack—sync or async—without manually passing arguments?”</em></p>
<p>It is built around a thin facade, <code>railtracks.context.central</code>, which exposes helpers for:</p>
<ol>
<li>Creating an execution “runner” and registering its context  </li>
<li>Reading / mutating context variables at any depth in the code path  </li>
<li>Customising global &amp; per-runner <code>ExecutorConfig</code> </li>
<li>Starting / shutting down the pub-sub <code>RTPublisher</code> tied to the runner  </li>
<li>Safely detecting absence of context to avoid misuse outside an active session</li>
</ol>
<p>The following task sets illustrate typical usage.</p>
<h3 id="11-runner-context-life-cycle">1.1 Runner Context Life-Cycle</h3>
<p>Create, activate, use, and finally tear down a runner context.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">railtracks.context.central</span> <span class="k">as</span> <span class="nn">ctx</span>
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="kn">from</span> <span class="nn">railtracks.utils.config</span> <span class="kn">import</span> <span class="n">ExecutorConfig</span>
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="c1"># --- bootstrapping (normally done by high-level rt.Session) -------------</span>
<a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="n">ctx</span><span class="o">.</span><span class="n">register_globals</span><span class="p">(</span>
<a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>    <span class="n">runner_id</span><span class="o">=</span><span class="s2">"runner_42"</span><span class="p">,</span>
<a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>    <span class="n">rt_publisher</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a>    <span class="n">parent_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a>    <span class="n">executor_config</span><span class="o">=</span><span class="n">ExecutorConfig</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mf">90.0</span><span class="p">),</span>
<a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a>    <span class="n">global_context_vars</span><span class="o">=</span><span class="p">{</span><span class="s2">"user_id"</span><span class="p">:</span> <span class="s2">"u_123"</span><span class="p">}</span>
<a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="p">)</span>
<a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a>
<a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="c1"># --- anywhere deep in the call-stack -----------------------------------</span>
<a href="#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="k">assert</span> <span class="n">ctx</span><span class="o">.</span><span class="n">is_context_present</span><span class="p">()</span>
<a href="#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="nb">print</span><span class="p">(</span><span class="s2">"Runner:"</span><span class="p">,</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get_runner_id</span><span class="p">())</span>           <span class="c1"># ➜ runner_42</span>
<a href="#__codelineno-0-16" id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="nb">print</span><span class="p">(</span><span class="s2">"User  :"</span><span class="p">,</span> <span class="n">ctx</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"user_id"</span><span class="p">))</span>            <span class="c1"># ➜ u_123</span>
<a href="#__codelineno-0-17" id="__codelineno-0-17" name="__codelineno-0-17"></a>
<a href="#__codelineno-0-18" id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="c1"># Update parent_id when spawning a child node</span>
<a href="#__codelineno-0-19" id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="n">ctx</span><span class="o">.</span><span class="n">update_parent_id</span><span class="p">(</span><span class="s2">"node_a"</span><span class="p">)</span>
<a href="#__codelineno-0-20" id="__codelineno-0-20" name="__codelineno-0-20"></a>
<a href="#__codelineno-0-21" id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="c1"># Tear-down (handled automatically by Session end)</span>
<a href="#__codelineno-0-22" id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="n">ctx</span><span class="o">.</span><span class="n">delete_globals</span><span class="p">()</span>
</code></pre></div>
<h3 id="12-external-context-variable-crud">1.2 External Context Variable CRUD</h3>
<p>The external context is a mutable key-value store designed for arbitrary, user-defined data.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kn">from</span> <span class="nn">railtracks.context.central</span> <span class="kn">import</span> <span class="n">get</span><span class="p">,</span> <span class="n">put</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">delete</span>
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>
<a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="n">put</span><span class="p">(</span><span class="s2">"trace_id"</span><span class="p">,</span> <span class="s2">"abc-xyz"</span><span class="p">)</span>
<a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="k">assert</span> <span class="n">get</span><span class="p">(</span><span class="s2">"trace_id"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"abc-xyz"</span>
<a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a>
<a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="n">update</span><span class="p">({</span><span class="s2">"stage"</span><span class="p">:</span> <span class="s2">"pre-processing"</span><span class="p">,</span> <span class="s2">"retry"</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
<a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="n">delete</span><span class="p">(</span><span class="s2">"trace_id"</span><span class="p">)</span>
</code></pre></div>
<h3 id="13-dynamic-executor-configuration">1.3 Dynamic Executor Configuration</h3>
<p>Fine-tune behaviour for <strong>all</strong> future runners (global) or <strong>just the current</strong> runner (local).</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kn">from</span> <span class="nn">railtracks.context.central</span> <span class="kn">import</span> <span class="n">set_config</span><span class="p">,</span> <span class="n">set_local_config</span><span class="p">,</span> <span class="n">get_global_config</span>
<a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>
<a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="c1"># Affect future runners only</span>
<a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="n">set_config</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mf">300.0</span><span class="p">,</span> <span class="n">logging_setting</span><span class="o">=</span><span class="s2">"DEBUG"</span><span class="p">)</span>
<a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a>
<a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="c1"># Locally override within this runner</span>
<a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="kn">from</span> <span class="nn">railtracks.utils.config</span> <span class="kn">import</span> <span class="n">ExecutorConfig</span>
<a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="n">set_local_config</span><span class="p">(</span><span class="n">ExecutorConfig</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span> <span class="n">end_on_error</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a>
<a href="#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">get_global_config</span><span class="p">()</span><span class="o">.</span><span class="n">timeout</span><span class="p">)</span>     <span class="c1"># ➜ 300.0</span>
</code></pre></div>
<hr/>
<h2 id="2-external-contracts">2. External Contracts</h2>
<p>Other subsystems rely on the <em>implicit</em> presence of a runner context rather than formal network APIs or CLIs. The table below documents these contracts.</p>
<h3 id="21-implicit-contracts">2.1 Implicit Contracts</h3>
<table>
<thead>
<tr>
<th>Contract</th>
<th>Producer / Consumer</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>runner_context</code> (<code>contextvars.ContextVar</code>)</td>
<td>Producer: <code>railtracks.context.central</code><br/>Consumer: <strong>ALL</strong> internal modules that call <code>central.safe_get_runner_context()</code></td>
<td>Accessing it without a registered context raises <code>ContextError</code>.</td>
</tr>
<tr>
<td><code>global_executor_config</code> (<code>ContextVar</code>)</td>
<td>Producer: <code>central.set_config()</code></td>
<td>Supplies default <code>ExecutorConfig</code> to new runners.</td>
</tr>
<tr>
<td>Pub-Sub <code>RTPublisher</code></td>
<td>Producer: <code>central.activate_publisher()</code></td>
<td>Must be started before emission; shutting down is mandatory to flush buffers.</td>
</tr>
</tbody>
</table>
<h3 id="22-configuration-flags">2.2 Configuration &amp; Flags</h3>
<table>
<thead>
<tr>
<th>Name/Call</th>
<th>Scope</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>set_config(**kwargs)</code></td>
<td>global</td>
<td>Mutate defaults for future runners; warns if called after start.</td>
</tr>
<tr>
<td><code>ExecutorConfig.prompt_injection</code></td>
<td>per run</td>
<td>Enables automatic context injection into LLM prompts.</td>
</tr>
<tr>
<td><code>ExecutorConfig.save_state</code></td>
<td>per run</td>
<td>Persist execution state to disk for replay/debug.</td>
</tr>
</tbody>
</table>
<hr/>
<h2 id="3-design-and-architecture">3. Design and Architecture</h2>
<p>The feature is realised by the <strong>Context Management component</strong> (<a href="../../components/context_management/">docs</a>). Below is a feature-level narrative; component-level details live in that document.</p>
<h3 id="31-core-abstractions">3.1 Core Abstractions</h3>
<pre class="mermaid"><code>classDiagram
    class RunnerContextVars {
        +str runner_id
        +InternalContext internal_context
        +ExternalContext external_context
        +prepare_new(new_parent_id)
    }

    class InternalContext {
        +RTPublisher publisher
        +str parent_id
        +str runner_id
        +ExecutorConfig executor_config
        +is_active()
        +prepare_new()
    }

    class ExternalContext &lt;<interface>&gt;
    class MutableExternalContext

    RunnerContextVars --&gt; InternalContext
    RunnerContextVars --&gt; ExternalContext
    ExternalContext &lt;|.. MutableExternalContext
</interface></code></pre>
<p>• <strong>RunnerContextVars</strong> – Immutable container installed into a <code>ContextVar</code>.<br>
• <strong>InternalContext</strong> – RT-specific, readonly to most callers; tracks publisher, parent ID, config.<br/>
• <strong>ExternalContext</strong> – User-facing scratch-space with CRUD operations.  </br></p>
<h3 id="32-data-control-flow">3.2 Data &amp; Control Flow</h3>
<ol>
<li><code>register_globals()</code> constructs <strong>RunnerContextVars</strong> and stores it in <code>runner_context</code>.  </li>
<li>Any function can call <code>safe_get_runner_context()</code>; the lookup walks <strong>only the current async context</strong> guaranteeing isolation between concurrent tasks.  </li>
<li>The attached <code>RTPublisher</code> is lazily started by <code>activate_publisher()</code>—decoupling publication from bootstrap time.  </li>
<li>When a node spawns children, it calls <code>update_parent_id()</code>; this returns a <strong>new</strong> RunnerContextVars instance ensuring <em>structural sharing</em> but new parent linkage.  </li>
</ol>
<h3 id="33-trade-offs-rationale">3.3 Trade-offs &amp; Rationale</h3>
<table>
<thead>
<tr>
<th>Decision</th>
<th>Reasoning</th>
<th>Trade-off / Mitigation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>contextvars</code> over thread-locals</td>
<td>Works across <code>asyncio</code>, <code>trio</code>, and threads.</td>
<td>Slight lookup overhead; negligible compared to I/O-bound workload.</td>
</tr>
<tr>
<td>Immutable <code>RunnerContextVars</code> replacement</td>
<td>Easier reasoning; prevents accidental side-effects between libraries.</td>
<td>Extra allocations; insignificant (dozens per execution tree).</td>
</tr>
<tr>
<td>Separate Internal vs External Context</td>
<td>Keeps RT-private machinery from polluting user dictionary and vice-versa.</td>
<td>Double indirection when both are needed; encapsulated by helper funcs.</td>
</tr>
<tr>
<td>Global <code>ExecutorConfig</code> ContextVar</td>
<td>Allows default-overrides <strong>without</strong> mutating process-wide globals (test isolation).</td>
<td>Must warn if a runner is already active – implemented via <code>warnings</code>.</td>
</tr>
<tr>
<td>No automatic publisher start on register</td>
<td>Forces explicit intention; avoids IO in code paths that only need context vars.</td>
<td>Requires documentation (<code>activate_publisher()</code>); safeguarded by checks.</td>
</tr>
</tbody>
</table>
<h3 id="34-rejected-alternatives">3.4 Rejected Alternatives</h3>
<ul>
<li><strong>Passing context down the call-stack manually</strong> – tedious, brittle, breaks 3rd-party API boundaries.  </li>
<li><strong>Single global module-level dict</strong> – unsafe in concurrent runners; leaks state across tests.  </li>
<li><strong><code>threading.local()</code></strong> – fails for <code>asyncio</code> coroutines that share threads.  </li>
</ul>
<hr/>
<h2 id="4-related-files">4. Related Files</h2>
<h3 id="41-related-component-files">4.1 Related Component Files</h3>
<ul>
<li><a href="../../components/context_management/"><code>../components/context_management.md</code></a>: Low-level API and implementation rationale.</li>
<li><a href="../../components/executor_configuration/"><code>../components/executor_configuration.md</code></a>: In-depth description of <code>ExecutorConfig</code>.</li>
</ul>
<h3 id="42-related-feature-files">4.2 Related Feature Files</h3>
<ul>
<li><a href="../logging_profiling/"><code>../features/logging_profiling.md</code></a>: Context’s <code>ExecutorConfig.logging_setting</code> interacts with logging feature.</li>
<li><a href="../task_execution/"><code>../features/task_execution.md</code></a>: Task executor consumes runner context to honour timeouts and cancellation.</li>
</ul>
<h3 id="43-external-dependencies">4.3 External Dependencies</h3>
<ul>
<li><a href="https://docs.python.org/3/library/contextvars.html"><code>https://docs.python.org/3/library/contextvars.html</code></a> – Python std-lib mechanism underpinning isolation.</li>
</ul>
<hr/>
<h2 id="changelog">CHANGELOG</h2>
<ul>
<li><strong>v0.0.1</strong> (YYYY-MM-DD) [<code>&lt;COMMIT_HASH&gt;</code>]: Initial creation of feature documentation.</li>
</ul>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "navigation.prefetch", "search.suggest", "content.code.copy", "content.code.highlight"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../../assets/javascripts/bundle.50899def.min.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
window.mermaidConfig = {default: {
    startOnLoad: false
}};</script></body>
</html>